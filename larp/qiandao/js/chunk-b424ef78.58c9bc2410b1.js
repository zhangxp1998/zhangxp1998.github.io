(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b424ef78"],{"0c10":function(e,t,a){},"0c8d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"container"},[e.showCard?t("van-overlay",{attrs:{show:e.showCard,"custom-style":{display:"flex",justifyContent:"center",alignItems:"center"}},on:{click:e.closeCreatedCard}},[t("final-card",{attrs:{"card-data":e.cardData},on:{closeCreatedCard:e.closeCreatedCard}})],1):e._e(),t("div",{staticClass:"producer-card__choose-panel"},[t("choose-panel",{attrs:{"show-panel":e.showPanel,type:e.popupType,"card-data":e.cardData},on:{close:e.closeChoosePanel,select:e.handleSelect}})],1),t("div",{staticClass:"card-gap"},[t("Card",{attrs:{title:"基本信息"}},[t("van-field",{attrs:{label:"昵称",placeholder:"输入你的圈名",maxlength:8,"show-word-limit":""},model:{value:e.cardData.nickName,callback:function(t){e.$set(e.cardData,"nickName",t)},expression:"cardData.nickName"}}),t("cell",{staticClass:"cell-sex",attrs:{title:"性别",value:e.cardData.sex,"title-class":"cell-title-narrow"}},[t("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.handleActionSelect},model:{value:e.showSexAction,callback:function(t){e.showSexAction=t},expression:"showSexAction"}}),t("div",{staticClass:"show-sex-action-container"},[t("div",{staticClass:"card-sex-box",style:{color:e.cardData.sex?"#1AB0FF":"rgba(0,0,0,0.4)"},on:{click:function(t){e.showSexAction=!0}}},[e._v(" "+e._s(e.cardData.sex?e.cardData.sex:"请选择")+" ")]),t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/04b5303949c038511e3b2091853186f3.png",alt:"",height:"3.67px",width:"6.67px"}})])],1),t("van-field",{attrs:{label:"年龄",placeholder:"输入你的年龄或身份",maxlength:8,"show-word-limit":""},model:{value:e.cardData.age,callback:function(t){e.$set(e.cardData,"age",t)},expression:"cardData.age"}})],1)],1),t("div",{staticClass:"card-gap"},[t("Card",{attrs:{title:"我推的","sub-title":"选填，每项可添加5个"}},[t("cell",{attrs:{title:"主推",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-push-row"},[e._l(e.cardData.mainThrust,(function(a){return t("div",{key:a.id,staticClass:"card-push-item"},[t("div",{staticClass:"card-item-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"44px",height:"44px"}})]),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("mainThrust",a)}}}),t("div",{staticClass:"card-push-item-title"},[e._v(e._s(a.name))])])})),e.cardData.mainThrust.length<5?t("img",{staticClass:"my-push-row-item",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/64e14760d75d2b000555a1952f3952c5.png","data-type":"mainThrust",alt:"",height:"59px"},on:{click:e.openChoosePanel}}):e._e()],2)]),t("cell",{attrs:{title:"副推",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-push-row"},[e._l(e.cardData.auxiliaryPush,(function(a){return t("div",{key:a.id,staticClass:"card-push-item"},[t("div",{staticClass:"card-item-image ke-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"44px",height:"44px"}})]),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("auxiliaryPush",a)}}}),t("div",{staticClass:"card-push-item-title"},[e._v(e._s(a.name))])])})),e.cardData.auxiliaryPush.length<5?t("img",{staticClass:"my-push-row-item",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/64e14760d75d2b000555a1952f3952c5.png","data-type":"auxiliaryPush",alt:"",height:"100%"},on:{click:e.openChoosePanel}}):e._e()],2)]),t("cell",{attrs:{title:"团推",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-push-row"},[e._l(e.cardData.groupPush,(function(a){return t("div",{key:a.id,staticClass:"card-push-item"},[t("div",{staticClass:"card-item-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"44px",height:"44px"}})]),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("groupPush",a)}}}),t("div",{staticClass:"card-push-item-title"},[e._v(e._s(a.name))])])})),e.cardData.groupPush.length<5?t("img",{staticClass:"my-push-row-item",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/64e14760d75d2b000555a1952f3952c5.png","data-type":"groupPush",alt:"",height:"100%"},on:{click:e.openChoosePanel}}):e._e()],2)])],1)],1),t("div",{staticClass:"card-gap ke-body"},[t("Card",{attrs:{title:"我嗑的","sub-title":"选填，每项可添加4组"}},[t("div",{staticClass:"ke-cp"},[t("cell",{attrs:{title:"CP",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-ke-row",attrs:{id:"cp"}},[e._l(e.cardData.cp,(function(a){return t("div",{key:a.id,staticClass:"my-ke-item-container"},[e._l(a.value,(function(a){return t("div",{key:a.id,staticClass:"my-push-row-item-each"},[t("div",{staticClass:"card-item-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"44px",height:"44px"}})]),t("div",{staticClass:"card-ke-item-title"},[e._v(e._s(a.name))])])})),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("cp",a)}}})],2)})),e.cardData.cp.length<4?t("img",{staticClass:"my-push-row-item",style:{alignSelf:"center",marginRight:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/28ad945781f04618ed4f316bf6a36faf.png","data-type":"cp",alt:"",height:"75px"},on:{click:e.openChoosePanel}}):e._e()],2)])],1),t("div",{staticClass:"ke-cb"},[t("cell",{attrs:{title:"CB",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-ke-row",attrs:{id:"cb"}},[e._l(e.cardData.cb,(function(a){return t("div",{key:a.id,staticClass:"my-ke-item-container"},[e._l(a.value,(function(a){return t("div",{key:a.id,staticClass:"my-push-row-item-each"},[t("div",{staticClass:"card-item-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"44px",height:"44px"}})]),t("div",{staticClass:"card-ke-item-title"},[e._v(e._s(a.name))])])})),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("cb",a)}}})],2)})),e.cardData.cb.length<4?t("img",{staticClass:"my-push-row-item",staticStyle:{"align-self":"center","margin-right":"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/28ad945781f04618ed4f316bf6a36faf.png",alt:"",height:"75px","data-type":"cb"},on:{click:e.openChoosePanel}}):e._e()],2)])],1)])],1),t("div",{staticClass:"card-gap"},[t("Card",{attrs:{title:"我的情柄","sub-title":"选填，每项可添加2个"}},[t("cell",{attrs:{title:"花前",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-love-handle-row"},[e._l(e.cardData.beforeFlowering,(function(a){return t("div",{key:a.id,staticClass:"my-love-handle-row-item"},[t("div",{staticClass:"my-love-handle-row-item__cover"},[t("img",{attrs:{src:a.cover,alt:"",height:"100%"}})]),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("beforeFlowering",a)}}}),t("div",{staticClass:"my-love-handle-row-title"},[e._v(e._s(a.name))])])})),e.cardData.beforeFlowering.length<2?t("img",{staticClass:"my-push-row-item",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/9295925b58de3729df318c436cd6d111.png",alt:"",height:"95px","data-type":"beforeFlowering"},on:{click:e.openChoosePanel}}):e._e()],2)]),t("cell",{attrs:{title:"花后",value:"内容","title-class":"cell-title-middle"}},[t("div",{staticClass:"my-love-handle-row"},[e._l(e.cardData.afterFlowering,(function(a){return t("div",{key:a.id,staticClass:"my-love-handle-row-item"},[t("div",{staticClass:"my-love-handle-row-item__cover"},[t("img",{attrs:{src:a.cover,alt:"",height:"100%"}})]),t("img",{staticClass:"badge-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png",alt:"",height:"16.67px",width:"16.67px"},on:{click:function(t){return e.removeItem("afterFlowering",a)}}}),t("div",{staticClass:"my-love-handle-row-title"},[e._v(e._s(a.name))])])})),e.cardData.afterFlowering.length<2?t("img",{staticClass:"my-push-row-item",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/9295925b58de3729df318c436cd6d111.png",alt:"",height:"95px","data-type":"afterFlowering"},on:{click:e.openChoosePanel}}):e._e()],2)])],1)],1),t("div",{staticClass:"card-gap",staticStyle:{"margin-bottom":"80px"}},[t("Card",{attrs:{title:"更多"}},[t("van-field",{staticClass:"more__textarea",attrs:{maxlength:30,"show-word-limit":"",type:"textarea",label:"婉拒",autosize:"",placeholder:"不可以，也没必要"},model:{value:e.cardData.decline,callback:function(t){e.$set(e.cardData,"decline",t)},expression:"cardData.decline"}}),t("van-field",{staticClass:"more__textarea",attrs:{"show-word-limit":"",label:"雷点",rows:"2",autosize:"",type:"textarea",maxlength:30,placeholder:"别来沾边"},model:{value:e.cardData.minePoint,callback:function(t){e.$set(e.cardData,"minePoint",t)},expression:"cardData.minePoint"}}),t("van-field",{staticClass:"more__textarea",attrs:{"show-word-limit":"",rows:"2",label:"其他",autosize:"",maxlength:50,type:"textarea",placeholder:"最后再说些什么吧"},model:{value:e.cardData.other,callback:function(t){e.$set(e.cardData,"other",t)},expression:"cardData.other"}})],1)],1),t("div",{staticClass:"create-card-container"},[t("van-button",{staticClass:"create-card",attrs:{type:"primary",color:"#2B263B",block:""},on:{click:e.openCreatedCard}},[e._v(" 生成名片 ")])],1)],1)},s=[],r=(a("e17f"),a("2241")),n=(a("2cbd"),a("ab2c")),c=(a("18e9"),a("471a")),o=(a("e7e5"),a("d399")),l=(a("66b9"),a("b650")),d=(a("c194"),a("7744")),p=(a("61ae"),a("d314")),u=(a("09d3"),a("2d6d")),m=(a("be7f"),a("565f")),g=(a("c3a6"),a("ad06")),h=(a("f1dc"),a("6e47")),v=(a("14d9"),a("2b0e")),f=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"producer-card-container"},[t("div",{staticClass:"producer-card-title"},[t("div",{staticClass:"producer-card-title-text"},[e._v(e._s(e.title))])]),t("div",{staticClass:"producer-card-subtitle"},[e._v(" "+e._s(e.subTitle)+" ")]),t("div",{staticClass:"producer-card-body"},[e._t("default")],2)])},b=[];const C=Object(v["defineComponent"])({name:"Card",props:{title:{type:String},subTitle:{type:String,default:""}}});var y=C,w=y,_=(a("582b"),a("0c7c")),x=Object(_["a"])(w,f,b,!1,null,"5f862b1e",null),k=x.exports,P=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"final-card-container"},[e.image?t("div",{staticClass:"final-card-image"},[t("img",{staticClass:"final-card-image--card",attrs:{src:e.image,alt:"",width:"100%",height:"459px"},on:{click:function(e){e.stopPropagation()}}})]):t("div",{staticClass:"final-card-body",attrs:{id:"card"},on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"final-card-header"},[t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/ffd617176caa77b81d3c1755d0b2315d.jpg",width:"100%",height:"100px"}}),t("div",{staticClass:"search-title"},[t("van-icon",{attrs:{name:"search"}}),e._v(" vx 潮玩族小程序搜索偶像梦幻祭岛 ")],1),t("div",{staticClass:"final-card-nickname-container"},[e._v(" "+e._s(e.renderData.nickName)+" ")]),t("div",{staticClass:"final-card-sex-container"},[e._v(" "+e._s(e.renderData.sex)+" ")]),t("div",{staticClass:"final-card-age-container"},[e._v(" "+e._s(e.renderData.age)+" ")]),t("div",{staticClass:"user-logo"},[e.avatar?t("img",{attrs:{src:e.avatar,alt:"",width:"100%",height:"100%"}}):e._e()])]),t("div",{staticClass:"final-card-push"},[t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/6ec441567bd20dbaffb540e0658a03e0.jpg",width:"100%",height:"100%"}}),t("div",{staticClass:"main-title"},[e._v("主推")]),t("div",{staticClass:"vice-title"},[e._v("副推")]),t("div",{staticClass:"tuan-push"},[e._v("团推")]),t("div",{staticClass:"main-push-images"},[0===e.renderData.mainThrust.length?t("div",{staticClass:"push-images-empty"},[e._v(" 没有 ")]):e._e(),e._l(e.renderData.mainThrust,(function(a){return t("div",{key:a.id,staticClass:"main-push-images-item"},[t("div",{staticClass:"main-push-images-item-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"25px",height:"25px"}})]),t("div",{staticClass:"main-push-images-title"},[e._v(e._s(a.name))])])}))],2),t("div",{staticClass:"auxiliary-vice-images"},[0===e.renderData.auxiliaryPush.length?t("div",{staticClass:"push-images-empty"},[e._v(" 没有 ")]):e._e(),e._l(e.renderData.auxiliaryPush,(function(a){return t("div",{key:a.id,staticClass:"auxiliary-push-images-item"},[t("div",{staticClass:"auxiliary-push-images-item-image"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"25px",height:"25px"}})]),t("div",{staticClass:"auxiliary-push-images-title"},[e._v(e._s(a.name))])])}))],2),t("div",{staticClass:"group-vice-images",style:{flexDirection:e.renderData.groupPush.length>3?"row":"column"}},[0===e.renderData.groupPush.length?t("div",{staticClass:"push-images-empty"},[e._v(" 没有 ")]):e._e(),e._l(e.renderData.groupPush,(function(a){return t("div",{key:a.id,staticClass:"group-push-images-item",style:{transform:`scale(${e.renderData.groupPush.length>2?"1.6":"1.8"})`}},[t("img",{attrs:{src:a.images.logo,alt:"",width:e.renderData.groupPush.length>2?"20px":"25px",height:e.renderData.groupPush.length>2?"20px":"25px"}})])}))],2)]),t("div",{staticClass:"final-card-ke"},[t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/8f4c9b028d13719464688693d739dba9.jpg",width:"100%",height:"100%"}}),t("div",{staticClass:"final-card-ke-row-cp"},[0===e.renderData.cp.length?t("div",{staticClass:"push-images-empty",staticStyle:{"margin-top":"6px"}},[e._v(" 没有特别嗑的CP ")]):e._e(),e._l(e.renderData.cp,(function(a,i){return t("div",{key:i,staticClass:"final-card-ke-row-both"},[t("img",{staticClass:"love-card-ke-love-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/3c598fb0928b6f43b8562c6e792d2cb6.png",alt:"",width:"10px",height:"10px"}}),e._l(a.value,(function(a){return t("div",{key:a.id,staticClass:"final-card-ke-row-each"},[t("div",{staticClass:"final-card-ke-row-each-cover"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"20px",height:"20px"}})]),t("div",{staticClass:"final-card-ke-row-each-title"},[e._v(e._s(a.name))])])}))],2)}))],2),t("div",{staticClass:"final-card-ke-row-bp"},[0===e.renderData.cb.length?t("div",{staticClass:"push-images-empty",staticStyle:{"margin-bottom":"8px"}},[e._v(" 没有特别嗑的CB ")]):e._e(),e._l(e.renderData.cb,(function(a,i){return t("div",{key:i,staticClass:"final-card-ke-row-both"},[t("img",{staticClass:"love-card-ke-love-icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/4ab0177824339010ccba755a4d82e91d.png",alt:"",width:"10px",height:"10px"}}),e._l(a.value,(function(a){return t("div",{key:a.id,staticClass:"final-card-ke-row-each"},[t("div",{staticClass:"final-card-ke-row-each-cover"},[t("img",{attrs:{src:a.images.logo,alt:"",width:"20px",height:"20px"}})]),t("div",{staticClass:"final-card-ke-row-each-title"},[e._v(e._s(a.name))])])}))],2)}))],2)]),t("div",{staticClass:"final-card-handle-diagram"},[t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/536189f856c2db9254efbd9312f13d21.jpg",width:"100%",height:"100%"}}),t("div",{staticClass:"final-card-handle-diagram-front__title"},[e._v("花前情柄")]),t("div",{staticClass:"final-card-handle-diagram-front__content-area"},[0===e.renderData.beforeFlowering.length?t("div",{staticClass:"handle-diagram--empty"},[e._v(" 无 ")]):e._e(),e._l(e.renderData.beforeFlowering,(function(e){return t("div",{key:e.id,staticClass:"flowering-image-container"},[t("img",{staticClass:"flowering-image",attrs:{src:e.cover,alt:""}})])}))],2),t("div",{staticClass:"final-card-handle-diagram-behind__title"},[e._v("花后情柄")]),t("div",{staticClass:"final-card-handle-diagram-behind__content-area"},[0===e.renderData.afterFlowering.length?t("div",{staticClass:"handle-diagram--empty"},[e._v(" 无 ")]):e._e(),e._l(e.renderData.afterFlowering,(function(e){return t("div",{key:e.id,staticClass:"flowering-image-container"},[t("img",{staticClass:"flowering-image",attrs:{src:e.cover,alt:""}})])}))],2)]),t("div",{staticClass:"final-card-other"},[t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/db957b9807862e6747b0cf5a0a6d7e33.jpg",width:"100%",height:"100%"}}),t("div",{staticClass:"final-card-other-decline-title"},[e._v("婉拒：")]),t("div",{staticClass:"final-card-other-decline__content-area"},[e._v(" "+e._s(e.renderData.decline?e.renderData.decline:"没有啦")+" ")]),t("div",{staticClass:"final-card-mine-point-title"},[e._v("雷点：")]),t("div",{staticClass:"final-card-main-point__content-area"},[e._v(" "+e._s(e.renderData.minePoint?e.renderData.minePoint:"没有啦")+" ")])]),t("div",{staticClass:"final-card-want-say"},[t("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/6efa66a0426ea9500414d8cd7f397423.jpg",width:"100%",height:"100%"}}),t("div",{staticClass:"final-card-want-say-title"},[e._v("最后再说些什么吧：")]),t("div",{staticClass:"final-card-want-say__content-area"},[e._v(" "+e._s(e.renderData.other?e.renderData.other:"没有啦")+" ")])])])])},D=[],j=(a("d9e2"),a("c0e9"),a("4360")),O=a("ed08"),S=a("7cb2"),T=a("cb35"),q=a("684b"),I=a("0ef7");a("bc3a");function B(){return I["j"].get("/treasure/tags",{typeIds:57957,limit:100,offset:0,andSourcePublicRelations:JSON.stringify([{sourceId:"9127",sourceType:5,propertyId:"53158"}]),orderBy:"nameDesc"})}function N(e=0,t=20,a,i){let s={limit:t,offset:e,typeId:"1398630",andPublicRelations:[{sourceId:0===i?"1398644":"1398645",sourceType:1,propertyId:"1003410"}]};return"undefined"!==typeof a&&(s={...s,name:a}),I["j"].post("/treasure/spus/search/simple-info",s,{headers:{"Content-Type":"application/json"}})}function R(e){return I["j"].post("/z/poster-web/esProducerCard/final-card",e,{headers:{"Content-Type":"application/json"},responseType:"blob"})}const F=!1,U=Object(v["defineComponent"])({name:"ProducerCard",props:{cardData:{type:Object}},components:{VanIcon:g["a"]},mounted(){this.avatar?(this.showLoading(),Object(v["nextTick"])(()=>{setTimeout(()=>{this.exportImage(document.getElementById("card"))},2e3)})):r["a"].alert({title:"请登录",message:"你还没有登录，请先登录",showCancelButton:!0,confirmButtonColor:"rgb(26, 176, 255)"}).then(()=>{const e="/modules/pages/common-login/index?redirect="+encodeURIComponent(`/modules/pages/web-view/index?url=https://${F?"dev-":""}m.qiandaoapp.com/plugin/es-producer-card&ut=true`);Object(O["h"])()||Object(O["d"])()?this.navigateTo({url:e}):Object(o["a"])("请在小程序上打开本页面")}).catch(()=>{})},methods:{async exportImage(e){this.renderData.avatar=this.avatar,R(this.renderData).then(async e=>{const t=Object(O["i"])(),a=new File([e],t+".jpeg"),i=await Object(S["b"])(a,"activity-temp.image");this.image=i.url,r["a"].alert({title:"名片已生成",message:"发布到“偶像梦幻祭岛”后获取高清图片，并让更多玩家看到，是否发布",showCancelButton:!0,confirmButtonColor:"rgb(26, 176, 255)"}).then(async()=>{await this.afterCreateCard()}).catch(()=>{this.$emit("closeCreatedCard")}),this.hideToast()})},async sendPost(){this.showLoading();const e={attachments:[{key:Object(O["i"])(),meta:{},spu:null,type:"image",url:this.image}],content:"",mentionRelatedObjects:{},privacy:"public",reviewStatistic:"[]",labels:[{propertyTagId:"1436337",relatedType:"tag",relatedId:"1446178"}],islandId:300003,meta:{plugin:{id:"es-expand-cards"}}},t=await q["a"].createPostStandard(e),a=t.data.id;Object(o["a"])("发帖成功！即将跳转至详情页"),setTimeout(()=>{this.navigateTo({url:"/pages-community/post/spu-detail?postId="+a})},1e3)},async afterCreateCard(){this.showLoading();const e=await this.isJoinedIsland();this.hideToast(),e?this.sendPost():this.goToJoinIsland()},async joinIsland(){this.showLoading();await T["a"].join(300003);this.hideToast(),await this.afterCreateCard()},goToJoinIsland(){r["a"].alert({title:"请选择",message:"你还没有加入岛，是否加入岛",showCancelButton:!0,confirmButtonColor:"rgb(26, 176, 255)"}).then(async()=>{await this.joinIsland()}).catch(()=>{this.$emit("closeCreatedCard")})},urlToBase64(e){return new Promise((t,a)=>{var i=new Image;i.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(i,0,0);var a=e.toDataURL("image/png");t(a)},i.setAttribute("crossOrigin","Anonymous"),i.src=e,i.onerror=e=>{a(new Error("图片流异常"))}})},async isJoinedIsland(){const e=await T["a"].detail(300003);return!0===e.data.joined},showLoading(){o["a"].loading({message:"请稍等",forbidClick:!0,duration:0})},hideToast(){o["a"].clear()}},setup(e){const{cardData:t}=Object(v["toRefs"])(e),a=Object(v["ref"])(""),i=Object(v["computed"])(()=>{var e;return null===(e=j["a"].state.user.me)||void 0===e?void 0:e.avatar});return{image:a,renderData:t,isDev:F,avatar:i}}});var A=U,$=A,L=(a("2404"),Object(_["a"])($,P,D,!1,null,"812d0814",null)),M=L.exports,V=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"choose-panel-container"},[t("van-popup",e._g({style:{height:"90%"},attrs:{round:"",position:"bottom","close-on-click-overlay":!1,closeable:""},model:{value:e.showPanel,callback:function(t){e.showPanel=t},expression:"showPanel"}},e.$listeners),["mainThrust"==e.type||"auxiliaryPush"==e.type||"groupPush"==e.type?t("push-selector",e._g({attrs:{type:e.type,"show-panel":e.showPanel,cardData:e.cardData}},e.$listeners)):"cp"===e.type||"cb"===e.type?t("ke-selector",e._g({attrs:{type:e.type,"show-panel":e.showPanel,cardData:e.cardData}},e.$listeners)):t("love-handle-selector",e._g({attrs:{type:e.type,"show-panel":e.showPanel,cardData:e.cardData}},e.$listeners))],1)],1)},H=[],z=(a("8a58"),a("e41f")),E=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"handler-selector-container"},[t("div",{staticClass:"handler-selector-title"},[e._v(" 选择"+e._s("beforeFlowering"==e.type?"花前":"花后")+"情柄 ")]),t("van-search",{staticClass:"handler-selector-search-box",attrs:{placeholder:"搜索 柄图名称",clearable:"","left-icon":"https://cdn.qiandaoapp.com/interior/images/beb80e7dee6a9c5559fe23743afb2ea1.png"},on:{clear:function(t){e.searchValue=""}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),t("div",{staticClass:"filter-group"},[t("div",{class:["filter",{active:"{}"!==JSON.stringify(this.selectedAvatar)}],on:{click:function(t){return e.handleFilterClick("avatar")}}},["{}"===JSON.stringify(this.selectedAvatar)?[e._v(" 角色 ")]:[e._v(e._s(e.selectedAvatar.name))],t("span",{class:["arrow",{active:"avatar"===this.activedFilter&&this.isOpenModal}]},[e._v(" ▼ ")])],2),t("span",{staticClass:"reset-button",on:{click:e.reset}},[e._v("重置")])]),t("transition",{attrs:{name:"popup"}},[e.isOpenModal?t("div",{staticClass:"option-group"},[t("div",{staticClass:"option-list"},["avatar"===this.activedFilter?e._l(e.avatar,(function(a,i){return t("div",{key:i,staticClass:"team"},[t("div",{staticClass:"team-cover"},[a.coverUrl?t("img",{staticClass:"team-cover-img",attrs:{src:a.coverUrl,alt:"cover"}}):e._e(),t("span",{staticClass:"team-name"},[e._v(e._s(a.teamName))])]),e._l(a.avatars,(function(a,i){return t("div",{key:i,staticClass:"option",on:{click:function(t){return e.handleOptionClick("avatar",a)}}},[e._v(" "+e._s(a.name)+" ")])}))],2)})):e._e()],2)]):e._e()]),t("div",{staticClass:"handler-selector-area"},[t("refresh-when-touch-bottom",{on:{"on-bottom":e.onTouchBottom}},[t("div",{staticClass:"handler-selector-body"},e._l(e.allHandles,(function(a){return t("div",{key:a.id,staticClass:"handler-selector-card",on:{click:function(t){return e.handleSelect(a)}}},[t("div",{staticClass:"handler-selector-card-cover"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.cover,expression:"item.cover"}],attrs:{alt:"",width:"100%",height:"100%"}})]),t("div",{staticClass:"handler-selector-card-title"},[e._v(" "+e._s(a.name)+" ")])])})),0)])],1)],1)},J=[],W=(a("5852"),a("d961"));const G=function(e,t=300){return function a(...i){clearTimeout(a.timer),a.timer=setTimeout(()=>{clearTimeout(a.timer),a.timer=null,e(...i)},t)}};var K=G,Y=function(){var e=this,t=e._self._c;return t("div",{ref:"listWrapRef",staticClass:"list-warp-template",on:{touchstart:e.handlerStart,touchend:e.handlerEnd,touchmove:e.handlerMove,scroll:e.handlerScroll}},[t("div",{staticClass:"main-list"},[e._t("default")],2)])},X=[],Q={name:"RefreshWhenTouchBottom",props:{refreshLoading:{type:Boolean,default:!1}},data(){return{position:0,startInit:0,bottomLoading:!1,refresh:{height:0},timer:null}},created(){},watch:{refreshLoading(e){e||(this.refresh.height=0)}},computed:{},mounted(){},methods:{handlerScroll(e){const t=e.target,a=e.target.scrollTop,i=t.scrollHeight-e.target.offsetHeight,s=this.timer;s&&clearTimeout(s),this.timer=setTimeout(()=>{this.bottomLoading=!0,i<=a&&this.$emit("on-bottom")},200),this.position=a,this.$emit("on-scroll",i)},handlerBackTop(){const e=this.$refs.listWrapRef;e.scrollTop=0},handlerStart(e){this.startInit=parseInt(e.touches[0].clientY)},handlerMove(e){if(0===this.position&&!this.refreshLoading){const t=parseInt(e.touches[0].clientY),a=t-this.startInit;this.refresh.height=a}},handlerEnd(){this.refresh.height>=30?(this.refresh.height=40,this.$emit("on-refresh"),this.$emit("update:refreshLoading",!0)):this.refresh.height=0,this.startInit=0}}},Z=Q,ee=(a("df5a"),Object(_["a"])(Z,Y,X,!1,null,null,null)),te=ee.exports;const ae=[{coverUrl:"https://cdn.qiandaoapp.com/interior/images/2d1b77532c3a2253704f9081572473ee.PNG",teamName:"fine",avatars:[{id:"4873",name:"天祥院英智"},{id:"4885",name:"日日树涉"},{id:"1003145",name:"姬宫桃李"},{id:"1003147",name:"伏见弓弦"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/85c790990a3bb46a86be1327e62c8f71.PNG",teamName:"流星队",avatars:[{id:"3970",name:"守泽千秋"},{id:"4044",name:"深海奏汰"},{id:"3972",name:"高峯翠"},{id:"5216",name:"南云铁虎"},{id:"5214",name:"仙石忍"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/f782475b8630441099549caa67f7facd.PNG",teamName:"Trickstar",avatars:[{id:"1003131",name:"冰鹰北斗"},{id:"3383",name:"明星昴流"},{id:"3966",name:"游木真"},{id:"3969",name:"衣更真绪"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/2e881855ae11d80c57d95ef5a5db3a91.PNG",teamName:"Alkaloid",avatars:[{id:"1003178",name:"天城一彩"},{id:"1003177",name:"白鸟蓝良"},{id:"1003179",name:"礼濑真宵"},{id:"1003180",name:"风早巽"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/41b89d26b248593b7cf1d5cf91d8c613.PNG",teamName:"Eden",avatars:[{id:"1003139",name:"乱凪砂"},{id:"1003140",name:"七种茨"},{id:"1003144",name:"巴日和"},{id:"1003141",name:"涟纯"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/81b6666d4b54b4a843319cb7a2b71ce5.png",teamName:"Valkyrie",avatars:[{id:"5213",name:"斋宫宗"},{id:"4824",name:"影片美伽"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/10bf54745745e146ffcfd584addf1018.png",teamName:"2wink",avatars:[{id:"4870",name:"葵日向"},{id:"4869",name:"葵裕太"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/7b197a74b381355a26f0b8a275265750.png",teamName:"Crazy: B",avatars:[{id:"1003183",name:"天城燐音"},{id:"1003181",name:"椎名丹希"},{id:"1003182",name:"HiMERU"},{id:"1003184",name:"樱河琥珀"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/119c2a63f7375e16952df237a5c0efcb.png",teamName:"UNDEAD",avatars:[{id:"4871",name:"朔间零"},{id:"4072",name:"羽风薰"},{id:"3971",name:"大神晃牙"},{id:"4876",name:"乙狩阿多尼斯"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/44c181a2b3610e2fc7db0c9a2683d8a3.png",teamName:"Ra*bits",avatars:[{id:"5039",name:"真白友也"},{id:"5038",name:"仁兔成鸣"},{id:"5040",name:"天满光"},{id:"4875",name:"紫之创"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/4ab180034e8abd75635dd7680835ff23.png",teamName:"红月",avatars:[{id:"1003148",name:"莲巳敬人"},{id:"1003150",name:"鬼龙红郎"},{id:"1003149",name:"神崎飒马"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/8e31dfdf3c107b7d04bab888a3887e50.png",teamName:"Knights",avatars:[{id:"3967",name:"朱樱司"},{id:"5317",name:"月永雷欧"},{id:"4874",name:"朔间凛月"},{id:"3659",name:"濑名泉"},{id:"3965",name:"鸣上岚"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/658355c11660f3365f8027fc9ad6988d.png",teamName:"Swtich",avatars:[{id:"1003133",name:"逆先夏目"},{id:"1003136",name:"青叶纺"},{id:"1003135",name:"春川宙"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/a5dfbe974a5c436c6be853792eb531a3.png",teamName:"MaM",avatars:[{id:"1003138",name:"三毛缟斑"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/aaafd7cede95a107bc6f7643667d6c3e.png",teamName:"Double Face",avatars:[{id:"1003138",name:"三毛缟斑"},{id:"1003184",name:"樱河琥珀"}]},{coverUrl:"",teamName:"老师",avatars:[{id:"1003337",name:"门章臣"},{id:"1003338",name:"佐贺美阵"}]}];var ie=a("ccbb");function se(){const e=document.querySelector("input");e.focus()}const re=Object(v["defineComponent"])({name:"LoveHandleSelector",components:{RefreshWhenTouchBottom:te,VanSearch:W["a"]},props:{cardData:{type:Object},type:{type:String},showPanel:{type:Boolean}},mounted(){this.searchRef=this.$refs.searchRef},methods:{},setup(e,{emit:t}){const{cardData:a,type:i,showPanel:s}=Object(v["toRefs"])(e),r=Object(v["ref"])([]),n=Object(v["ref"])(),c=Object(v["reactive"])({limit:16,offset:0}),l=Object(v["ref"])(0),d=Object(v["ref"])(!0),p=Object(v["ref"])({}),u=Object(v["ref"])(!1),m=Object(v["ref"])("");Object(v["watch"])(c,()=>{b()},{deep:!0}),Object(v["watch"])(p,e=>{"{}"===JSON.stringify(e)&&!1===s.value||(c.offset=0,r.value=[],b())},{deep:!0}),Object(v["watch"])(i,()=>{"beforeFlowering"!==i.value&&"afterFlowering"!==i.value||(l.value="beforeFlowering"===i.value?0:1,c.offset=0,n.value=void 0,r.value=[],b().then(()=>{d.value&&(d.value=!1,se())}))},{immediate:!0}),Object(v["watch"])(n,()=>{g()}),Object(v["watch"])(s,e=>{console.log(e),e&&(r.value=[],b().then(()=>{se()})),p.value={}});const g=K(()=>{p.value={},c.offset=0,r.value=[],b()},500),h=function(e){2!==a.value[i.value].length||e.selected?t("select",{data:e}):Object(o["a"])("已添加到数量上限")},f=function(){t("close")};function b(){if(o["a"].loading({message:"加载中",forbidClick:!0,duration:0}),"{}"===JSON.stringify(p.value))return s.value?N(c.offset,c.limit,n.value,l.value).then(async e=>{const{list:t=[]}=e.data;for(let i=0;i<t.length;i++)t[i].cover+="!image_resize_3_4";const a=[...r.value,...t];r.value=a,o["a"].clear()}).catch(()=>{}).finally(()=>{o["a"].clear()}):Promise.resolve();k(p.value)}const C=function(){c.offset+=c.limit},y=function(e){2===a.value[i.value].length?Object(o["a"])("已添加到数量上限"):(t("select",{data:e}),t("close"))};function w(){p.value={},r.value=[]}function _(e,t){p.value=t,u.value=!1}function x(e){u.value&&m.value===e?u.value=!1:(u.value=!0,m.value=e)}function k(e){let t=["1398630"];const{name:a,id:s}=e;"undefined"!==typeof s&&(t=["1398630","139864"+("beforeFlowering"===i.value?4:5),s]);const n={andTagIds:t,limit:c.limit,offset:c.offset,orderBy:"hotV2",propertyIds:["53290"]};ie["a"].getSpuList(n).then(e=>{const{list:t=[]}=e.data;for(let i=0;i<t.length;i++)t[i].cover+="!lfit_w240_png";const a=[...r.value,...t];r.value=a}).finally(()=>{o["a"].clear()})}return{handleClose:f,handleClick:h,allHandles:r,searchValue:n,onSearch:g,onTouchBottom:C,handleSelect:y,avatar:ae,pageInfo:c,getHandlers:b,selectedAvatar:p,isOpenModal:u,activedFilter:m,handleFilterClick:x,handleOptionClick:_,pullWhenSelectedItem:k,reset:w}}});var ne=re,ce=ne,oe=(a("d686"),Object(_["a"])(ce,E,J,!1,null,"43ddca86",null)),le=oe.exports,de=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"push-selector-container"},["mainThrust"==e.type?t("div",{staticClass:"push-selector-title"},[e._v(" 添加主推 "),t("span",{staticClass:"push-selector-title-tip"},[e._v("（最多可添加 5 个）")])]):"auxiliaryPush"==e.type?t("div",{staticClass:"push-selector-title"},[e._v(" 添加副推 "),t("span",{staticClass:"push-selector-title-tip"},[e._v("（最多可添加 5 个）")])]):t("div",{staticClass:"push-selector-title"},[e._v(" 添加团推 "),t("span",{staticClass:"push-selector-title-tip"},[e._v("（最多可添加 5 个）")])]),t("div",{staticClass:"push-selector-body"},e._l(e.allRoles,(function(a,i){return t("div",{key:a.id,staticClass:"push-selector-item",style:{marginRight:i==e.allRoles.length-1&&e.allRoles.length%4?"auto":null}},[t("div",{staticClass:"push-selector-item-badge",on:{click:function(t){return e.handleClick(a)}}},[t("div",{staticClass:"push-selector-item-logo"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.logo,expression:"item.images.logo"}],attrs:{alt:"",width:"100%",height:"100%"}})]),t("img",{staticClass:"badge-icon",attrs:{src:a.selected?"https://cdn.qiandaoapp.com/interior/images/7266ba9cc1511277a96214a7e2be1b01.png":"https://cdn.qiandaoapp.com/interior/images/5d6d0e3e41a8d11cd511ec7b3043b00f.png",alt:"",height:"16.67px",width:"16.67px"}}),t("div",{staticClass:"push-selector-item-bottom-title"},[e._v(e._s(a.name))])])])})),0),t("div",{staticClass:"card-button-container"},[t("van-button",{staticClass:"card-button",attrs:{type:"primary",color:"#2B263B",block:""},on:{click:e.handleClose}},[e._v(" 完成 ")])],1)])},pe=[];const ue=[{id:"1445825",name:"Ra*bits",images:{logo:"https://cdn.qiandaoapp.com/interior/images/d7ca26c92a9a77c6cf57355563ebf04e.png!lfit_w240_png"}},{id:"1445829",name:"MaM",images:{logo:"https://cdn.qiandaoapp.com/interior/images/265bf20a3b9cdd13ba6b490419b385ae.png!lfit_w240_png"}},{id:"1445821",name:"Valkyrie",images:{logo:"https://cdn.qiandaoapp.com/interior/images/51907cb886fcea7193784392d3613d28.png!lfit_w240_png"}},{id:"1445819",name:"ALKALOID",images:{logo:"https://cdn.qiandaoapp.com/interior/images/96b02512e33ea31f2fadac4d56d165ed.png!lfit_w240_png"}},{id:"1445828",name:"Switch",images:{logo:"https://cdn.qiandaoapp.com/interior/images/9d0077ae13ad9c5f3470f94c9025a0a6.png!lfit_w240_png"}},{id:"1445830",name:"Double Face",images:{logo:"https://cdn.qiandaoapp.com/interior/images/d27f416f25180ed981c24dc81796aec6.png!lfit_w240_png"}},{id:"1445816",name:"fine",images:{logo:"https://cdn.qiandaoapp.com/interior/images/578d61d6a41fe93beec058f2202d5839.png!lfit_w240_png"}},{id:"1445822",name:"2wink",images:{logo:"https://cdn.qiandaoapp.com/interior/images/47bad1b3f5ab71093f7f0b365775a7c9.png!lfit_w240_png"}},{id:"1445826",name:"红月",images:{logo:"https://cdn.qiandaoapp.com/interior/images/66e48dc6f6b70212d92875b643266bc4.png!lfit_w240_png"}},{id:"1445823",name:"Crazy:B",images:{logo:"https://cdn.qiandaoapp.com/interior/images/c09dc3ccd68141ad1098c66f45b87235.png!lfit_w240_png"}},{id:"1445824",name:"UNDEAD",images:{logo:"https://cdn.qiandaoapp.com/interior/images/07a5464f16c171cda46bf4344ad7b981.png!lfit_w240_png"}},{id:"1445818",name:"Trickstar",images:{logo:"https://cdn.qiandaoapp.com/interior/images/5c09663e53ee040e6977e7621f6ef1f5.png!lfit_w240_png"}},{id:"1445820",name:"Eden",images:{logo:"https://cdn.qiandaoapp.com/interior/images/2754391127acb89906d18e8ca980409b.png!lfit_w240_png"}},{id:"1445827",name:"Knights",images:{logo:"https://cdn.qiandaoapp.com/interior/images/728fea6baa9aba39882c8bc7b0981272.png!lfit_w240_png"}},{id:"1445817",name:"流星队",images:{logo:"https://cdn.qiandaoapp.com/interior/images/0632724773e3a3d2246171677658c498.png!lfit_w240_png"}}];function me(e,t){t=t.map(e=>({...e,selected:!1}));for(let a=0;a<t.length;a++)for(let i=0;i<e.length;i++)e[i].id===t[a].id&&(t[a].selected=!0);return[...t]}const ge=Object(v["defineComponent"])({name:"PushSelector",components:{VanButton:l["a"]},props:{cardData:{type:Object},type:{type:String},showPanel:{type:Boolean}},setup(e,{emit:t}){const{cardData:a,type:i,showPanel:s}=Object(v["toRefs"])(e),r=Object(v["ref"])([]),n=Object(v["ref"])([]);function c(){s.value&&(o["a"].loading({message:"加载中",forbidClick:!0,duration:0}),B().then(async e=>{const t=e.rows;for(let a=0;a<t.length;a++)t[a].images.logo+="!fill_w360_h360_jpg";n.value=t}).catch(()=>{}).finally(()=>o["a"].clear()))}Object(v["onMounted"])(()=>{c()}),Object(v["watch"])(s,e=>{e&&c()}),Object(v["watch"])([a,i,n],()=>{let e;"mainThrust"===i.value||"auxiliaryPush"===i.value?e=n.value:"groupPush"===i.value&&(e=ue),r.value=me(a.value[i.value],e)},{deep:!0});const l=function(e){5!==a.value[i.value].length||e.selected?t("select",{data:e}):Object(o["a"])("已添加到数量上限")},d=function(){t("close")};return{allRoles:r,handleClick:l,handleClose:d}}});var he=ge,ve=he,fe=(a("e224"),Object(_["a"])(ve,de,pe,!1,null,"4031f00c",null)),be=fe.exports,Ce=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ke-selector-container"},[t("div",{staticClass:"ke-selector-title"},[e._v(" 添加"+e._s("cp"==e.type?"CP":"CB")+" "),t("span",{staticClass:"ke-selector-title-tip"},[e._v("（同时选择 2 个）")])]),t("div",{staticClass:"ke-selector-body"},e._l(e.allRoles,(function(a,i){return t("div",{key:a.id,staticClass:"ke-selector-item",style:{marginRight:i==e.allRoles.length-1&&e.allRoles.length%4?"auto":null},on:{click:function(t){return e.addItem(a)}}},[t("div",{staticClass:"ke-selector-item-badge"},[t("div",{staticClass:"ke-selector-item-logo"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.images.logo,expression:"item.images.logo"}],attrs:{alt:"",width:"100%",height:"100%"}})]),t("img",{staticClass:"badge-icon",attrs:{src:a.selected?"https://cdn.qiandaoapp.com/interior/images/f1502192fe04308ba86f58f59071b038.png":"https://cdn.qiandaoapp.com/interior/images/d7d9b27a58b15785cf05e76e15b562c4.png",alt:"",height:"16.67px",width:"16.67px"}}),t("div",{staticClass:"ke-selector-item-bottom-title"},[e._v(e._s(a.name))])])])})),0),t("div",{staticClass:"card-button-container"},[t("van-button",{staticClass:"card-button card-button--cancel",attrs:{type:"primary",plain:"",color:"#2B263B",block:""},on:{click:e.handleClose}},[e._v(" 取消 ")]),t("van-button",{staticClass:"card-button",staticStyle:{"margin-left":"5px"},attrs:{type:"primary",color:"#2B263B",block:"",disabled:2!==e.currentSelected.length},on:{click:e.handleConfirm}},[e._v(" 确定 ")])],1)])},ye=[];function we(e,t){t=t.map(e=>({...e,selected:!1}));for(let a=0;a<t.length;a++)for(let i=0;i<e.length;i++)e[i].id===t[a].id&&(t[a].selected=!0);return[...t]}const _e=Object(v["defineComponent"])({name:"KeSelector",components:{VanButton:l["a"]},props:{cardData:{type:Object},type:{type:String},showPanel:{type:Boolean}},setup:function(e,{emit:t}){const{type:a,cardData:i,showPanel:s}=Object(v["toRefs"])(e),r=Object(v["ref"])([]),n=Object(v["ref"])([]);function c(){s.value&&(o["a"].loading({message:"加载中",duration:0,forbidClick:!0}),B().then(async e=>{const t=e.rows;console.log(e);for(let a=0;a<t.length;a++)t[a].images.logo+="!fill_w360_h360_jpg";r.value=t}).catch(()=>{}).finally(()=>o["a"].clear()))}Object(v["onMounted"])(()=>{c()}),Object(v["watch"])(s,e=>{e&&c()}),Object(v["watch"])(a,()=>{n.value=[]}),Object(v["watch"])(n,()=>{r.value=we(n.value,r.value)},{deep:!0});const l=function(e){d(e)?n.value=n.value.filter(t=>t.id!==e.id):n.value.length<2?n.value.push(e):Object(o["a"])("最多只能选择两个")};function d(e){return n.value.some(t=>t.id===e.id)}const p=function(){n.value=[],t("close")},u=function(){t("select",{data:{value:n.value,id:(new Date).getTime()}}),t("close"),n.value=[]};return{allRoles:r,addItem:l,handleClose:p,type:a,handleConfirm:u,currentSelected:n}}});var xe=_e,ke=xe,Pe=(a("0f2c"),Object(_["a"])(ke,Ce,ye,!1,null,"77da6868",null)),De=Pe.exports;const je=Object(v["defineComponent"])({name:"ChoosePanel",props:{type:{type:String},showPanel:{type:Boolean,default:!1},groupPushRoles:{type:Array},loveHandleData:{type:Array},mainOrAuxiliaryPushRoles:{type:Array},cardData:{type:Object}},components:{LoveHandleSelector:le,KeSelector:De,PushSelector:be,VanPopup:z["a"]},setup(e,{emit:t}){const{cardData:a,showPanel:i,type:s}=Object(v["toRefs"])(e);return{type:s,cardData:a,showPanel:i}}});var Oe=je,Se=Oe,Te=Object(_["a"])(Se,V,H,!1,null,"164759e0",null),qe=Te.exports;const Ie=[{text:"男",value:"男"},{text:"女",value:"女"},{text:"保密",value:"保密"}],Be=!1,Ne=Object(v["defineComponent"])({name:"ProducerCard",components:{Card:k,vanOverlay:h["a"],VanIcon:g["a"],ChoosePanel:qe,vanField:m["a"],DropdownMenu:u["a"],DropdownItem:p["a"],Cell:d["a"],FinalCard:M,vanButton:l["a"],Toast:o["a"],VanBadge:c["a"],VanActionSheet:n["a"]},mounted(){this.avatar||r["a"].alert({title:"请登录",message:"你还没有登录，请先登录",showCancelButton:!0}).then(()=>{const e="/modules/pages/common-login/index?redirect="+encodeURIComponent(`/modules/pages/web-view/index?url=https://${Be?"dev-":""}m.qiandaoapp.com/plugin/es-producer-card&ut=true`);Object(O["h"])()||Object(O["d"])()?this.navigateTo({url:e}):Object(o["a"])("请在小程序上打开本页面")}).catch(()=>{})},setup(){const e=Object(v["reactive"])({nickName:"",sex:"",age:"",mainThrust:[],auxiliaryPush:[],groupPush:[],cp:[],cb:[],beforeFlowering:[],afterFlowering:[],decline:"",minePoint:"",other:""}),t=[{name:"男"},{name:"女"},{name:"保密"}],a=Object(v["computed"])(()=>{var e;return null===(e=j["a"].state.user.me)||void 0===e?void 0:e.avatar}),i=Object(v["ref"])(!1),s=Object(v["ref"])(!1),r=Object(v["ref"])(!1),n=Object(v["ref"])("mainThrust"),c=Object(v["ref"])([]),o=Object(v["ref"])([]),l=Object(v["ref"])([]),d=function(){s.value=!1},p=function(){s.value=!0},u=function(e){const{type:t}=e.target.dataset;r.value=!0,n.value=t},m=function(){r.value=!1},g=function(t){const a=t.data;if(h(e[n.value],a)&&"cp"!==n.value&&"cb"!==n.value&&"beforeFlowering"!==n.value&&"afterFlowering"!==n.value)e[n.value]=e[n.value].filter(e=>e.id!==a.id);else if(e[n.value].push(a),"cp"===n.value||"cb"===n.value){const e=document.querySelector(`.ke-${n.value} .my-ke-row`);Promise.resolve().then(()=>{e.scrollLeft=500})}};function h(e,t){return e.filter(e=>e.id===t.id).length>0}const f=function(t,a){n.value=t,e[n.value]=e[n.value].filter(e=>e.id!==a.id)},b=function(t){e.sex=t.name};return{cardData:e,sexOptions:Ie,showCard:s,closeCreatedCard:d,openCreatedCard:p,openChoosePanel:u,closeChoosePanel:m,popupType:n,showPanel:r,mainOrAuxiliaryPushRoles:c,groupPushRoles:o,loveHandleData:l,handleSelect:g,removeItem:f,avatar:a,actions:t,showSexAction:i,handleActionSelect:b}}});var Re=Ne,Fe=Re,Ue=(a("69c5"),Object(_["a"])(Fe,i,s,!1,null,"10f33f32",null));t["default"]=Ue.exports},"0f2c":function(e,t,a){"use strict";a("f95d")},2404:function(e,t,a){"use strict";a("2d6f")},"2d6f":function(e,t,a){},"37eb":function(e,t,a){},"582b":function(e,t,a){"use strict";a("b09d")},"684b":function(e,t,a){"use strict";var i=a("0ef7");t["a"]={getPostAnalysis(e){return i["d"].get("/analysis/"+e)},createPostReviewV3(e){return i["h"].post("/gactus/post-review-v3",e)},updatePostReviewV3(e){return i["h"].put("/gactus/post-review-v3",e)},deleteSpuMark(e){return i["h"].post("/gactus/delete-spu-mark",e)},createPostArticle(e){return i["h"].post("/gactus/posts-article",e)},getPostListByTopic(e){return i["h"].post("/gactus/topics/posts-v3",e)},getPostListByTag(e){return i["h"].post("/gactus/posts/by-tag-v4",e)},mark(e){return i["h"].post("/gactus-web/v1/mark/edit",e)},createPost(e){return i["h"].post("/gactus-web/post/create",e)},createPostStandard(e){return i["h"].post("/gactus-web/post/standard/create",e)},updatePostStandard(e){return i["h"].post("/gactus-web/post/standard/update",e)},comment(e){return i["h"].post("/cactus-api/comments",e)},getUserHobbyMark(e){return i["h"].post("/gactus/user-hobby-mark",e)},getUserMark(e){return i["h"].post("/gactus-web/v1/get-user-marks",e)},getUserHobbyList(e){return i["h"].get("/gactus-web/v1/interest/list",{uid:e})},gstoneGames(e){return i["h"].post("/config-go/redirect/gstoneGames",e)}}},"69c5":function(e,t,a){"use strict";a("8efe")},"7cb2":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return o}));var i=a("0ef7"),s=a("0d94"),r=a("a37c");async function n(e,t="interior-admin.image"){const a=Object(s["e"])({isProd:r["e"],async customApiCall(e){var t;const a=await i["h"].post("/uploader/gene-post-object-sign",e);return null===(t=a.data)||void 0===t?void 0:t[0]}});return a({file:e,scene:t})}function c(e){return i["h"].get("/uploader/file-space/get",e)}function o(e,t="interior-admin.image"){const a=Object(s["e"])({isProd:r["e"],async customApiCall(e){var t;const a=await i["h"].post("/uploader/anonymous/gene-post-object-sign",e);return null===(t=a.data)||void 0===t?void 0:t[0]}});return a({file:e,scene:t})}},"8efe":function(e,t,a){},b09d:function(e,t,a){},cb35:function(e,t,a){"use strict";var i=a("0ef7");t["a"]={detail(e){return i["h"].get("/treasure/island/detail?id="+e)},join(e){return i["h"].post("/treasure/island/join",{id:e})}}},ccbb:function(e,t,a){"use strict";var i=a("0ef7");t["a"]={getStandardProducts(e){return i["p"].get(`/spus/${e}/standard-products`)},getSPUs(e){return i["p"].get("/v2/spus",e)},getSingleSpu(e,t){return i["p"].get("/v2/spus/"+e,t)},getUserPosters(e){return i["h"].post("/c2c-web/v1/poster/get-user-posters",e)},doProductsOffSale(e){return i["h"].post("/c2c-web/v1/c2c/products/off-sale",e)},plastSearchCategory(e){return i["h"].get("/plast/search/category/v3",e)},createUserPoster(e){return i["h"].post("/c2c-web/v1/poster/create-user-poster",e)},getSPUSpecs(e){return i["p"].get(`/spus/${e}/specs`)},updateC2cProductsByCategory(e){return i["h"].post("/c2c/products/m-update",e)},updateProductMulti(e){return i["h"].post("/c2c/products/multi-create",e)},createProductMulti(e){return i["h"].post("/c2c/products/m-create-update",e)},getProductsByCategory(e){return i["h"].get("/c2c/products/by-category",e)},getCategoryDetail(e,t){return i["p"].get("/v2/categories/"+e,t)},getCategories(e){return i["p"].get("/v2/categories",e)},getRecommendCategories(e){return i["p"].get(`/v2/categories/${e}/recommend`)},getCategoryTags(e){return i["p"].get(`/v2/categories/${e}/config`)},getTag(e,t){return i["p"].get("/tags/"+e,t)},getHotTags(e){return i["p"].get(`/tags/${e}/config`)},getTags(e){return i["p"].get("/tags",e)},searchCategories(e){return i["p"].get("/v2/categories",e)},getSettings(){return i["p"].get("/settings")},changeWishes(e){return i["p"].post("/wish-list",e)},updateUserSettings(e){return i["p"].put("/settings",e)},getPosterColumnConfig(e){return i["l"].get("/action/get-products-poster",e)},getPosterThemes(e){return i["l"].get("/action/get-poster-themes",e,{isErrorDefaultTip:!1})},getWishList(e){return i["p"].get("/wish-list",e,{isErrorDefaultTip:!1})},getWishMatches(e){return i["p"].get("/products/match/wish-list",e,{isErrorDefaultTip:!1})},getDemandProductList(e){return i["p"].get("/products/match/demand-list",e)},getTradeInfo(e){return i["p"].post("/action/get-trade-info",e)},get360DegImages(e){return i["p"].get(`/spus/${e}/360-degree-images`)},getBarginSpus(e){return i["p"].post("/stock-order/bargin",e)},getSpecsByMPName(e){return i["p"].get("/specs/aciton/get-by-app-name",e)},getDistribution(e){return i["p"].get("/feeds/chaowan",e)},getSellingCategories(e){return i["p"].get("/products/action/get-selling-categories",e)},getCategoryCount(e){return i["p"].get("/products/action/get-category-product-count",e)},getSpuList(e){return i["h"].post("/treasure/spus/search/simple-info",e)},getSpuHeader(e){return i["h"].get("/treasure/flora/v2/spu/simpleInfo",e)},getSpuDetails(e){return i["h"].get("/treasure/flora/v1/spu/detailInfo",e)},getTagList(e){return i["h"].get("/treasure/tags",e)},getTagDetails(e){return i["h"].get("/treasure/flora/v1/tag/detailInfo",e)},getTagDetailsV2(e){return i["h"].get("/treasure/flora/v2/tag/simpleInfo",e)},searchSpuInTag(e){return i["h"].get("/plast/search/spu",e)},searchTag(e){return i["h"].get("/plast/search/tag",e)},getXiaokaWebConfig(){return i["e"].get("/vinyl/web.json")},getTagsV2(e){return i["h"].get("/armory/entry/tags",e)}}},d686:function(e,t,a){"use strict";a("0c10")},df5a:function(e,t,a){"use strict";a("37eb")},e0392:function(e,t,a){},e224:function(e,t,a){"use strict";a("e0392")},f95d:function(e,t,a){}}]);