(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecd08f40"],{"3cb2":function(t,e,s){},"7cb2":function(t,e,s){"use strict";s.d(e,"b",(function(){return c})),s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return n}));var i=s("0ef7"),a=s("0d94"),r=s("a37c");async function c(t,e="interior-admin.image"){const s=Object(a["e"])({isProd:r["e"],async customApiCall(t){var e;const s=await i["h"].post("/uploader/gene-post-object-sign",t);return null===(e=s.data)||void 0===e?void 0:e[0]}});return s({file:t,scene:e})}function o(t){return i["h"].get("/uploader/file-space/get",t)}function n(t,e="interior-admin.image"){const s=Object(a["e"])({isProd:r["e"],async customApiCall(t){var e;const s=await i["h"].post("/uploader/anonymous/gene-post-object-sign",t);return null===(e=s.data)||void 0===e?void 0:e[0]}});return s({file:t,scene:e})}},"834b":function(t,e,s){"use strict";s("3cb2")},"983f":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"price-ocr"},[e("div",{staticClass:"header"},t._l(["截图并上传","预览结果","生成图片"],(function(s,i){return e("div",{key:i,class:["step",{active:i===t.part-1}]},[e("div",{staticClass:"circle"},[t._v(t._s(i+1))]),t._v(" "+t._s(s)+" ")])})),0),1===this.part?e("div",{staticClass:"screenshot-list"},[e("img",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/c65659b453816071ea7080eb1471bfae.jpg",alt:"intro"}}),t._v(" 在“泡泡玛特抽盒机”微信小程序，打开“我的盒柜”带有价格信息和商品名的页面，截图并上传 "),e("div",{staticClass:"image-list"},[t._l(this.imageList,(function(s,i){return e("div",{key:i,staticClass:"screenshot"},[e("img",{staticClass:"screenshot-img",attrs:{src:s,alt:"screenshot"}}),e("div",{staticClass:"delete-btn",on:{click:function(e){return t.deleteImage(i)}}},[t._v("×")])])})),t._m(0),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"upload",accept:"image/png, image/jpeg",multiple:"multiplt"},on:{change:t.getFile}})],2),t.loading?e("div",{staticClass:"loader"},[t._v("图片上传中…")]):t._e(),e("div",{class:["fixed-btn",{disable:0===this.imageList.length||this.loading}],on:{click:t.ocr}},[t._v(" 下一步 ")])]):t._e(),2===this.part?e("div",{staticClass:"ocr-result-list"},[e("div",{staticClass:"notice"},[t._v(" 市场价为“千岛App”的闪购价/闲置价，如识别不准确或识别失败，你可以手动进行修改 ")]),t.loading?e("div",{staticClass:"loader"},[t._v(" 智能识别中…（"+t._s(this.ocrSuccessCount)+"/"+t._s(this.imageList.length)+"） ")]):t._e(),t.loading?t._e():e("div",{staticClass:"text-btn",on:{click:function(e){t.part=1}}},[t._v(" ← 重新上传图片 ")]),this.ocrResultList.length>0?e("div",{staticClass:"sku-list"},[t._m(1),t._l(this.ocrResultList,(function(s,i){return e("div",{key:i,staticClass:"sku"},[e("div",{staticClass:"delete-btn",on:{click:function(e){return t.deleteSku(i)}}},[e("img",{staticClass:"delete-btn-img",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/dc293fba0d2bb97383dd834fb5226cbb.png",alt:"delete"}})]),e("div",{staticClass:"sku-name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.name,expression:"item.name"}],attrs:{placeholder:"款式"},domProps:{value:s.name},on:{input:function(e){e.target.composing||t.$set(s,"name",e.target.value)}}})]),e("div",{staticClass:"sku-price"},[t._v(" ￥ "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.originalPrice,expression:"item.originalPrice"}],domProps:{value:s.originalPrice},on:{input:function(e){e.target.composing||t.$set(s,"originalPrice",e.target.value)}}})]),e("div",{staticClass:"sku-price"},[t._v(" ￥ "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.platformPrice,expression:"item.platformPrice"}],domProps:{value:s.platformPrice},on:{input:function(e){e.target.composing||t.$set(s,"platformPrice",e.target.value)}}})]),e("div",{staticClass:"sku-cover",on:{click:function(e){return t.handleSearchBtn(i)}}},[e("img",{staticClass:"sku-cover-img",attrs:{src:s.cover,alt:"cover"}})])])})),e("div",{staticClass:"btn",on:{click:t.addSku}},[t._v("+ 手动添加一行")])],2):t._e(),e("div",{class:["fixed-btn",{disable:this.loading}],on:{click:t.drawImage}},[t._v(" 下一步 ")])]):t._e(),e("transition",{attrs:{name:"fade"}},[t.isOpenModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"mask",on:{click:t.handleMaskClick}}),e("div",{staticClass:"spu-group"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"searchbox",attrs:{placeholder:"输入款式名称搜索",id:"searchbox"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),e("div",{staticClass:"spu-list"},[t._l(this.spuList,(function(s,i){return[s.stock_order_min_sell_price>0||s.min_price>0?e("div",{key:i,staticClass:"spu",on:{click:function(e){return t.handleSelectSpu(s.stock_order_min_sell_price,s.min_price,s.imgs.whiteBgPng,s.imgs.cover)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.imgs.whiteBgPng||s.imgs.cover,expression:"item.imgs.whiteBgPng || item.imgs.cover"}],staticClass:"spu-cover"}),e("div",{staticClass:"spu-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"spu-key-property"},[t._v(t._s(s.key_property))]),s.stock_order_min_sell_price>0?e("div",{staticClass:"spu-price"},[e("img",{staticClass:"icon",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/0c2b375cfcc7380cdaf22a3c747bee18.png"}}),t._v(" ¥"+t._s(s.stock_order_min_sell_price)+" ")]):s.min_price>0?e("div",{staticClass:"spu-price"},[t._v(" ¥"+t._s(s.min_price)+" ")]):t._e()]):t._e()]}))],2)])])]):t._e()]),3===this.part?e("div",{staticClass:"final",attrs:{id:"canvas"}},[t.image?[e("img",{staticClass:"draw",attrs:{src:t.image}})]:e("div",{staticClass:"paper"},[e("div",{staticClass:"content"},[t._m(2),e("div",{staticClass:"item-list"},[t._m(3),t._l(this.ocrResultList,(function(s,i){return e("div",{key:i,staticClass:"item"},[e("div",{staticClass:"item-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"item-originalPrice"},[t._v("￥"+t._s(s.originalPrice))]),e("div",{staticClass:"item-platformPrice"},[t._v("￥"+t._s(s.platformPrice))]),e("div",{class:["label",s.platformPrice/s.originalPrice>=1?"red":"green"]},[NaN!==Number(s.platformPrice)&&Number(s.platformPrice)>0&&NaN!==Number(s.originalPrice)&&Number(s.originalPrice)>0?[t._v(" "+t._s((100*(s.platformPrice/s.originalPrice-1)).toFixed(1)+"%")+" ")]:t._e()],2)])})),e("div",{staticClass:"item sum"},[e("div",{staticClass:"item-name"},[t._v("总和")]),e("div",{staticClass:"item-originalPrice"},[t._v(" ￥"+t._s(this.sum.originalPrice)+" ")]),e("div",{staticClass:"item-platformPrice"},[t._v(" ￥"+t._s(this.sum.platformPrice)+" ")]),e("div",{class:["label",this.sum.platformPrice/this.sum.originalPrice>=1?"red":"green"]},[t._v(" "+t._s((100*(this.sum.platformPrice/this.sum.originalPrice-1)).toFixed(1)+"%")+" ")])])],2),t._m(4)]),e("div",{staticClass:"paper-screenshot"},[e("img",{staticClass:"paper-screenshot-img",attrs:{src:t.imageList[0]}})])])],2):t._e(),3===this.part?e("div",{staticClass:"footer"},[t.image?[e("div",{staticClass:"tip"},[t._v("一一 长 按 上 方 图 片 保 存 一一")]),e("div",{staticClass:"btn",on:{click:t.backToPreview}},[t._v("重新计算")]),e("div",{staticClass:"ad-list"},[e("div",{staticClass:"ad-list-title"},[t._v("想回血？")]),e("div",{staticClass:"ad",on:{click:t.goToEchobox}},[e("img",{staticClass:"ad-img",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/8f44d4dac4ea6c5e1814dc5f1f4924e4.png"}}),e("div",{staticClass:"ad-name"},[t._v("一键寄售到千岛，无须沟通省心卖")])]),e("div",{staticClass:"ad",on:{click:t.goToPublish}},[e("img",{staticClass:"ad-img",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/f27abee589db033f56a1bff46e7dee95.png"}}),e("div",{staticClass:"ad-name"},[t._v("发布闲置，百万娃友成交快")])])])]:e("div",{staticClass:"loader"},[t._v("图片生成中…")])],2):t._e()],1)},a=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"upload-btn",attrs:{for:"upload"}},[t._v(" + "),e("br"),t._v(" 点击上传图片 ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"sku-list-title"},[e("div",{staticClass:"subtitle",staticStyle:{width:"155px","padding-left":"35px"}},[t._v(" 款式 ")]),e("div",{staticClass:"subtitle",staticStyle:{width:"80px"}},[t._v("抽盒价")]),e("div",{staticClass:"subtitle",staticStyle:{width:"100px"}},[t._v("市场价 (参考图)")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/e6fb66b2fe8f5ffbb640964e66768f85.png"}}),t._v(" 非酋计算器 ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item subtitle"},[e("div",{staticClass:"item-name"},[t._v("款式")]),e("div",{staticClass:"item-originalPrice"},[t._v("抽盒价")]),e("div",{staticClass:"item-platformPrice"},[t._v("“千岛”市场价")]),e("div",{staticClass:"label"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"qrcode"},[t._v(" 智能识别截图，一键计算非酋 "),e("img",{attrs:{src:"https://cdn.qiandaoapp.com/interior/images/c4706fb13e65d844f8ecde3474a3cfb0.png"}})])}],r=(s("14d9"),s("ccbb")),c=s("dd8a"),o=s("c0e9"),n=s.n(o),l=s("7cb2"),u=s("ed08"),d={data(){return{loading:!1,part:1,imageList:[],ocrResultList:[],ocrSuccessCount:0,isOpenModal:!1,selectedIndex:0,spuList:[],query:"",sum:{originalPrice:0,platformPrice:0},image:""}},watch:{query(t,e){this.spuList=[],this.searchSpu()}},methods:{async getFile(t){const e=t.target.files;for(var s=0;s<e.length;s++){this.loading=!0;var i=e[s].name,a=i.lastIndexOf(".");if(-1!==a){var r=i.substr(a+1).toUpperCase();r=r.toLowerCase();const t=Object(u["i"])(),c=new File([e[s]],t+".jpeg"),o=await Object(l["b"])(c,"activity-temp.image");this.imageList.push(o.url)}}this.loading=!1},deleteImage(t){this.imageList.splice(t,1)},deleteSku(t){this.ocrResultList.splice(t,1),this.$toast.show({title:"已删除"}),0===this.ocrResultList.length&&(this.part=1)},addSku(){this.ocrResultList.push({name:"",originalPrice:"",platformPrice:"",cover:"https://cdn.qiandaoapp.com/interior/images/67a852dfecfda16af6213d1a467a3ca0.png"})},async ocr(){this.part=2,this.ocrResultList=[],this.ocrSuccessCount=0;for(var t=0;t<this.imageList.length;t++){this.loading=!0;try{const m=await c["a"].ocr({url:this.imageList[t],ocrType:"STARLIGHT",level:"HD"}),h=m.data.prismWordsInfo;for(var e=0;e<h.length;e++)if(-1!==h[e].word.indexOf("￥")){var s=h[e-1].word,i=null,a=null;if(-1!==h[e-1].word.indexOf("(")&&(i=h[e-1].word.indexOf("(")),-1!==h[e-1].word.indexOf("（")&&(i=h[e-1].word.indexOf("（")),-1!==h[e-1].word.indexOf(")")&&(a=h[e-1].word.indexOf(")")),-1!==h[e-1].word.indexOf("）")&&(a=h[e-1].word.indexOf("）")),i&&a){var o=s.slice(i+1,a);s=o+"-"+s.slice(0,i)}var n="",l="https://cdn.qiandaoapp.com/interior/images/67a852dfecfda16af6213d1a467a3ca0.png";const t={q:s,"start-index":0,"max-results":1,scene:"plugin-price-ocr"};try{var u=await r["a"].searchSpuInTag(t),d=u.data.items[0].stock_order_min_sell_price||u.data.items[0].minPrice;if(u.data.items[0].imgs&&u.data.items[0].imgs.whiteBgPng)var g=u.data.items[0].imgs.whiteBgPng;d>0&&(n=d+"",l=g)}catch(p){console.error(p)}this.ocrResultList.push({name:s,originalPrice:h[e].word.replace("￥",""),platformPrice:n,cover:l})}this.ocrSuccessCount++}catch(p){console.error(p)}}0===this.ocrResultList.length?(this.part=1,this.$toast.show({title:"没有识别到结果，请重新上传"})):this.$toast.show({title:"识别完毕"}),this.loading=!1},handleSearchBtn(t){this.selectedIndex=t,this.spuList=[],this.isOpenModal=!0,this.$nextTick(()=>{document.getElementById("searchbox").focus()})},handleMaskClick(){this.isOpenModal=!1,this.query=""},async searchSpu(){const t={q:this.query,"start-index":0,"max-results":20,scene:"plugin-price-ocr"};try{var e=await r["a"].searchSpuInTag(t);this.spuList=e.data.items}catch(s){console.error(s)}},handleSelectSpu(t,e,s,i){this.handleMaskClick(),this.ocrResultList[this.selectedIndex].cover=s||i,this.ocrResultList[this.selectedIndex].platformPrice=t>0?t:e},backToPreview(){this.part=2,this.image="",this.sum.originalPrice=0,this.sum.platformPrice=0},drawImage(){this.part=3;for(var t=0;t<this.ocrResultList.length;t++){var e=Number(this.ocrResultList[t].originalPrice);!isNaN(e)&&e>0&&(this.sum.originalPrice+=e);var s=Number(this.ocrResultList[t].platformPrice);!isNaN(s)&&s>0&&(this.sum.platformPrice+=s)}this.sum.originalPrice=this.sum.originalPrice.toFixed(0),this.sum.platformPrice=this.sum.platformPrice.toFixed(0),this.loading=!0,this.$nextTick(()=>{setTimeout(()=>{n()(document.getElementById("canvas"),{allowTaint:!1,useCORS:!0,backgroundColor:"#7643e2"}).then(t=>{t.toBlob(async t=>{const e=Object(u["i"])(),s=new File([t],e+".jpeg"),i=await Object(l["b"])(s,"activity-temp.image");this.image=i.url,this.$toast.show({title:"✅图片已生成，长按保存"})},"image/jpeg")}).catch(()=>{})},3e3)}),this.loading=!1},goToEchobox(){const t="/modules/pages-inechobox/carefree/index?orgId=107763688714290865",e="/modules/pages-inechobox/support/index?orgId=107763688714290865";Object(u["h"])()?this.navigateTo({url:t}):Object(u["d"])()&&this.navigateTo({url:e})},goToPublish(){const t="/pages-market/allTags/index?name=潮玩IP";(Object(u["h"])()||Object(u["d"])())&&this.navigateTo({url:t})}}},g=d,p=(s("834b"),s("0c7c")),m=Object(p["a"])(g,i,a,!1,null,null,null);e["default"]=m.exports},ccbb:function(t,e,s){"use strict";var i=s("0ef7");e["a"]={getStandardProducts(t){return i["p"].get(`/spus/${t}/standard-products`)},getSPUs(t){return i["p"].get("/v2/spus",t)},getSingleSpu(t,e){return i["p"].get("/v2/spus/"+t,e)},getUserPosters(t){return i["h"].post("/c2c-web/v1/poster/get-user-posters",t)},doProductsOffSale(t){return i["h"].post("/c2c-web/v1/c2c/products/off-sale",t)},plastSearchCategory(t){return i["h"].get("/plast/search/category/v3",t)},createUserPoster(t){return i["h"].post("/c2c-web/v1/poster/create-user-poster",t)},getSPUSpecs(t){return i["p"].get(`/spus/${t}/specs`)},updateC2cProductsByCategory(t){return i["h"].post("/c2c/products/m-update",t)},updateProductMulti(t){return i["h"].post("/c2c/products/multi-create",t)},createProductMulti(t){return i["h"].post("/c2c/products/m-create-update",t)},getProductsByCategory(t){return i["h"].get("/c2c/products/by-category",t)},getCategoryDetail(t,e){return i["p"].get("/v2/categories/"+t,e)},getCategories(t){return i["p"].get("/v2/categories",t)},getRecommendCategories(t){return i["p"].get(`/v2/categories/${t}/recommend`)},getCategoryTags(t){return i["p"].get(`/v2/categories/${t}/config`)},getTag(t,e){return i["p"].get("/tags/"+t,e)},getHotTags(t){return i["p"].get(`/tags/${t}/config`)},getTags(t){return i["p"].get("/tags",t)},searchCategories(t){return i["p"].get("/v2/categories",t)},getSettings(){return i["p"].get("/settings")},changeWishes(t){return i["p"].post("/wish-list",t)},updateUserSettings(t){return i["p"].put("/settings",t)},getPosterColumnConfig(t){return i["l"].get("/action/get-products-poster",t)},getPosterThemes(t){return i["l"].get("/action/get-poster-themes",t,{isErrorDefaultTip:!1})},getWishList(t){return i["p"].get("/wish-list",t,{isErrorDefaultTip:!1})},getWishMatches(t){return i["p"].get("/products/match/wish-list",t,{isErrorDefaultTip:!1})},getDemandProductList(t){return i["p"].get("/products/match/demand-list",t)},getTradeInfo(t){return i["p"].post("/action/get-trade-info",t)},get360DegImages(t){return i["p"].get(`/spus/${t}/360-degree-images`)},getBarginSpus(t){return i["p"].post("/stock-order/bargin",t)},getSpecsByMPName(t){return i["p"].get("/specs/aciton/get-by-app-name",t)},getDistribution(t){return i["p"].get("/feeds/chaowan",t)},getSellingCategories(t){return i["p"].get("/products/action/get-selling-categories",t)},getCategoryCount(t){return i["p"].get("/products/action/get-category-product-count",t)},getSpuList(t){return i["h"].post("/treasure/spus/search/simple-info",t)},getSpuHeader(t){return i["h"].get("/treasure/flora/v2/spu/simpleInfo",t)},getSpuDetails(t){return i["h"].get("/treasure/flora/v1/spu/detailInfo",t)},getTagList(t){return i["h"].get("/treasure/tags",t)},getTagDetails(t){return i["h"].get("/treasure/flora/v1/tag/detailInfo",t)},getTagDetailsV2(t){return i["h"].get("/treasure/flora/v2/tag/simpleInfo",t)},searchSpuInTag(t){return i["h"].get("/plast/search/spu",t)},searchTag(t){return i["h"].get("/plast/search/tag",t)},getXiaokaWebConfig(){return i["e"].get("/vinyl/web.json")},getTagsV2(t){return i["h"].get("/armory/entry/tags",t)}}},dd8a:function(t,e,s){"use strict";var i=s("0ef7");e["a"]={myPokemon(t){return i["q"].get("/v1/pokemon/my",t)},nextStep(t){return i["q"].post("/v1/pokemon/next-step",t)},searchSpuByImage(t){return i["q"].post("/v1/image/search/spu",t)},searchSpuByAggregateImages(t){return i["q"].post("/v1/image/search/multi/spu/v2",t)},ocr(t){return i["j"].post("/z/stargazing/z/ocr",t)},getQrcode(t){return i["j"].get("/z/poster-web/wechat/mp-qrcode",t)},getSpuOpposite(t){return i["j"].post("/treasure/spus/opposite/list",t)},getSpuWithRelated(t){return i["j"].post("/treasure/v1/search/spu/with/related",t)},getSpuWaterfall(t){return i["j"].get("/treasure/v1/waterfall/list",t)},fetchStep2BizConfig(){return i["j"].get("https://config-cdn.qiandaoapp.com/mp-common/pluginsBizConfig.json")},getRankInfo(t){return i["j"].get("/treasure/flora/v1/rank",t)},getByDistributedTagIds(t){return i["j"].post("/treasure/v1/public-relations/byDistributedTagIds",t)},getPalworld(t){return i["g"].get("/palu/check",t)}}}}]);