(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4aa93f4"],{"2c15":function(t,e,a){"use strict";a("54f0")},"54f0":function(t,e,a){},"684b":function(t,e,a){"use strict";var s=a("0ef7");e["a"]={getPostAnalysis(t){return s["d"].get("/analysis/"+t)},createPostReviewV3(t){return s["h"].post("/gactus/post-review-v3",t)},updatePostReviewV3(t){return s["h"].put("/gactus/post-review-v3",t)},deleteSpuMark(t){return s["h"].post("/gactus/delete-spu-mark",t)},createPostArticle(t){return s["h"].post("/gactus/posts-article",t)},getPostListByTopic(t){return s["h"].post("/gactus/topics/posts-v3",t)},getPostListByTag(t){return s["h"].post("/gactus/posts/by-tag-v4",t)},mark(t){return s["h"].post("/gactus-web/v1/mark/edit",t)},createPost(t){return s["h"].post("/gactus-web/post/create",t)},createPostStandard(t){return s["h"].post("/gactus-web/post/standard/create",t)},updatePostStandard(t){return s["h"].post("/gactus-web/post/standard/update",t)},comment(t){return s["h"].post("/cactus-api/comments",t)},getUserHobbyMark(t){return s["h"].post("/gactus/user-hobby-mark",t)},getUserMark(t){return s["h"].post("/gactus-web/v1/get-user-marks",t)},getUserHobbyList(t){return s["h"].get("/gactus-web/v1/interest/list",{uid:t})},gstoneGames(t){return s["h"].post("/config-go/redirect/gstoneGames",t)}}},"787f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"favorite-pokemon"},[1===this.part?e("div",[t.selectedCount>0?e("div",{staticClass:"reset",on:{click:t.reset}},[t._v("全部重置")]):t._e(),e("div",{staticClass:"types-list"},[t._l(this.types,(function(a,s){return[e("div",{key:s,staticClass:"type",style:{backgroundColor:a.color}},[e("div",{staticClass:"type-name"},[t._v(t._s(a.name))]),e("div",{staticClass:"pokemon",on:{click:function(e){return t.handleModalClick(a.tagId,s,a.page)}}},[e("img",{staticClass:"pokemon-cover",attrs:{src:a.cover,alt:"cover"}}),e("div",{staticClass:"pokemon-name"},[t._v(t._s(a.pokemon))])])])]}))],2),e("div",{class:["render-btn",{finish:22===t.selectedCount}],on:{click:t.handleRenderBtn}},[t._v(" 下一步（已选 "+t._s(t.selectedCount)+"/22） ")]),e("transition",{attrs:{name:"fade"}},[t.isOpenModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"mask",on:{click:t.handleMaskClick}}),e("div",{staticClass:"spu-group"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"searchbox",attrs:{placeholder:"输入宝可梦名称搜索"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),e("div",{staticClass:"spu-list"},t._l(this.spuList,(function(a,s){return e("div",{key:s,staticClass:"spu",on:{click:function(e){return t.handleSelectSpu(a.name,a.cover)}}},[e("img",{staticClass:"spu-cover",attrs:{src:a.cover}}),e("div",{staticClass:"spu-name"},[t._v(t._s(a.name))])])})),0)])])]):t._e()])],1):t._e(),2===this.part?e("div",{staticClass:"final",attrs:{id:"canvas"}},[t.image?[e("img",{staticClass:"draw",attrs:{src:t.image}})]:e("div",{staticClass:"paper"},[e("div",{staticClass:"poster-title"},[t._v("最喜欢的各属性宝可梦")]),t._m(0),e("div",{staticClass:"image-list"},[t._l(this.types.slice(0,18),(function(a,s){return[e("div",{key:s,staticClass:"paper-type",style:{backgroundColor:a.color}},[e("div",{staticClass:"type-name"},[t._v(t._s(a.name))]),e("div",{staticClass:"pokemon"},[e("img",{staticClass:"pokemon-cover",attrs:{src:a.cover,alt:"cover"}}),e("div",{staticClass:"pokemon-name"},[t._v(t._s(a.pokemon))])])])]}))],2),e("div",{staticStyle:{display:"block","margin-left":"10px",color:"#9d891b","font-weight":"700","font-size":"16px","line-height":"2"}},[t._v(" 额外题 ")]),e("div",{staticClass:"image-list"},[t._l(this.types.slice(18,22),(function(a,s){return[e("div",{key:s,staticClass:"paper-type",style:{backgroundColor:a.color}},[e("div",{staticClass:"type-name"},[t._v(t._s(a.name))]),e("div",{staticClass:"pokemon"},[e("img",{staticClass:"pokemon-cover",attrs:{src:a.cover,alt:"cover"}}),e("div",{staticClass:"pokemon-name"},[t._v(t._s(a.pokemon))])])])]})),e("div",{staticClass:"qrcode"},[this.me&&this.me.avatar?e("img",{staticClass:"avatar",attrs:{src:this.me.avatar,alt:"avatar"}}):t._e(),e("img",{staticClass:"image",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/19066fe04b15977fd0b76f80ee801bd8.png"}}),t._m(1)])],2)])],2):t._e(),2===this.part?e("div",{staticClass:"footer"},[t.image?[e("div",{staticClass:"goback-btn",on:{click:t.goBack}},[t._v("重新选择")]),e("div",{staticClass:"publish-btn",on:{click:t.publishPost}},[t._v("马上发布")])]:e("div",{staticClass:"loader"},[t._v("图片预览中…")])],2):t._e(),e("transition",{attrs:{name:"fade"}},[t.showIslandModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"mask",on:{click:t.handleMaskClick}}),e("div",{staticClass:"island-modal"},[e("img",{staticStyle:{width:"80px",margin:"10px 0","border-radius":"10px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/943cf0d3f60b6b221136760dd5d0247a.jpeg",alt:"cover"}}),e("div",{staticStyle:{"margin-bottom":"10px","font-size":"17px"}},[t._v(" 宝可梦岛 ")]),e("div",{staticStyle:{"margin-bottom":"10px",color:"#aaa"}},[t._v(" "+t._s(this.joinCountText)+"人加入 ")]),e("div",{staticStyle:{"margin-bottom":"30px",padding:"0 40px"}},[t._v(" 分享攻略、问题求助、组队交换，与其他宝可梦玩家一起交流 ")]),e("div",{staticClass:"single-button",on:{click:t.handleIslandClick}},[t._v("去看看")]),e("div",{staticClass:"single-button",on:{click:t.joinIsland}},[t._v("马上加入")])])]):t._e()])],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"miniprogram"},[e("img",{staticStyle:{width:"12px","vertical-align":"middle"},attrs:{src:"https://cdn.qiandaoapp.com/admins/95f0954cf25fcc5f998382bfc39355fd.png",alt:"search"}}),t._v(' vx"千岛电玩"小程序 ')])},function(){var t=this,e=t._self._c;return e("span",[t._v(" 长按扫码 "),e("br"),t._v(" 一键作图 ")])}],n=a("ccbb"),r=a("c0e9"),i=a.n(r),c=a("2f62"),d=a("7cb2"),p=a("ed08"),g=a("cb35"),l=a("684b"),u={data(){return{types:[{name:"草",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#479e3b",tagId:"1416082",page:2},{name:"火",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#e46046",tagId:"1417099",page:1},{name:"水",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#349de1",tagId:"1417101",page:2},{name:"一般",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#848481",tagId:"1417083",page:2},{name:"电",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#e1be2d",tagId:"1417103",page:1},{name:"超能力",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#ed708e",tagId:"1417105",page:2},{name:"格斗",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#d49d3d",tagId:"1417085",page:1},{name:"岩石",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#b3ad8d",tagId:"1417091",page:1},{name:"地面",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#a77542",tagId:"1417089",page:1},{name:"飞行",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#79abd0",tagId:"1417087",page:2},{name:"虫",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#a1a634",tagId:"1417093",page:1},{name:"毒",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#9356c8",tagId:"1416083",page:1},{name:"恶",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#514645",tagId:"1417111",page:1},{name:"幽灵",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#6f4672",tagId:"1417095",page:1},{name:"冰",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#5fc6c8",tagId:"1417107",page:1},{name:"钢",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#73b0c7",tagId:"1417097",page:1},{name:"龙",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#576fbc",tagId:"1417109",page:1},{name:"妖精",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#dc88d3",tagId:"1417113",page:1},{name:"本命",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#79A094",tagId:"1416044",page:11},{name:"初恋",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#79A094",tagId:"1416044",page:11},{name:"特殊",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#79A094",tagId:"1436354",page:1},{name:"御三家",pokemon:"点击选择",cover:"https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png",color:"#79A094",tagId:"1436353",page:1}],loading:!1,spuList:[],isOpenModal:!1,selectedIndex:0,selectedTagId:"1416044",selectedPageCount:1,query:"",image:"",part:1,showIslandModal:!1,postId:""}},computed:{...Object(c["mapState"])("user",["me"]),selectedCount(){const t=this.types.filter(t=>"点击选择"!==t.pokemon);return t.length}},watch:{query(t,e){this.spuList=[],this.getSpuList()}},mounted(){"{}"===JSON.stringify(this.me)&&this.logIn()},methods:{logIn(){const t="/modules/pages/common-login/index";(Object(p["h"])()||Object(p["d"])())&&this.navigateTo({url:t})},async joinIsland(){try{await g["a"].join(300136);this.$toast.show({title:"✅ 已加入，帖子发布中.."}),this.publishPost(),this.handleMaskClick()}catch(t){console.error(t)}},handleIslandClick(){var t="/pages-market/island/index?id=300136";(Object(p["h"])()||Object(p["d"])())&&this.navigateTo({url:t})},handleModalClick(t,e,a){"{}"===JSON.stringify(this.me)&&this.logIn(),this.selectedIndex=e,this.selectedTagId=t,this.selectedPageCount=a,this.spuList=[],this.isOpenModal=!0,this.getSpuList()},async getSpuList(){if(this.loading=!0,""===this.query)for(var t=0;t<this.selectedPageCount;t++){var e={andTagIds:[this.selectedTagId],limit:100,offset:100*t,orderBy:"sortPropertyAsc",sort_property_items:[{propertyId:"53112"}]};try{const t=await n["a"].getSpuList(e);"{}"!==JSON.stringify(t.data)&&(this.spuList=this.spuList.concat(t.data.list))}catch(s){console.error(s)}}else{const t={q:this.query,"start-index":0,"max-results":100,andTagIds:this.selectedTagId,scene:"plugin-favorite-pokemon"};try{const e=await n["a"].searchSpuInTag(t),s=e.data.items;for(var a=0;a<s.length;a++)s[a].cover=s[a].imgs.cover;this.spuList=this.spuList.concat(s)}catch(s){console.error(s)}}this.loading=!1},handleMaskClick(){this.isOpenModal=!1,this.showIslandModal=!1,this.query=""},handleSelectSpu(t,e){this.types[this.selectedIndex].pokemon=t,this.types[this.selectedIndex].cover=e,this.handleMaskClick()},handleRenderBtn(){this.selectedCount<22?this.$toast.show({title:"还有未选完的"}):this.render()},reset(){for(var t=0;t<this.types.length;t++)this.types[t].pokemon="点击选择",this.types[t].cover="https://cdn.qiandaoapp.com/admins/6614af580980c3e51ef1d57ec82e9161.png"},render(){this.part=2,this.drawImage()},drawImage(){this.$nextTick(()=>{setTimeout(()=>{i()(document.getElementById("canvas"),{allowTaint:!1,useCORS:!0,backgroundColor:"white"}).then(t=>{t.toBlob(async t=>{const e=Object(p["i"])(),a=new File([t],e+".jpeg"),s=await Object(d["b"])(a,"activity-temp.image");this.image=s.url},"image/jpeg")}).catch(()=>{})},3e3)})},async publishPost(){try{const e=await g["a"].detail(300136);if(this.joinCountText=e.data.joinCountText,e.data.joined&&!0===e.data.joined){const e={attachments:[{meta:{},type:"image",url:this.image}],content:"",labels:[{propertyTagId:"1436337",title:"各属性最爱",relatedType:"tag",relatedId:"1445870"}],mentionRelatedObjects:{},privacy:"public",reviewStatistic:"",islandId:"300136",meta:{plugin:{id:"favorite-pokemon"}}};if(this.postId){e.postId=this.postId;try{await l["a"].updatePostStandard(e);this.$toast.show({title:"✅ 发布成功"});const t="/pages-community/post/spu-detail?postId="+this.postId;setTimeout(()=>{(Object(p["h"])()||Object(p["d"])())&&this.navigateTo({url:t})},300)}catch(t){console.error(t)}}else try{const t=await l["a"].createPostStandard(e);this.postId=t.data.id,this.$toast.show({title:"✅ 发布成功"});const a="/pages-community/post/spu-detail?postId="+this.postId;setTimeout(()=>{(Object(p["h"])()||Object(p["d"])())&&this.navigateTo({url:a})},300)}catch(t){console.error(t)}}else this.$toast.show({title:"加入岛后，才能发布"}),this.showIslandModal=!0}catch(t){console.error(t)}},goBack(){this.part=1,this.image=""}}},m=u,h=(a("2c15"),a("0c7c")),v=Object(h["a"])(m,s,o,!1,null,null,null);e["default"]=v.exports},"7cb2":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return c}));var s=a("0ef7"),o=a("0d94"),n=a("a37c");async function r(t,e="interior-admin.image"){const a=Object(o["e"])({isProd:n["e"],async customApiCall(t){var e;const a=await s["h"].post("/uploader/gene-post-object-sign",t);return null===(e=a.data)||void 0===e?void 0:e[0]}});return a({file:t,scene:e})}function i(t){return s["h"].get("/uploader/file-space/get",t)}function c(t,e="interior-admin.image"){const a=Object(o["e"])({isProd:n["e"],async customApiCall(t){var e;const a=await s["h"].post("/uploader/anonymous/gene-post-object-sign",t);return null===(e=a.data)||void 0===e?void 0:e[0]}});return a({file:t,scene:e})}},cb35:function(t,e,a){"use strict";var s=a("0ef7");e["a"]={detail(t){return s["h"].get("/treasure/island/detail?id="+t)},join(t){return s["h"].post("/treasure/island/join",{id:t})}}},ccbb:function(t,e,a){"use strict";var s=a("0ef7");e["a"]={getStandardProducts(t){return s["p"].get(`/spus/${t}/standard-products`)},getSPUs(t){return s["p"].get("/v2/spus",t)},getSingleSpu(t,e){return s["p"].get("/v2/spus/"+t,e)},getUserPosters(t){return s["h"].post("/c2c-web/v1/poster/get-user-posters",t)},doProductsOffSale(t){return s["h"].post("/c2c-web/v1/c2c/products/off-sale",t)},plastSearchCategory(t){return s["h"].get("/plast/search/category/v3",t)},createUserPoster(t){return s["h"].post("/c2c-web/v1/poster/create-user-poster",t)},getSPUSpecs(t){return s["p"].get(`/spus/${t}/specs`)},updateC2cProductsByCategory(t){return s["h"].post("/c2c/products/m-update",t)},updateProductMulti(t){return s["h"].post("/c2c/products/multi-create",t)},createProductMulti(t){return s["h"].post("/c2c/products/m-create-update",t)},getProductsByCategory(t){return s["h"].get("/c2c/products/by-category",t)},getCategoryDetail(t,e){return s["p"].get("/v2/categories/"+t,e)},getCategories(t){return s["p"].get("/v2/categories",t)},getRecommendCategories(t){return s["p"].get(`/v2/categories/${t}/recommend`)},getCategoryTags(t){return s["p"].get(`/v2/categories/${t}/config`)},getTag(t,e){return s["p"].get("/tags/"+t,e)},getHotTags(t){return s["p"].get(`/tags/${t}/config`)},getTags(t){return s["p"].get("/tags",t)},searchCategories(t){return s["p"].get("/v2/categories",t)},getSettings(){return s["p"].get("/settings")},changeWishes(t){return s["p"].post("/wish-list",t)},updateUserSettings(t){return s["p"].put("/settings",t)},getPosterColumnConfig(t){return s["l"].get("/action/get-products-poster",t)},getPosterThemes(t){return s["l"].get("/action/get-poster-themes",t,{isErrorDefaultTip:!1})},getWishList(t){return s["p"].get("/wish-list",t,{isErrorDefaultTip:!1})},getWishMatches(t){return s["p"].get("/products/match/wish-list",t,{isErrorDefaultTip:!1})},getDemandProductList(t){return s["p"].get("/products/match/demand-list",t)},getTradeInfo(t){return s["p"].post("/action/get-trade-info",t)},get360DegImages(t){return s["p"].get(`/spus/${t}/360-degree-images`)},getBarginSpus(t){return s["p"].post("/stock-order/bargin",t)},getSpecsByMPName(t){return s["p"].get("/specs/aciton/get-by-app-name",t)},getDistribution(t){return s["p"].get("/feeds/chaowan",t)},getSellingCategories(t){return s["p"].get("/products/action/get-selling-categories",t)},getCategoryCount(t){return s["p"].get("/products/action/get-category-product-count",t)},getSpuList(t){return s["h"].post("/treasure/spus/search/simple-info",t)},getSpuHeader(t){return s["h"].get("/treasure/flora/v2/spu/simpleInfo",t)},getSpuDetails(t){return s["h"].get("/treasure/flora/v1/spu/detailInfo",t)},getTagList(t){return s["h"].get("/treasure/tags",t)},getTagDetails(t){return s["h"].get("/treasure/flora/v1/tag/detailInfo",t)},getTagDetailsV2(t){return s["h"].get("/treasure/flora/v2/tag/simpleInfo",t)},searchSpuInTag(t){return s["h"].get("/plast/search/spu",t)},searchTag(t){return s["h"].get("/plast/search/tag",t)},getXiaokaWebConfig(){return s["e"].get("/vinyl/web.json")},getTagsV2(t){return s["h"].get("/armory/entry/tags",t)}}}}]);