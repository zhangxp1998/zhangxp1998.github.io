(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9b262fc"],{"1b8b":function(t,e,s){"use strict";var i=s("0ef7");e["a"]={getShelfList(t){return i["h"].get("/shelf/shelves/list-universal",t)},getQrcode(t){return i["l"].get("/wx/get-qr-code",t)},getLarpGrouponDetail(t){return i["h"].get("/larp/groupons/"+t)}}},"6b04":function(t,e,s){"use strict";s("7de2")},"72f9":function(t,e,s){(function(e,s){t.exports=s()})(0,(function(){function t(a,n){if(!(this instanceof t))return new t(a,n);n=Object.assign({},s,n);var o=Math.pow(10,n.precision);this.intValue=a=e(a,n),this.value=a/o,n.increment=n.increment||1/o,n.groups=n.useVedic?r:i,this.s=n,this.p=o}function e(e,s){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=s.decimal,a=s.errorOnInvalid,n=s.fromCents,o=Math.pow(10,s.precision),l=e instanceof t;if(l&&n)return e.intValue;if("number"===typeof e||l)r=l?e.value:e;else if("string"===typeof e)a=new RegExp("[^-\\d"+r+"]","g"),r=new RegExp("\\"+r,"g"),r=(r=e.replace(/\((.*)\)/,"-$1").replace(a,"").replace(r,"."))||0;else{if(a)throw Error("Invalid Input");r=0}return n||(r=(r*o).toFixed(4)),i?Math.round(r):r}var s={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:function(t,e){var s=e.pattern,i=e.negativePattern,r=e.symbol,a=e.separator,n=e.decimal;e=e.groups;var o=(""+t).replace(/^-/,"").split("."),l=o[0];return o=o[1],(0<=t.value?s:i).replace("!",r).replace("#",l.replace(e,"$1"+a)+(o?n+o:""))},fromCents:!1},i=/(\d)(?=(\d{3})+\b)/g,r=/(\d)(?=(\d\d)+\d\b)/g;return t.prototype={add:function(s){var i=this.s,r=this.p;return t((this.intValue+e(s,i))/(i.fromCents?1:r),i)},subtract:function(s){var i=this.s,r=this.p;return t((this.intValue-e(s,i))/(i.fromCents?1:r),i)},multiply:function(e){var s=this.s;return t(this.intValue*e/(s.fromCents?1:Math.pow(10,s.precision)),s)},divide:function(s){var i=this.s;return t(this.intValue/e(s,i,!1),i)},distribute:function(e){var s=this.intValue,i=this.p,r=this.s,a=[],n=Math[0<=s?"floor":"ceil"](s/e),o=Math.abs(s-n*e);for(i=r.fromCents?1:i;0!==e;e--){var l=t(n/i,r);0<o--&&(l=l[0<=s?"add":"subtract"](1/i)),a.push(l)}return a},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(t){var e=this.s;return"function"===typeof t?t(this,e):e.format(this,Object.assign({},e,t))},toString:function(){var t=this.s,e=t.increment;return(Math.round(this.intValue/this.p/e)*e).toFixed(t.precision)},toJSON:function(){return this.value}},t}))},"7de2":function(t,e,s){},"81c4":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.fetchData,expression:"fetchData"}],staticClass:"shelf-list",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e("div",t._l(t.waterfallList.left,(function(s){return e("ShelfItem",{key:s.id,attrs:{shelf:s},on:{tap:t.handleShelfTap}})})),1),e("div",t._l(t.waterfallList.right,(function(s){return e("ShelfItem",{key:s.id,attrs:{shelf:s},on:{tap:t.handleShelfTap}})})),1)])},r=[],a=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"shelf-item",on:{click:t.handleClick}},[e("div",{staticClass:"cover",style:{backgroundImage:`url(${t.shelf.images.coverImage}!fill_w540_h432_jpg)`}},[t.shelf.grouponConfig?e("div",{staticClass:"right-tag"},[t._v(" "+t._s(t.shelf.grouponConfig.success_min_users_count)+"人团使用 ")]):t._e(),t.shelf.isOnShelf?t._e():e("div",{staticClass:"put-off"},[t._v("已下架")])]),e("div",{staticClass:"main"},[e("div",{staticClass:"name otext"},[t._v(t._s(t.shelf.name))]),e("div",{staticClass:"label-outer"},t._l(t.labels,(function(s){return e("div",{key:s.text,staticClass:"label",style:{color:s.color,borderColor:s.color}},[t._v(" "+t._s(s.text)+" ")])})),0),e("div",[e("div",{staticClass:"price-outer"},[e("div",{staticClass:"yen"},[t._v("¥")]),e("div",{staticClass:"price"},[t._v(t._s(t.unitPriceOfCash))])])]),e("div",{staticClass:"org-info"},[e("div",{staticClass:"avatar"},[e("img",{staticClass:"avatar-inner",attrs:{src:t.shelf.org.avatar}})]),e("div",{staticClass:"nickname"},[t._v(t._s(t.shelf.org.nickName))])])])])}),n=[],o=s("2f62"),l=s("72f9"),h=s.n(l),c=(s("ed08"),{props:{shelf:{type:Object,required:!0}},computed:{...Object(o["mapState"])("app",["puppet"]),unitPriceOfCash(){return h()(this.shelf.unitPriceOfCash,{symbol:""}).value},labels(){const t=22;let e=0;const s=[];return(this.shelf.label||[]).forEach(i=>{const r=i.text;for(let t=0;t<r.length;t++)r.charCodeAt(t)<=128?e+=1:e+=2;e<=t&&s.push(i)}),s}},methods:{handleClick(){this.$emit("tap",this.shelf)}}}),u=c,f=(s("b40a"),s("0c7c")),d=Object(f["a"])(u,a,n,!1,null,"4dca3ad0",null),p=d.exports,g=s("1b8b"),v=s("dd65"),m=s.n(v);function b(t=[]){const e=[],s=[];return t.forEach((t,i)=>{i%2===0?e.push(t):s.push(t)}),{left:e,right:s}}var y={components:{ShelfItem:p},data(){return{items:[],isLoading:!1,hasMore:!0,tagId:"",orderBy:"",shelfTypes:null,orgId:""}},computed:{busy(){return this.isLoading||!this.hasMore},offset(){return this.items.length},waterfallList(){return b(this.items)}},mounted(){const t=this.$route.query;this.tagId=t.tagId||"",this.orderBy=t.orderBy||"sortOrder",t.shelfTypes&&(this.shelfTypes=JSON.parse(decodeURIComponent(t.shelfTypes))),t.orgId&&(this.orgId=t.orgId),this.fetchData()},methods:{fetchData(){this.hasMore&&!this.isLoading&&(this.$loading.show({title:"加载中"}),this.isLoading=!0,g["a"].getShelfList(m()({tagId:this.tagId,type:this.shelfTypes,tagType:"TAG",orderBy:this.orderBy,limit:10,withProductTag:!0,withSoldStat:!0,offset:this.offset,orgId:this.orgId},t=>null==t||""===t)).then(({rows:t})=>{t.forEach(t=>{Array.isArray(t.label)||(t.label?t.label=[t.label]:t.label=[])}),this.items=this.items.concat(t),0===t.length&&(this.hasMore=!1),this.isLoading=!1,this.$loading.hide()}).catch(()=>{this.isLoading=!1,this.$loading.hide()}))},handleShelfTap(t){t.isOnShelf?"B2C"===t.type?this.$router.push({path:`/mall/retail?retailId=${t.id}&showQR=1`}):this.$toast.show({icon:"none",title:"请前往微信小程序「奇货」购买"}):this.$toast.show({icon:"none",title:"该商品已下架"})}}},C=y,_=(s("6b04"),Object(f["a"])(C,i,r,!1,null,"5ad01da8",null));e["default"]=_.exports},"89fc":function(t,e,s){},b40a:function(t,e,s){"use strict";s("89fc")}}]);