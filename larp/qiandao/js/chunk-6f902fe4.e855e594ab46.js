(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f902fe4"],{"0727":function(t,e,r){},1955:function(t,e,r){},"20b7":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var s=r("72f9"),a=r.n(s);const i=(t={precision:1})=>e=>({...e,cover:e.cover+"!fill_w360_h480_jpg",minPrice:e.minPrice&&a()(e.minPrice,{symbol:"",separator:"",precision:e.minPrice>10?t.precision:1}).format(),price7d:e.price7d&&a()(e.price7d,{symbol:"",separator:"",precision:e.price7d>10?t.precision:1}).format(),price:e.price&&a()(e.price,{symbol:"",separator:"",precision:e.price>10?t.precision:1}).format(),maxBuyPrice:e.maxBuyPrice&&a()(e.maxBuyPrice,{symbol:"",separator:"",precision:e.maxBuyPrice>10?t.precision:1}).format()})},2167:function(t,e,r){},4529:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"stock-list-container",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e("top-tabs",{attrs:{"current-tab":t.currentTab,tabs:t.tabs},on:{"tab-tap":t.handleTabClick}}),e("div",{staticClass:"stock-list-content"},[e("filters",{attrs:{filters:t.sorts,filter:t.currentSort},on:{change:t.handleFilterChange}}),e("spuItemsWithTrend",{attrs:{sort:t.currentSort,items:t.items},on:{"btn-click":t.handleItemBtnClick,click:t.handleItemClick}})],1)],1)},a=[],i=(r("5377"),r("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"scroll-tabs"},[e("div",{staticClass:"top-tabs",staticStyle:{height:"76rpx"}},t._l(t.tabs,(function(r,s){return e("div",{key:s,class:["tab",{active:r.tag===t.currentTab.tag}],on:{click:function(e){return e.stopPropagation(),t.handleTabTap(r)}}},[t._v(" "+t._s(r.name)+" ")])})),0)])}),n=[],c={props:{tabs:{type:Array,required:!0},currentTab:{type:[Object,null],required:!0}},methods:{handleTabTap(t){this.$emit("tab-tap",t)}}},o=c,u=(r("d179"),r("0c7c")),l=Object(u["a"])(o,i,n,!1,null,"6f724bc1",null),d=l.exports,p=r("dc7b"),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-container"},t._l(t.items,(function(r){return e("div",{key:r.spuId,staticClass:"item-wrap",on:{click:function(e){return t.$emit("click",r)}}},[e("div",{staticClass:"content u-flex-c"},[e("img",{staticClass:"spu-img",attrs:{src:r.whiteBgPng||r.cover,alt:""}}),e("div",{staticClass:"right u-flex-col-s-sb"},[e("div",{staticClass:"top u-flex-c"},[e("div",{staticClass:"title-wrap u-flex-c"},[t.computeMainTagName(r)?e("div",{staticClass:"title u-flex-col-s-sb"},[e("div",{staticClass:"category otext"},[t._v(" "+t._s(t.computeMainTagName(r))+" ")]),e("div",{staticClass:"name-wrap u-flex-c"},[e("div",{staticClass:"name otext"},[t._v(t._s(r.name))]),e("arrow-icon",{attrs:{size:6}})],1)]):e("div",{staticClass:"name-wrap u-flex-c"},[e("div",{staticClass:"name otext"},[t._v(t._s(r.name))]),e("arrow-icon",{attrs:{size:6}})],1)]),e("div",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.$emit("btn-click",r)}}},[t._v(" ¥ "),e("span",{staticClass:"price"},[t._v(t._s(r.minPrice))]),t._v(" 购买 ")])]),e("div",{staticClass:"bottom u-flex-c"},[e("div",{staticClass:"b-left u-flex-c-c"},[r.priceTrend.type>0?e("div",{staticClass:"b-content up"},[e("img",{staticClass:"b-icon",attrs:{src:"https://cdn.qiandaoapp.com/admins/16adbefcc5a82f75c5b490d9451db7ba.png",alt:""}}),t._v(" "+t._s(r.priceTrend.amplitudeAbs)+"% ")]):r.priceTrend.type<0?e("div",{staticClass:"b-content down"},[e("img",{staticClass:"b-icon",attrs:{src:"https://cdn.qiandaoapp.com/admins/a02fa3d89b9d2b921aeb183f7ba25946.png",alt:""}}),t._v(" "+t._s(r.priceTrend.amplitudeAbs)+"% ")]):e("div",{staticClass:"b-content invalid"},[t._v(" "+t._s(r.priceTrend.amplitudeAbs)+" ")])]),e("div",{staticClass:"b-mid u-flex-c-c"},[e("div",{staticClass:"b-title"},[t._v("上周")]),e("div",{staticClass:"b-content"},[e("span",{staticClass:"currency"},[t._v("¥")]),t._v(" "+t._s(r.price7d||"--")+" ")])]),e("div",{staticClass:"b-right u-flex-c-c"},[e("div",{staticClass:"b-title"},[t._v("7日成交")]),e("div",{staticClass:"b-content"},[t._v(" "+t._s(r.volume7d)+" ")])])])])])])})),0)},h=[],f=function(){var t=this,e=t._self._c;return e("div",{class:{"arrow-icon":!0,[t.computeClassName]:!0},style:t.style})},m=[],v={props:{direction:{type:String,default:"right"},color:{type:String,default:"rgba(32, 36, 38, 0.4)"},size:{type:Number,default:10}},computed:{style(){const{color:t,size:e}=this,r=e/5;return`border: solid ${this.color};width: ${e}px;height: ${e}px; border-width: 0 ${r}px ${r}px 0`},computeClassName(){return"arrow-icon-"+this.direction}}},b=v,y=(r("e4db"),Object(u["a"])(b,f,m,!1,null,"01b669e0",null)),_=y.exports,C={name:"spuItemsWithTrend",props:{items:{require:!0,type:[Array,null]},sort:{require:!0,type:[Object,null]}},components:{ArrowIcon:_},methods:{computeMainTagName(t){return t.tagName||t.categoryName?`${t.tagName} ${t.tagName&&t.categoryName&&" / "} ${t.categoryName}`:""}}},k=C,T=(r("ba7ab"),Object(u["a"])(k,g,h,!1,null,"5e7db504",null)),S=T.exports,w=r("a849"),x=r("f61f"),P=r("ccbb"),O=r("ed08"),$=r("7480"),I=r("20b7"),M=r("f408"),N=r("a0f0"),A=r("2f62");const j=t=>{var e,r;return Array.isArray(t.flags)&&t.flags.includes("TRADEABLE")&&(!(null===(e=t.stockOrders)||void 0===e||!e.length)||!(null===(r=t.buyStockOrders)||void 0===r||!r.length))};var B={name:"StockList",components:{TopTabs:d,SpuItemsWithTrend:S,Filters:p["a"]},mixins:[$["b"]],data(){return{tabs:[],currentTab:{},currentSort:{}}},created(){N["a"].track("flash_sale_created"),M["a"].reportClick("flash_sale_created")},watch:{currentTab(t){N["a"].track("flash_sale_click_tab",{tab_name:t.name}),M["a"].reportClick("flash_sale_click_tab",{value:JSON.stringify({tab_name:t.name})})},currentSort(t){var e,r;N["a"].track("flash_sale_click_filter",{tab_name:null===(e=this.currentTab)||void 0===e?void 0:e.name,sort_name:t.name}),M["a"].reportClick("flash_sale_click_filter",{value:JSON.stringify({tab_name:null===(r=this.currentTab)||void 0===r?void 0:r.name,sort_name:t.name})})}},computed:{...Object(A["mapState"])("user",["me"]),sorts(){var t;return(null===(t=this.currentTab)||void 0===t?void 0:t.sorts)||[]}},methods:{handleTabClick(t){var e;this.currentTab.tag!==t.tag&&(this.currentTab=t,this.currentSort=null===(e=this.sorts)||void 0===e?void 0:e[0],this.reset(),this.fetchList())},handleFilterChange(t){this.currentSort.key!==t.key&&(this.currentSort=t,this.reset(),this.fetchList())},async initConfig(){const{tabs:t}=await this.fetchSaleListConfig(),e=this.$route.query;let{currentTag:r,allTags:s}=e;s=s&&JSON.parse(s);const a=r?t.find(t=>t.tag===+r):null===t||void 0===t?void 0:t[0],i=a.sorts[0];this.tabs=this.reSortTabs(t,s),this.currentTab=a,this.currentSort=i},reSortTabs(t,e){if(!Array.isArray(e)||0===e.length)return t;const r=[];return e.forEach(e=>{const s=t.find(t=>t.tag===e);s&&r.push(s)}),t.forEach(t=>{e.find(e=>e===t.tag)||r.push(t)}),r},async fetchList(){try{var t,e,r;this.$loading.show({title:"正在加载...",withMask:!1});const{limit:i,offset:n}=this.pagination;null!==(t=this.currentTab)&&void 0!==t&&t.tag||await this.initConfig();const c={tagIds:[null===(e=this.currentTab)||void 0===e?void 0:e.tag],sort:null===(r=this.currentSort)||void 0===r?void 0:r.key,offset:n,limit:i};var s,a;if(7===(null===c||void 0===c?void 0:c.sort))c.cursor={maxPriceMinReducedAt:null===(s=this.items)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.priceMinReducedAt};const o=Object(O["a"])(c),{spus:u}=await w["a"].queryProductsByTag(o),l=u.map(Object(I["a"])({precision:0})).map(t=>{let e={type:0,amplitudeAbs:"-"};const r=Number(t.minPrice),s=Number(t.price7d);if(r&&s&&r!==s){const t=r>s?1:-1;e={type:t,amplitudeAbs:Math.abs(100*(r/s-1)).toFixed(1)}}return{...t,priceTrend:e}});this.items=this.items.concat(l),l.length<$["a"]&&(this.hasMore=!1),this.pagination.offset=n+i}catch(i){console.error(i)}finally{this.$loading.hide()}},async fetchSaleListConfig(){const t=await Object(x["a"])("sale","stockArea");return document.title=t.title,t},async handleItemBtnClick(t){var e,r,s,a;const{spuId:i,name:n}=t;this.$loading.show({title:"正在加载...",withMask:!1});const{rows:c}=await P["a"].getStandardProducts(i);this.$loading.hide();const o=(null===c||void 0===c?void 0:c.filter(j))||[],u=null===o||void 0===o?void 0:o[0],l=1===o.length,d=null===u||void 0===u||null===(e=u.stockOrders)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.id,p=l&&d;N["a"].track("flash_sale_click_buy",{spu_id:i,spu_name:n,tab_name:this.currentTab.name,sort_name:null===(s=this.currentSort)||void 0===s?void 0:s.name,type:p?"confirm-buy":"spu-detail"}),M["a"].reportClick("flash_sale_click_buy",{value:JSON.stringify({tab_name:this.currentTab.name,spu_id:i,spu_name:n,sort_name:null===(a=this.currentSort)||void 0===a?void 0:a.name,type:p?"confirm-buy":"spu-detail"})}),p?this.go2StockConfirmBuy({id:d}):this.navigateTo({url:`/pages-market/spu/index?spuId=${i}&defaultTab=exchange`})},async go2StockConfirmBuy({id:t}){this.navigateTo({url:"/pages-stock/confirm-buy/index?id="+t})},handleItemClick(t){var e,r;const{spuId:s,name:a}=t,i=`/pages-market/spu/index?spuId=${s}&defaultTab=exchange`;N["a"].track("flash_sale_click_item",{spu_id:s,spu_name:a,tab_name:this.currentTab.name,sort_name:null===(e=this.currentSort)||void 0===e?void 0:e.name,type:"spu-detail"}),M["a"].reportClick("flash_sale_click_item",{value:JSON.stringify({spu_id:s,spu_name:a,tab_name:this.currentTab.name,sort_name:null===(r=this.currentSort)||void 0===r?void 0:r.name,type:"spu-detail"})}),this.navigateTo({url:i})}}},q=B,D=(r("466e"),Object(u["a"])(q,s,a,!1,null,"03440b73",null));e["default"]=D.exports},"466e":function(t,e,r){"use strict";r("9d3c")},5377:function(t,e,r){var s=r("da84"),a=r("83ab"),i=r("edd0"),n=r("ad6d"),c=r("d039"),o=s.RegExp,u=o.prototype,l=a&&c((function(){var t=!0;try{o(".","d")}catch(l){t=!1}var e={},r="",s=t?"dgimsy":"gimsy",a=function(t,s){Object.defineProperty(e,t,{get:function(){return r+=s,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var n in t&&(i.hasIndices="d"),i)a(n,i[n]);var c=Object.getOwnPropertyDescriptor(u,"flags").get.call(e);return c!==s||r!==s}));l&&i(u,"flags",{configurable:!0,get:n})},"6b80":function(t,e,r){"use strict";r("2167")},"72f9":function(t,e,r){(function(e,r){t.exports=r()})(0,(function(){function t(i,n){if(!(this instanceof t))return new t(i,n);n=Object.assign({},r,n);var c=Math.pow(10,n.precision);this.intValue=i=e(i,n),this.value=i/c,n.increment=n.increment||1/c,n.groups=n.useVedic?a:s,this.s=n,this.p=c}function e(e,r){var s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=r.decimal,i=r.errorOnInvalid,n=r.fromCents,c=Math.pow(10,r.precision),o=e instanceof t;if(o&&n)return e.intValue;if("number"===typeof e||o)a=o?e.value:e;else if("string"===typeof e)i=new RegExp("[^-\\d"+a+"]","g"),a=new RegExp("\\"+a,"g"),a=(a=e.replace(/\((.*)\)/,"-$1").replace(i,"").replace(a,"."))||0;else{if(i)throw Error("Invalid Input");a=0}return n||(a=(a*c).toFixed(4)),s?Math.round(a):a}var r={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:function(t,e){var r=e.pattern,s=e.negativePattern,a=e.symbol,i=e.separator,n=e.decimal;e=e.groups;var c=(""+t).replace(/^-/,"").split("."),o=c[0];return c=c[1],(0<=t.value?r:s).replace("!",a).replace("#",o.replace(e,"$1"+i)+(c?n+c:""))},fromCents:!1},s=/(\d)(?=(\d{3})+\b)/g,a=/(\d)(?=(\d\d)+\d\b)/g;return t.prototype={add:function(r){var s=this.s,a=this.p;return t((this.intValue+e(r,s))/(s.fromCents?1:a),s)},subtract:function(r){var s=this.s,a=this.p;return t((this.intValue-e(r,s))/(s.fromCents?1:a),s)},multiply:function(e){var r=this.s;return t(this.intValue*e/(r.fromCents?1:Math.pow(10,r.precision)),r)},divide:function(r){var s=this.s;return t(this.intValue/e(r,s,!1),s)},distribute:function(e){var r=this.intValue,s=this.p,a=this.s,i=[],n=Math[0<=r?"floor":"ceil"](r/e),c=Math.abs(r-n*e);for(s=a.fromCents?1:s;0!==e;e--){var o=t(n/s,a);0<c--&&(o=o[0<=r?"add":"subtract"](1/s)),i.push(o)}return i},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(t){var e=this.s;return"function"===typeof t?t(this,e):e.format(this,Object.assign({},e,t))},toString:function(){var t=this.s,e=t.increment;return(Math.round(this.intValue/this.p/e)*e).toFixed(t.precision)},toJSON:function(){return this.value}},t}))},7480:function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return i}));r("13d5");var s=r("f61f");function a(t){if(t&&0!==t.length)return{labelColor:t[0].labelColor||"#9dd87d",value:t.reduce((t,e,r)=>t+(r>0?"/":"")+e.value,"")}}const i=10;e["b"]={data(){return{items:[],pagination:{limit:i,offset:0},loadStatus:"",hasMore:!0}},computed:{busy(){return"loading"===this.loadStatus||(!this.hasMore||"failed"===this.loadStatus)}},methods:{async loadMore(){try{this.loadStatus="loading",await this.fetchList(),this.loadStatus="success"}catch(t){this.loadStatus="failed"}},reset(){this.pagination={limit:i,offset:0},this.loadStatus="",this.hasMore=!0,this.items=[]},async fetchPageJSON(t){const e=await Object(s["a"])("sale",t);return e}}}},"9d3c":function(t,e,r){},a849:function(t,e,r){"use strict";var s=r("0ef7"),a=r("4360");e["a"]={getSingleBanner(t){return s["p"].get("/ads",{slotKey:t,appid:a["a"].state.app.puppet.name})},queryDeliverOrderPrice(t){return s["h"].post("/order/action/query-deliver-order-price",t)},getSellingProducts(t){return s["h"].get("trade/user/products/action/get-selling-products",t)},doGrayscale(t){return s["h"].get("/stock-order/grayscale",t)},queryShelfExpressRule(t){return s["h"].post("/express/user/express-price-template/action/load-by-shelf",t)},queryProductsMatch(t){return s["p"].get("/products/match",t)},queryProductsByTag(t){return s["h"].post("/stock-order/bargin",t)},productPublish(t){return s["h"].post("/trade/products",t)},getAuctionField(t){return s["h"].get("/auctioneer/field/list",t)},auctionPublish(t){return s["h"].post("/c2c-web/v1/auctioneer/auction/create",t)},getTags(t){return s["h"].get("/trade/tags",t)}}},ad6d:function(t,e,r){"use strict";var s=r("825a");t.exports=function(){var t=s(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},ba7ab:function(t,e,r){"use strict";r("de5c")},ccbb:function(t,e,r){"use strict";var s=r("0ef7");e["a"]={getStandardProducts(t){return s["p"].get(`/spus/${t}/standard-products`)},getSPUs(t){return s["p"].get("/v2/spus",t)},getSingleSpu(t,e){return s["p"].get("/v2/spus/"+t,e)},getUserPosters(t){return s["h"].post("/c2c-web/v1/poster/get-user-posters",t)},doProductsOffSale(t){return s["h"].post("/c2c-web/v1/c2c/products/off-sale",t)},plastSearchCategory(t){return s["h"].get("/plast/search/category/v3",t)},createUserPoster(t){return s["h"].post("/c2c-web/v1/poster/create-user-poster",t)},getSPUSpecs(t){return s["p"].get(`/spus/${t}/specs`)},updateC2cProductsByCategory(t){return s["h"].post("/c2c/products/m-update",t)},updateProductMulti(t){return s["h"].post("/c2c/products/multi-create",t)},createProductMulti(t){return s["h"].post("/c2c/products/m-create-update",t)},getProductsByCategory(t){return s["h"].get("/c2c/products/by-category",t)},getCategoryDetail(t,e){return s["p"].get("/v2/categories/"+t,e)},getCategories(t){return s["p"].get("/v2/categories",t)},getRecommendCategories(t){return s["p"].get(`/v2/categories/${t}/recommend`)},getCategoryTags(t){return s["p"].get(`/v2/categories/${t}/config`)},getTag(t,e){return s["p"].get("/tags/"+t,e)},getHotTags(t){return s["p"].get(`/tags/${t}/config`)},getTags(t){return s["p"].get("/tags",t)},searchCategories(t){return s["p"].get("/v2/categories",t)},getSettings(){return s["p"].get("/settings")},changeWishes(t){return s["p"].post("/wish-list",t)},updateUserSettings(t){return s["p"].put("/settings",t)},getPosterColumnConfig(t){return s["l"].get("/action/get-products-poster",t)},getPosterThemes(t){return s["l"].get("/action/get-poster-themes",t,{isErrorDefaultTip:!1})},getWishList(t){return s["p"].get("/wish-list",t,{isErrorDefaultTip:!1})},getWishMatches(t){return s["p"].get("/products/match/wish-list",t,{isErrorDefaultTip:!1})},getDemandProductList(t){return s["p"].get("/products/match/demand-list",t)},getTradeInfo(t){return s["p"].post("/action/get-trade-info",t)},get360DegImages(t){return s["p"].get(`/spus/${t}/360-degree-images`)},getBarginSpus(t){return s["p"].post("/stock-order/bargin",t)},getSpecsByMPName(t){return s["p"].get("/specs/aciton/get-by-app-name",t)},getDistribution(t){return s["p"].get("/feeds/chaowan",t)},getSellingCategories(t){return s["p"].get("/products/action/get-selling-categories",t)},getCategoryCount(t){return s["p"].get("/products/action/get-category-product-count",t)},getSpuList(t){return s["h"].post("/treasure/spus/search/simple-info",t)},getSpuHeader(t){return s["h"].get("/treasure/flora/v2/spu/simpleInfo",t)},getSpuDetails(t){return s["h"].get("/treasure/flora/v1/spu/detailInfo",t)},getTagList(t){return s["h"].get("/treasure/tags",t)},getTagDetails(t){return s["h"].get("/treasure/flora/v1/tag/detailInfo",t)},getTagDetailsV2(t){return s["h"].get("/treasure/flora/v2/tag/simpleInfo",t)},searchSpuInTag(t){return s["h"].get("/plast/search/spu",t)},searchTag(t){return s["h"].get("/plast/search/tag",t)},getXiaokaWebConfig(){return s["e"].get("/vinyl/web.json")},getTagsV2(t){return s["h"].get("/armory/entry/tags",t)}}},d179:function(t,e,r){"use strict";r("0727")},dc7b:function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-container"},[e("div",{staticClass:"filters"},t._l(t.filters,(function(r){return e("div",{key:r.key,class:{filters__item:!0,"filters__item--active":t.filter.key===r.key},on:{click:function(e){return t.handleClick(r)}}},[t._v(" "+t._s(r.name)+" ")])})),0)])},a=[],i={props:{filters:{type:Array,required:!0},filter:{type:Object,required:!0}},mounted(){var t;this.filter=null===this||void 0===this||null===(t=this.filters)||void 0===t?void 0:t[0]},methods:{handleClick(t){this.$emit("change",t)}}},n=i,c=(r("6b80"),r("0c7c")),o=Object(c["a"])(n,s,a,!1,null,"211a7776",null);e["a"]=o.exports},de5c:function(t,e,r){},e4db:function(t,e,r){"use strict";r("1955")},edd0:function(t,e,r){var s=r("13d2"),a=r("9bf2");t.exports=function(t,e,r){return r.get&&s(r.get,e,{getter:!0}),r.set&&s(r.set,e,{setter:!0}),a.f(t,e,r)}}}]);