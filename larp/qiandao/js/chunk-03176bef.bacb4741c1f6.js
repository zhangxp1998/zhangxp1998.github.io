(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03176bef"],{"1f72":function(e){e.exports=JSON.parse('{"CDN":"https://cdn.qiandaoapp.com/icons","font":{"ttf":"f5ec9644746faf082bbd06b6ad8938f3.ttf","eot":"f5ec9644746faf082bbd06b6ad8938f3.eot","woff":"f5ec9644746faf082bbd06b6ad8938f3.woff","woff2":"f5ec9644746faf082bbd06b6ad8938f3.woff2","svg":"f5ec9644746faf082bbd06b6ad8938f3.svg"},"icons":{"accountpay-circle-filled":"","add-admin":"","add-detail":"","add-list":"","add-picture":"","add-script":"","add-user":"","admin":"","advice":"","aftersale-exchange":"","aftersale-replenishment":"","aftersale-return":"","alarm-down-filled":"","alarm-filled":"","alarm":"","alipay-circle-filled":"","alipay":"","all":"","apple":"","arrow-down-circle-filled":"","arrow-down-circle":"","arrow-heavy-down":"","arrow-heavy-right":"","arrow-heavy":"","arrow-left-circle-filled":"","arrow-left-circle":"","arrow-left":"","arrow-right-circle-filled":"","arrow-right-circle":"","arrow-right-line":"","arrow-right":"","arrow-up-circle-filled":"","arrow-up-circle":"","arrowdown":"","arrowup":"","articlebrand":"","at":"","attention-circle-filled":"","attention-circle":"","b2c-vip":"","back-to-down-filled":"","back-to-top":"","back-to-up-filled":"","bankcard":"","bill-config":"","blacklist":"","calendar":"","camera":"","check":"","checkin":"","checklist-filled":"","checklist":"","clear":"","close-circle-filled":"","close-circle":"","close":"","collect-normal":"","collection-down-filled":"","commany":"","comment":"","community-dislike-normal":"","community-dislike-selected-filled":"","community-like-normal":"","community-like-selected-filled":"","complete-circle-filled":"","complete-circle":"","copy":"","copylink":"","correction":"","coupon":"","creditcard-circle-filled":"","data-center":"","degree-360":"","delete":"","discover":"","dislike-author":"","dislike-normal":"","dm-config":"","download-app":"","echobox-stockin":"","echobox-stockout":"","echobox":"","edit":"","emoticoncircle":"","exchange":"","express":"","female-circle-filled":"","female":"","filter":"","floatbutton-c2c":"","fold":"","free":"","hamburger":"","have-normal":"","haved-filled":"","help":"","huntfor":"","image-published":"","info-circle-filled":"","info-circle":"","join-us":"","keyboardcircle":"","label-related":"","library":"","lightning":"","like-normal":"","like-selected-filled":"","local-filled":"","local":"","lock-circle-filled":"","lock-filled":"","lock":"","male-circle-filled":"","male":"","me-account":"","me-auction":"","me-groupon":"","me-prize":"","me-redpocket":"","me-service":"","message-filled":"","message":"","microphone":"","mobilephone-filled":"","money-circle":"","more":"","multiselection":"","navigation-circle-filled":"","navigation-filled":"","navigation":"","nfc":"","npc":"","official-account":"","official-shelf":"","offshelf":"","open":"","order":"","payforanother":"","pdf":"","people-circle-filled":"","people":"","phone-filled":"","phone":"","photo":"","pingduoduo":"","plus-circle-filled":"","plus-circle":"","plus":"","poor-content-quality":"","poster":"","prize-config":"","procedure-circle":"","purchase-medium":"","purchase-negative":"","purchase-positive":"","purchase":"","qq":"","qrcode":"","question-circle-filled":"","question-circle":"","rate-filled":"","redbook":"","reduce-circle-filled":"","reduce-circle":"","reduce":"","refresh":"","remind-closed":"","remind":"","reminded":"","room-config":"","room":"","sale":"","saled":"","save":"","scanning":"","script-config":"","script-sort":"","search":"","service":"","session-arrangement":"","setting-filled":"","setting":"","shan-circle-filled":"","share-filled":"","share":"","shield-filled":"","shield":"","shopping-bag":"","shutdown":"","sort":"","store":"","taobao":"","tiktok":"","time-circle-filled":"","time":"","topic-filled":"","topic":"","trending-down-filled":"","trending-down":"","trending-static-filled":"","trending-up-filled":"","trending-up":"","two-column":"","unfold":"","unfollow-author":"","unlock-filled":"","unlock":"","video-pause-circle-filled":"","video-play-circle-filled":"","vip-config":"","visitor":"","vote-filled":"","vote-published-circle":"","warning":"","wechat-circle-filled":"","wechat-line":"","wechat":"","weibo":"","wepay":"","wifi":"","zheng-circle-filled":"","zhibo-filled":""}}')},3153:function(e,t,a){},"46ff":function(e,t,a){var i,c;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var c=typeof i;if("string"===c||"number"===c)e.push(i);else if(Array.isArray(i)){if(i.length){var l=r.apply(null,i);l&&e.push(l)}}else if("object"===c){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var o in i)a.call(i,o)&&i[o]&&e.push(o)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):(i=[],c=function(){return r}.apply(t,i),void 0===c||(e.exports=c))})()},"61e9":function(e,t,a){},"702e":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createParser",{enumerable:!0,get:function(){return c["default"]}}),t.parsers=t["default"]=void 0;var i=o(a("e883")),c=o(a("dc53")),r=l(a("9377"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};i.get||i.set?Object.defineProperty(t,a,i):t[a]=e[a]}return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){s(e,t,a[t])}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.parsers=r;var u=i["default"];t["default"]=u,e.exports=i["default"],e.exports.createParser=c["default"],e.exports.parsers=n({},r)},7432:function(e,t,a){"use strict";a("61e9")},7821:function(e,t,a){"use strict";a.r(t);var i=function(){var e,t=this,a=t._self._c,i=t._self._setupProxy;return a("div",{staticClass:"create-post-container"},[a("header",{staticClass:"header"}),a("div",{staticClass:"main-container"},[a("main",{staticClass:"main"},[a("div",{staticClass:"title-container u-flex-c-sb"},[t._m(0),a("router-link",{attrs:{to:"/plugin/zelda/my"}},[a("div",{staticClass:"btn u-flex-c-c"},[t._v("我的蓝图")])])],1),a("div",{staticClass:"form-container"},[a("div",{staticClass:"form-item"},[a("label",{staticClass:"required",attrs:{for:""}},[t._v("蓝图标题")]),a(i.Field,{staticClass:"summary",attrs:{placeholder:"请输入你设计蓝图的名称.."},model:{value:i.post.summary,callback:function(e){t.$set(i.post,"summary",e)},expression:"post.summary"}})],1),a("div",{staticClass:"form-item"},[a("label",{attrs:{for:""}},[t._v("蓝图描述")]),a(i.Field,{staticClass:"content",attrs:{placeholder:"聊聊你的设计思路或想法",autosize:"",type:"textarea"},model:{value:i.post.content,callback:function(e){t.$set(i.post,"content",e)},expression:"post.content"}})],1),a("div",{staticClass:"form-item"},[a("label",{staticClass:"required",attrs:{for:""}},[t._v("选择素材")]),a("div",{staticClass:"btn-select u-flex-c-c",on:{click:i.handleItemsClick}},[t._v(" 去选择 "),a("span",[t._v("（已选"+t._s((null===(e=i.checkedItems)||void 0===e?void 0:e.length)||0)+"）")])])]),a("div",{staticClass:"form-item"},[a("label",{staticClass:"required",attrs:{for:""}},[t._v("上传游戏截图或视频")]),a("div",{staticClass:"upload-section"},[a(i.Uploader,{attrs:{"max-count":9,multiple:"",accept:"video/*, image/*"},scopedSlots:t._u([{key:"preview-cover",fn:function({file:e,content:c}){return[a("div",{staticClass:"video-preview"},[a("video",{staticClass:"video"},[a("source",{attrs:{src:c,type:e.type}})]),e.type.includes("video")?a(i.DuIcon,{staticClass:"video-icon",attrs:{size:"20px",name:"video-play-circle-filled"}}):t._e()],1)]}}]),model:{value:i.fileList,callback:function(e){i.fileList=e},expression:"fileList"}},[a("div",{staticClass:"upload-btn u-flex-c-c"},[a(i.DuIcon,{attrs:{name:"plus",color:"#00ADEE",size:"16px"}})],1)])],1)]),a("div",{staticClass:"form-item"},[a("label",{attrs:{for:""}},[t._v("蓝图分类")]),a("div",{staticClass:"tags"},t._l(i.postTagList,(function(e){return a("div",{key:e.key,staticClass:"tag u-flex-c-c",class:{selected:e.selected},on:{click:function(t){return i.handleTagClick(e)}}},[t._v(" "+t._s(e.value)+" ")])})),0)])]),a("div",{staticClass:"submit-btn u-flex-c-c",class:{disabled:i.lock},on:{click:i.handleConfirm}},[t._v(" 发布 ")])]),a("div",{staticClass:"footer u-flex-c-c"},[t._v(" 究极手蓝图将被发布到【塞尔达岛】，在我的蓝图中查看编辑 ")])])])},c=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"title-left u-flex-c"},[t("div",{staticClass:"flag"}),t("div",{staticClass:"title"},[e._v("发布蓝图")])])}],r=(a("be7f"),a("565f")),l=(a("e930"),a("8f80")),o=(a("e7e5"),a("d399")),n=(a("14d9"),a("2b0e")),s=a("dec5"),u=a("ed08"),d=a("4360"),f=a("d432"),p=a("a382"),v=(a("13d5"),a("5af3")),m=a("3cc9"),b=a("a18c");const g=e=>{let t;switch(e){case v["a"].WXMP:t=wx.miniProgram;break;case v["a"].QQMP:t=qq.miniProgram;break;case v["a"].APP:t=m["a"];break}return t};function h(){const e=d["a"].state.app.app,t=["navigateTo","switchTab","navigateBack","redirectTo"],a=t.map(t=>{if(e===v["a"].H5){switch(t){case"navigateTo":return e=>{const t=e.url;t&&b["a"].push(t)};case"switchTab":return e=>{const t=e.url;t&&b["a"].replace(t)};case"navigateBack":return()=>{b["a"].go(-1)};case"redirectTo":return e=>{const t=e.url;t&&b["a"].replace(t)}}return}const a=g(e);return e=>a[t](e)}),i=t.reduce((e,t,i)=>(e[t]=a[i],e),{});return console.log({funcMap:i}),i}var y=a("7cb2"),k={__name:"create-post",setup(e){const t=h(),a=Object(n["getCurrentInstance"])();Object(n["onActivated"])(async()=>{const e=b["a"].currentRoute,t=e.query;null!==t&&void 0!==t&&t.postId&&null!==t&&void 0!==t&&t.refresh&&(await w(t.postId),t.refresh=!1)}),Object(n["onMounted"])(async()=>{const e=b["a"].currentRoute,t=e.query;null!==t&&void 0!==t&&t.postId&&null!==t&&void 0!==t&&t.refresh&&(await w(t.postId),t.refresh=!1)});const i=Object(n["ref"])([]),c=Object(n["ref"])({summary:"",content:""}),v=Object(n["ref"])([]);Object(n["watch"])(()=>d["a"].state.zelda.checkedItems,e=>{v.value=e});const m=Object(n["ref"])([{key:"1533809",value:"地面"},{key:"1533810",value:"空中"},{key:"1533811",value:"搞怪"},{key:"1533812",value:"高达"},{key:"1533813",value:"兵器"},{key:"1533814",value:"水上"}]),g=Object(n["ref"])(!1);function k(){c.value={summary:"",content:""},i.value=[],d["a"].dispatch("zelda/updateCheckedItems",[])}async function w(e){const{data:t}=await f["a"].getSinglePost({postId:e}),a=null===t||void 0===t?void 0:t.post,r=(null===a||void 0===a?void 0:a.checklistAttachments.map(e=>{var t,a,i,c;return{id:null===e||void 0===e||null===(t=e.spu)||void 0===t?void 0:t.id,name:null===e||void 0===e||null===(a=e.spu)||void 0===a?void 0:a.name,cover:null===e||void 0===e||null===(i=e.spu)||void 0===i?void 0:i.cover,count:+(null===e||void 0===e||null===(c=e.meta)||void 0===c?void 0:c.checkListCount)}}))||[];d["a"].dispatch("zelda/updateCheckedItems",r),c.value={summary:null===a||void 0===a?void 0:a.summary,content:null===a||void 0===a?void 0:a.content},i.value=null===a||void 0===a?void 0:a.attachments}function _(e){m.value=m.value.map(t=>(t.key===e.key?t.selected=!t.selected:t.selected=!1,t))}function O(){const e=b["a"].currentRoute,t=e.query;b["a"].push({name:"zelda-items",query:t})}const j=async()=>{const{content:e,summary:a}=c.value;if(!g.value)if(a)if(v.value.length)if(i.value.length){g.value=!0;try{var r,l;p["b"].show({title:"发布中..."});const c=await Promise.all(i.value.map(e=>e.url?Promise.resolve(e):Object(y["b"])(e.file,"user-post.image"))),n=v.value.map(e=>({type:"checklist",meta:{relatedId:e.id,relatedType:"spu",checkListCount:String(e.count)}})),s=null===(r=m.value.filter(e=>e.selected))||void 0===r||null===(l=r[0])||void 0===l?void 0:l.key,d=null===c||void 0===c?void 0:c.map(e=>{const{type:t,url:a}=e;return{type:t,url:a,key:Object(u["i"])(),meta:{},spu:null}}),h={attachments:d,summary:a,content:e,privacy:"public",checklistAttachments:n,type:"checklist",labels:[{propertyTagId:"1436337",title:"究极手",relatedType:"tag",relatedId:"1532422"}],meta:{plugin:{id:"zelda-plugin"}},activeTags:s&&[{type:"tag",id:s}],islandId:"300135"},w=b["a"].currentRoute,_=w.query;if(_.postId)return await f["a"].updatePost({postId:_.postId,...h}),void Object(o["a"])("更新成功～");const{data:O}=await f["a"].createPost({...h});o["a"].success("创建成功～"),t.redirectTo({url:"/pages-community/post/spu-detail?postId="+O.postId})}catch(n){console.error(n),Object(o["a"])("创建失败～，"+JSON.stringify(n))}finally{g.value=!1,p["b"].hide(),k()}}else Object(o["a"])("请上传游戏截图或视频");else Object(o["a"])("请选择素材");else Object(o["a"])("请输入标题")};return{__sfc:!0,navigateUtils:t,app:a,fileList:i,post:c,checkedItems:v,postTagList:m,lock:g,init:k,fetchPostDetail:w,handleTagClick:_,handleItemsClick:O,handleConfirm:j,DuIcon:s["a"],Uploader:l["a"],Field:r["a"]}}},w=k,_=(a("a5f7"),a("0c7c")),O=Object(_["a"])(w,i,c,!1,null,"9e0be68c",null);t["default"]=O.exports},7868:function(e,t,a){},"7cb2":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=a("0ef7"),c=a("0d94"),r=a("a37c");async function l(e,t="interior-admin.image"){const a=Object(c["e"])({isProd:r["e"],async customApiCall(e){var t;const a=await i["h"].post("/uploader/gene-post-object-sign",e);return null===(t=a.data)||void 0===t?void 0:t[0]}});return a({file:e,scene:t})}function o(e){return i["h"].get("/uploader/file-space/get",e)}function n(e,t="interior-admin.image"){const a=Object(c["e"])({isProd:r["e"],async customApiCall(e){var t;const a=await i["h"].post("/uploader/anonymous/gene-post-object-sign",e);return null===(t=a.data)||void 0===t?void 0:t[0]}});return a({file:e,scene:t})}},9377:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snakeToKebab=t.camelToKebab=void 0;var i=c(a("dc53"));function c(e){return e&&e.__esModule?e:{default:e}}const r=(0,i["default"])(/[A-Z]/,e=>"-".concat(e.toLowerCase()));t.camelToKebab=r;const l=(0,i["default"])(/_/,()=>"-");t.snakeToKebab=l},a5f7:function(e,t,a){"use strict";a("7868")},d432:function(e,t,a){"use strict";var i=a("0ef7");t["a"]={createPost(e){return i["h"].post("/gactus-web/post/create",e)},updatePost(e){return i["h"].post("/gactus-web/post/update",e)},getPostByUser(e){return i["h"].post("/gactus/posts/by-user-v2",e)},getPostByTag(e){return i["h"].post("/gactus/posts/by-tag-v4",e)},getSinglePost(e){return i["h"].post("/gactus/single-post",e)},getYearReport(e){return i["h"].post("/gactus-web/v1/poster/larp_yearly_2022",e)},getTaskDetail(e){return i["h"].get("/gactus-web/v1/generative-task/user",e)},generateTaskConfirm(e){return i["h"].post("/gactus-web/v1/generative-task/confirm",e)},getTaskTip(e){return i["h"].get("/gactus-web/v1/generative-task/tips",e)},taskUpsert(e){return i["h"].post("/gactus-web/v1/generative-task/upsert",e)},taskAddTimes(e){return i["h"].post("/gactus-web/v1/generative-task/share/report",e)},feedBack(e){return i["h"].post("/gactus-web/v1/session/feedback",e)},getAnswer(e){return i["h"].get("/gactus-web/v1/session/get-answer",e)},sendQuestion(e){return i["h"].post("/gactus-web/v1/session/send-question",e)},getPostInfo(e){return i["h"].get("/gactus-web/post/detail-info",e)},getFavoriteEntryVote(e){return i["h"].post("/gactus-web/v1/favorite_entry_vote/get",e)}}},dc53:function(e,t,a){"use strict";function i(e,t){const a=RegExp(e,"g");return e=>{if("string"!==typeof e)throw new TypeError("expected an argument of type string, but got ".concat(typeof styleObj));return e.match(a)?e.replace(a,t):e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var c=i;t["default"]=c},dec5:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("i",{class:e.className,style:e.style,on:{click:e.onClick}},[e._t("default",(function(){return[e._v(e._s(e.unicode))]}))],2)},c=[],r=(a("14d9"),a("2b0e")),l=a("702e"),o=a.n(l),n=a("46ff"),s=a.n(n),u=a("1f72"),d=(a("3153"),{props:{extClass:{type:[String,Array,Object],default:""},extStyle:{type:[String,Object],default:""},name:{type:String,required:!0},size:{type:String,default:""},color:{type:String,default:""}},emits:["click"],setup(e,{emit:t}){const a=Object(r["computed"])(()=>{const{extClass:t}=e;return s()("du-icon",t)}),i=Object(r["computed"])(()=>{const{extStyle:t}=e;if("string"===typeof t){const a=[];return e.size&&a.push(`font-size:${e.size};`),e.color&&a.push(`color:${e.color};`),a.push(t),a.join("")}return o()({fontSize:e.size||void 0,color:e.color||void 0,...t})}),c=Object(r["computed"])(()=>{e.name||u.icons["question-circle-filled"];let t=u.icons[e.name];!t&&e.name.indexOf("_")>-1&&(t=u.icons[e.name.replace(/_/g,"-")]);const a={attention:"attention-circle",question:"question-circle",complete:"complete-circle","complete-filled":"complete-circle-filled",accountpay:"accountpay-circle-filled"};return!t&&a[e.name]&&(t=u.icons[a[e.name]]),t||u.icons["question-circle-filled"]});function l(...e){t("click",...e)}return{unicode:c,className:a,style:i,onClick:l}}}),f=d,p=(a("7432"),a("0c7c")),v=Object(p["a"])(f,i,c,!1,null,null,null);t["a"]=v.exports},e883:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=a("9377");function c(e,t=i.camelToKebab){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("expected an argument of type object, but got ".concat(typeof e));const a=Object.keys(e).map(a=>"".concat(t(a),": ").concat(e[a],";"));return a.join("\n")}var r=c;t["default"]=r}}]);