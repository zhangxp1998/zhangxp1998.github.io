(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13747e69"],{1135:function(t,e,i){},1358:function(t,e,i){},"20b7":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i("72f9"),s=i.n(r);const a=(t={precision:1})=>e=>({...e,cover:e.cover+"!fill_w360_h480_jpg",minPrice:e.minPrice&&s()(e.minPrice,{symbol:"",separator:"",precision:e.minPrice>10?t.precision:1}).format(),price7d:e.price7d&&s()(e.price7d,{symbol:"",separator:"",precision:e.price7d>10?t.precision:1}).format(),price:e.price&&s()(e.price,{symbol:"",separator:"",precision:e.price>10?t.precision:1}).format(),maxBuyPrice:e.maxBuyPrice&&s()(e.maxBuyPrice,{symbol:"",separator:"",precision:e.maxBuyPrice>10?t.precision:1}).format()})},2167:function(t,e,i){},"5df5":function(t,e,i){"use strict";var r=i("0ef7");e["a"]={getCouponSpuItemList(t){return r["h"].post("/stock-order/query-coupon-related-spus",t).then(t=>t.data)},getCouponRelatedProducts(t){return r["h"].get("/promotion/v3/query/get-coupon-related-products",t)},getPageGetCoupon(t){return r["p"].post("/promotions/action/get-page-get-coupon",{productTagId:t})},getPageGetCouponInfoByTemplateId(t){return r["h"].get("/promotion/v3/query/coupon-template",{couponTemplateId:t})},getPageGetCouponByTemplateId(t){return r["h"].post("/promotion/v3/action/manual-get-coupon",t)},queryUnclaimedCoupons(t){return r["h"].get("/promotion/v3/query/available-coupon-templates",t)},getShelfList(t){return r["h"].get("/shelf/shelves/list-universal",t)}}},"6b80":function(t,e,i){"use strict";i("2167")},"72f9":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){function t(a,n){if(!(this instanceof t))return new t(a,n);n=Object.assign({},i,n);var o=Math.pow(10,n.precision);this.intValue=a=e(a,n),this.value=a/o,n.increment=n.increment||1/o,n.groups=n.useVedic?s:r,this.s=n,this.p=o}function e(e,i){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],s=i.decimal,a=i.errorOnInvalid,n=i.fromCents,o=Math.pow(10,i.precision),c=e instanceof t;if(c&&n)return e.intValue;if("number"===typeof e||c)s=c?e.value:e;else if("string"===typeof e)a=new RegExp("[^-\\d"+s+"]","g"),s=new RegExp("\\"+s,"g"),s=(s=e.replace(/\((.*)\)/,"-$1").replace(a,"").replace(s,"."))||0;else{if(a)throw Error("Invalid Input");s=0}return n||(s=(s*o).toFixed(4)),r?Math.round(s):s}var i={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:function(t,e){var i=e.pattern,r=e.negativePattern,s=e.symbol,a=e.separator,n=e.decimal;e=e.groups;var o=(""+t).replace(/^-/,"").split("."),c=o[0];return o=o[1],(0<=t.value?i:r).replace("!",s).replace("#",c.replace(e,"$1"+a)+(o?n+o:""))},fromCents:!1},r=/(\d)(?=(\d{3})+\b)/g,s=/(\d)(?=(\d\d)+\d\b)/g;return t.prototype={add:function(i){var r=this.s,s=this.p;return t((this.intValue+e(i,r))/(r.fromCents?1:s),r)},subtract:function(i){var r=this.s,s=this.p;return t((this.intValue-e(i,r))/(r.fromCents?1:s),r)},multiply:function(e){var i=this.s;return t(this.intValue*e/(i.fromCents?1:Math.pow(10,i.precision)),i)},divide:function(i){var r=this.s;return t(this.intValue/e(i,r,!1),r)},distribute:function(e){var i=this.intValue,r=this.p,s=this.s,a=[],n=Math[0<=i?"floor":"ceil"](i/e),o=Math.abs(i-n*e);for(r=s.fromCents?1:r;0!==e;e--){var c=t(n/r,s);0<o--&&(c=c[0<=i?"add":"subtract"](1/r)),a.push(c)}return a},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(t){var e=this.s;return"function"===typeof t?t(this,e):e.format(this,Object.assign({},e,t))},toString:function(){var t=this.s,e=t.increment;return(Math.round(this.intValue/this.p/e)*e).toFixed(t.precision)},toJSON:function(){return this.value}},t}))},7480:function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));i("13d5");var r=i("f61f");function s(t){if(t&&0!==t.length)return{labelColor:t[0].labelColor||"#9dd87d",value:t.reduce((t,e,i)=>t+(i>0?"/":"")+e.value,"")}}const a=10;e["b"]={data(){return{items:[],pagination:{limit:a,offset:0},loadStatus:"",hasMore:!0}},computed:{busy(){return"loading"===this.loadStatus||(!this.hasMore||"failed"===this.loadStatus)}},methods:{async loadMore(){try{this.loadStatus="loading",await this.fetchList(),this.loadStatus="success"}catch(t){this.loadStatus="failed"}},reset(){this.pagination={limit:a,offset:0},this.loadStatus="",this.hasMore=!0,this.items=[]},async fetchPageJSON(t){const e=await Object(r["a"])("sale",t);return e}}}},"781a":function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"exchange-container",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e("header",{staticStyle:{"min-width":"100%","overflow-x":"scroll"}},[t.filters.length>0?e("Filters",{attrs:{filters:t.filters,filter:t.filter},on:{change:t.handleFilterTap}}):t._e()],1),e("div",{staticClass:"card-list"},t._l(t.items,(function(i){return e("div",{key:i.spuId,staticClass:"card-item"},[e("sale-card",{attrs:{filter:t.filter,item:i},on:{tap:function(e){return t.handleItemClick(i)}}})],1)})),0)])},s=[],a=(i("d9e2"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-wrap",on:{click:t.handleExchangeItemClick}},[e("img",{staticClass:"cover",attrs:{loading:"lazy",src:t.item.cover,alt:""}}),e("div",{staticClass:"right"},[e("div",{staticClass:"name otext2"},[t._v(t._s(t.item.name))]),"4"===t.filter.key&&t.item.buyingAmount?e("div",{staticClass:"buy-count"},[t._v(" 收购"+t._s(t.item.buyingAmount)+"个 ")]):t.item.soldAmount?e("div",{staticClass:"buy-count"},[t._v(" "+t._s(t.item.soldAmount)+"人购买 ")]):t._e(),e("div",{staticClass:"bottom"},[t.item.minOnlinePrice?e("img",{staticClass:"icon",attrs:{src:"https://cdn.qiandaoapp.com/admins/af7cbf35bd86417cee127cfcdca1560c.png"}}):t._e(),e("div",{staticClass:"price-wrap"},[e("span",{staticClass:"yuan"},[t._v("￥")]),"4"===t.filter.key&&t.item.maxBuyPrice?e("span",{staticClass:"price"},[t._v(" "+t._s(t.item.maxBuyPrice)+" ")]):t.item.minPrice?e("span",{staticClass:"price"},[t._v(" "+t._s(t.item.minPrice)+" ")]):e("span",{staticClass:"price"},[t._v(t._s(t.item.price))])])])])])}),n=[],o={props:{filter:{type:Object,default(){return{}}},item:{type:Object,default(){return{}}}},methods:{handleExchangeItemClick(){this.$emit("tap")}}},c=o,u=(i("c316"),i("0c7c")),l=Object(u["a"])(c,a,n,!1,null,"45a96df1",null),p=l.exports,d=i("dc7b"),f=i("7480"),h=i("20b7"),m=i("a849"),g=i("5df5"),v=i("ed08"),y=i("f408"),b=i("a0f0"),C={components:{SaleCard:p,Filters:d["a"]},mixins:[f["b"]],props:{displayType:{type:String,default:"default"},params:{type:Object}},data(){return{filter:{},filters:[]}},mounted(){const{sort:t}=null===this||void 0===this?void 0:this.params;t&&(this.filters=t,this.filter=null===t||void 0===t?void 0:t[0],b["a"].track("exchange_filter",{name:this.filter.name,key:this.filter.key}),y["a"].reportClick("exchange_filter",{value:JSON.stringify({name:this.filter.name,key:this.filter.key})}))},methods:{handleFilterTap(t){t.key!==this.filter.key&&(b["a"].track("exchange_filter",{name:t.name,key:t.key}),y["a"].reportClick("exchange_filter",{value:JSON.stringify({name:t.name,key:t.key})}),this.filter=t,this.reset(),this.loadMore())},async fetchList(){const{limit:t,offset:e}=this.pagination,i={coupon:g["a"].getCouponSpuItemList,default:m["a"].queryProductsByTag},{tagIds:r,spuIds:s,minPrice:a,maxPrice:n,couponIds:o}=this.params,c=i[this.displayType];if(!r&&!s&&!o)throw new Error("至少需要一个查询条件");const u=Object(v["a"])({tagIds:r,minPrice:a,couponIds:o,maxPrice:n,sort:this.filter.key,limit:t,offset:e}),{spus:l}=await c(u),p=l.map(Object(h["a"])());this.items=this.items.concat(p),p.length<f["a"]&&(this.hasMore=!1),this.pagination.offset=e+t},handleItemClick(t){const e="/pages-market/spu/index?defaultTab=exchange&spuId="+t.spuId;b["a"].track("exchange_item",{spuId:t.spuId,filter:this.filter.name}),y["a"].reportClick("exchange_item",{value:JSON.stringify({spuId:t.spuId,filter:this.filter.name})}),this.navigateTo({url:e})}}},k=C,_=(i("fcd5"),Object(u["a"])(k,r,s,!1,null,"45db65f6",null));e["a"]=_.exports},a849:function(t,e,i){"use strict";var r=i("0ef7"),s=i("4360");e["a"]={getSingleBanner(t){return r["p"].get("/ads",{slotKey:t,appid:s["a"].state.app.puppet.name})},queryDeliverOrderPrice(t){return r["h"].post("/order/action/query-deliver-order-price",t)},getSellingProducts(t){return r["h"].get("trade/user/products/action/get-selling-products",t)},doGrayscale(t){return r["h"].get("/stock-order/grayscale",t)},queryShelfExpressRule(t){return r["h"].post("/express/user/express-price-template/action/load-by-shelf",t)},queryProductsMatch(t){return r["p"].get("/products/match",t)},queryProductsByTag(t){return r["h"].post("/stock-order/bargin",t)},productPublish(t){return r["h"].post("/trade/products",t)},getAuctionField(t){return r["h"].get("/auctioneer/field/list",t)},auctionPublish(t){return r["h"].post("/c2c-web/v1/auctioneer/auction/create",t)},getTags(t){return r["h"].get("/trade/tags",t)}}},c02c:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"coupon-items-container"},[e("exchange",{attrs:{params:t.params,displayType:"coupon"}})],1)},s=[],a=i("781a"),n={name:"couponSpuList",components:{Exchange:a["a"]},data(){const{couponIds:t}=this.$route.query,e=JSON.parse(t);return{params:{couponIds:e,sort:[{key:"0",name:"销量"},{key:"1",name:"价格"},{key:"2",name:"最多在售"},{key:"3",name:"最新挂单"}]}}}},o=n,c=(i("d5f2"),i("0c7c")),u=Object(c["a"])(o,r,s,!1,null,"39866760",null);e["default"]=u.exports},c316:function(t,e,i){"use strict";i("1135")},d5f2:function(t,e,i){"use strict";i("1358")},dc7b:function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-container"},[e("div",{staticClass:"filters"},t._l(t.filters,(function(i){return e("div",{key:i.key,class:{filters__item:!0,"filters__item--active":t.filter.key===i.key},on:{click:function(e){return t.handleClick(i)}}},[t._v(" "+t._s(i.name)+" ")])})),0)])},s=[],a={props:{filters:{type:Array,required:!0},filter:{type:Object,required:!0}},mounted(){var t;this.filter=null===this||void 0===this||null===(t=this.filters)||void 0===t?void 0:t[0]},methods:{handleClick(t){this.$emit("change",t)}}},n=a,o=(i("6b80"),i("0c7c")),c=Object(o["a"])(n,r,s,!1,null,"211a7776",null);e["a"]=c.exports},dcdc:function(t,e,i){},fcd5:function(t,e,i){"use strict";i("dcdc")}}]);