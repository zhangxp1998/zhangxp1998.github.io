(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cc5a637"],{"684b":function(t,e,i){"use strict";var a=i("0ef7");e["a"]={getPostAnalysis(t){return a["d"].get("/analysis/"+t)},createPostReviewV3(t){return a["h"].post("/gactus/post-review-v3",t)},updatePostReviewV3(t){return a["h"].put("/gactus/post-review-v3",t)},deleteSpuMark(t){return a["h"].post("/gactus/delete-spu-mark",t)},createPostArticle(t){return a["h"].post("/gactus/posts-article",t)},getPostListByTopic(t){return a["h"].post("/gactus/topics/posts-v3",t)},getPostListByTag(t){return a["h"].post("/gactus/posts/by-tag-v4",t)},mark(t){return a["h"].post("/gactus-web/v1/mark/edit",t)},createPost(t){return a["h"].post("/gactus-web/post/create",t)},createPostStandard(t){return a["h"].post("/gactus-web/post/standard/create",t)},updatePostStandard(t){return a["h"].post("/gactus-web/post/standard/update",t)},comment(t){return a["h"].post("/cactus-api/comments",t)},getUserHobbyMark(t){return a["h"].post("/gactus/user-hobby-mark",t)},getUserMark(t){return a["h"].post("/gactus-web/v1/get-user-marks",t)},getUserHobbyList(t){return a["h"].get("/gactus-web/v1/interest/list",{uid:t})},gstoneGames(t){return a["h"].post("/config-go/redirect/gstoneGames",t)}}},"7cb2":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return r}));var a=i("0ef7"),s=i("0d94"),c=i("a37c");async function n(t,e="interior-admin.image"){const i=Object(s["e"])({isProd:c["e"],async customApiCall(t){var e;const i=await a["h"].post("/uploader/gene-post-object-sign",t);return null===(e=i.data)||void 0===e?void 0:e[0]}});return i({file:t,scene:e})}function o(t){return a["h"].get("/uploader/file-space/get",t)}function r(t,e="interior-admin.image"){const i=Object(s["e"])({isProd:c["e"],async customApiCall(t){var e;const i=await a["h"].post("/uploader/anonymous/gene-post-object-sign",t);return null===(e=i.data)||void 0===e?void 0:e[0]}});return i({file:t,scene:e})}},"9b2b":function(t,e,i){},a327:function(t,e,i){"use strict";i("9b2b")},cb35:function(t,e,i){"use strict";var a=i("0ef7");e["a"]={detail(t){return a["h"].get("/treasure/island/detail?id="+t)},join(t){return a["h"].post("/treasure/island/join",{id:t})}}},ccbb:function(t,e,i){"use strict";var a=i("0ef7");e["a"]={getStandardProducts(t){return a["p"].get(`/spus/${t}/standard-products`)},getSPUs(t){return a["p"].get("/v2/spus",t)},getSingleSpu(t,e){return a["p"].get("/v2/spus/"+t,e)},getUserPosters(t){return a["h"].post("/c2c-web/v1/poster/get-user-posters",t)},doProductsOffSale(t){return a["h"].post("/c2c-web/v1/c2c/products/off-sale",t)},plastSearchCategory(t){return a["h"].get("/plast/search/category/v3",t)},createUserPoster(t){return a["h"].post("/c2c-web/v1/poster/create-user-poster",t)},getSPUSpecs(t){return a["p"].get(`/spus/${t}/specs`)},updateC2cProductsByCategory(t){return a["h"].post("/c2c/products/m-update",t)},updateProductMulti(t){return a["h"].post("/c2c/products/multi-create",t)},createProductMulti(t){return a["h"].post("/c2c/products/m-create-update",t)},getProductsByCategory(t){return a["h"].get("/c2c/products/by-category",t)},getCategoryDetail(t,e){return a["p"].get("/v2/categories/"+t,e)},getCategories(t){return a["p"].get("/v2/categories",t)},getRecommendCategories(t){return a["p"].get(`/v2/categories/${t}/recommend`)},getCategoryTags(t){return a["p"].get(`/v2/categories/${t}/config`)},getTag(t,e){return a["p"].get("/tags/"+t,e)},getHotTags(t){return a["p"].get(`/tags/${t}/config`)},getTags(t){return a["p"].get("/tags",t)},searchCategories(t){return a["p"].get("/v2/categories",t)},getSettings(){return a["p"].get("/settings")},changeWishes(t){return a["p"].post("/wish-list",t)},updateUserSettings(t){return a["p"].put("/settings",t)},getPosterColumnConfig(t){return a["l"].get("/action/get-products-poster",t)},getPosterThemes(t){return a["l"].get("/action/get-poster-themes",t,{isErrorDefaultTip:!1})},getWishList(t){return a["p"].get("/wish-list",t,{isErrorDefaultTip:!1})},getWishMatches(t){return a["p"].get("/products/match/wish-list",t,{isErrorDefaultTip:!1})},getDemandProductList(t){return a["p"].get("/products/match/demand-list",t)},getTradeInfo(t){return a["p"].post("/action/get-trade-info",t)},get360DegImages(t){return a["p"].get(`/spus/${t}/360-degree-images`)},getBarginSpus(t){return a["p"].post("/stock-order/bargin",t)},getSpecsByMPName(t){return a["p"].get("/specs/aciton/get-by-app-name",t)},getDistribution(t){return a["p"].get("/feeds/chaowan",t)},getSellingCategories(t){return a["p"].get("/products/action/get-selling-categories",t)},getCategoryCount(t){return a["p"].get("/products/action/get-category-product-count",t)},getSpuList(t){return a["h"].post("/treasure/spus/search/simple-info",t)},getSpuHeader(t){return a["h"].get("/treasure/flora/v2/spu/simpleInfo",t)},getSpuDetails(t){return a["h"].get("/treasure/flora/v1/spu/detailInfo",t)},getTagList(t){return a["h"].get("/treasure/tags",t)},getTagDetails(t){return a["h"].get("/treasure/flora/v1/tag/detailInfo",t)},getTagDetailsV2(t){return a["h"].get("/treasure/flora/v2/tag/simpleInfo",t)},searchSpuInTag(t){return a["h"].get("/plast/search/spu",t)},searchTag(t){return a["h"].get("/plast/search/tag",t)},getXiaokaWebConfig(){return a["e"].get("/vinyl/web.json")},getTagsV2(t){return a["h"].get("/armory/entry/tags",t)}}},f548:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"es-cards"},[e("div",{staticClass:"nav"},[this.isChooseMode?e("div",{staticClass:"main-btn solid",on:{click:t.openPuzzleModal}},[t._v("请选择")]):e("div",{staticClass:"main-btn line",on:{click:t.openPuzzleModal}},[t._v(" 卡面拼图 ")]),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"searchbox",attrs:{placeholder:"搜索柄图名称"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),e("div",{staticClass:"filter-group"},[e("div",{class:["filter",{active:"{}"!==JSON.stringify(this.selectedAvatar)}],on:{click:function(e){return t.handleFilterClick("avatar")}}},["{}"===JSON.stringify(this.selectedAvatar)?[t._v(" 角色 ")]:[t._v(t._s(this.selectedAvatar.name))],e("span",{class:["arrow",{active:"avatar"===this.activedFilter&&this.isOpenModal}]},[t._v(" ▼ ")])],2),e("div",{class:["filter",{active:"{}"!==JSON.stringify(this.selectedType)}],on:{click:function(e){return t.handleFilterClick("type")}}},["{}"===JSON.stringify(this.selectedType)?[t._v(" 属性 ")]:[t._v(t._s(this.selectedType.name))],e("span",{class:["arrow",{active:"type"===this.activedFilter&&this.isOpenModal}]},[t._v(" ▼ ")])],2),e("div",{class:["filter",{active:"{}"!==JSON.stringify(this.selectedStar)}],on:{click:function(e){return t.handleFilterClick("star")}}},["{}"===JSON.stringify(this.selectedStar)?[t._v(" 稀有度 ")]:[t._v(t._s(this.selectedStar.name))],e("span",{class:["arrow",{active:"star"===this.activedFilter&&this.isOpenModal}]},[t._v(" ▼ ")])],2),e("div",{class:["filter",{active:"{}"!==JSON.stringify(this.selectedTime)}],on:{click:function(e){return t.handleFilterClick("time")}}},["{}"===JSON.stringify(this.selectedTime)?[t._v(" 时间 ")]:[t._v(t._s(this.selectedTime.name))],e("span",{class:["arrow",{active:"time"===this.activedFilter&&this.isOpenModal}]},[t._v(" ▼ ")])],2)])]),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getSpuList,expression:"getSpuList"}],staticClass:"spu-list",attrs:{"infinite-scroll-disabled":"true","infinite-scroll-distance":"100"}},["{}"!==JSON.stringify(this.selectedAvatar)||"{}"!==JSON.stringify(this.selectedType)||"{}"!==JSON.stringify(this.selectedStar)||"{}"!==JSON.stringify(this.selectedTime)||""!==this.query?e("div",{staticClass:"result"},[t._v(" 共 "),this.spuList.length>0&&"0"!==t.count?[t._v(" "+t._s(t.count)+" ")]:[t._v(t._s(this.spuList.length))],t._v(" 个柄图 "),e("span",{staticClass:"reset-button",on:{click:t.reset}},[t._v("重置")])],2):t._e(),this.isChooseMode?t._l(this.spuList,(function(i,a){return e("div",{key:a,staticClass:"spu-item",on:{click:function(e){return t.handleChooseSpu(i.cover,i.offcialImage)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.cover,expression:"item.cover"}],staticClass:"spu-cover",attrs:{alt:"cover"}}),e("div",{staticClass:"spu-name"},[t._v(t._s(i.name))])])})):t._l(this.spuList,(function(i,a){return e("div",{key:a,staticClass:"spu-item",on:{click:function(e){return t.handleSpuClick(i.id)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.cover,expression:"item.cover"}],staticClass:"spu-cover",attrs:{alt:"cover"}}),e("div",{staticClass:"spu-name"},[t._v(t._s(i.name))])])})),t.loading?e("div",{staticClass:"loader"},[t._v("加载中..")]):t._e()],2),e("transition",{attrs:{name:"fade"}},[t.isOpenModal?e("div",{staticClass:"modal-wrap"},[e("div",{staticClass:"mask",on:{click:t.handleMaskClick}})]):t._e()]),e("transition",{attrs:{name:"fade"}},[t.showIslandModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"mask",on:{click:t.handleMaskClick}}),e("div",{staticClass:"island-modal"},[e("img",{staticStyle:{width:"80px",margin:"10px 0","border-radius":"10px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/56b87ea7984c3685b544abd77b5cd371.jpg",alt:"cover"}}),e("div",{staticStyle:{"margin-bottom":"10px","font-size":"17px"}},[t._v(" 偶像梦幻祭岛 ")]),e("div",{staticStyle:{"margin-bottom":"10px",color:"#aaa"}},[t._v(" "+t._s(this.joinCountText)+"人加入 ")]),e("div",{staticStyle:{"margin-bottom":"30px",padding:"0 40px"}},[t._v(" 谷美、吐槽、痛包、贴贴，与其他制作人一起交流 ")]),e("div",{staticClass:"single-button",on:{click:t.handleIslandClick}},[t._v("去看看")]),e("div",{staticClass:"single-button",on:{click:t.joinIsland}},[t._v("马上加入")])])]):t._e()]),e("transition",{attrs:{name:"popup"}},[t.isOpenModal?e("div",{staticClass:"option-group"},[e("div",{staticClass:"option-list"},["type"===this.activedFilter?t._l(this.type,(function(i,a){return e("div",{key:a,staticClass:"option",on:{click:function(e){return t.handleOptionClick("type",i)}}},[t._v(" "+t._s(i.name)+" ")])})):"star"===this.activedFilter?t._l(this.star,(function(i,a){return e("div",{key:a,staticClass:"option",on:{click:function(e){return t.handleOptionClick("star",i)}}},[t._v(" "+t._s(i.name)+" ")])})):"avatar"===this.activedFilter?t._l(this.avatar,(function(i,a){return e("div",{key:a,staticClass:"team"},[e("div",{staticClass:"team-cover"},[i.coverUrl?e("img",{staticClass:"team-cover-img",attrs:{src:i.coverUrl,alt:"cover"}}):t._e(),e("span",{staticClass:"team-name"},[t._v(t._s(i.teamName))])]),t._l(i.avatars,(function(i,a){return e("div",{key:a,staticClass:"option",on:{click:function(e){return t.handleOptionClick("avatar",i)}}},[t._v(" "+t._s(i.name)+" ")])}))],2)})):"time"===this.activedFilter?t._l(this.time,(function(i,a){return e("div",{key:a,staticClass:"option",on:{click:function(e){return t.handleOptionClick("time",i)}}},[t._v(" "+t._s(i.name)+" ")])})):t._e()],2)]):t._e()]),e("transition",{attrs:{name:"fade"}},[t.isOpenPuzzleModal?e("div",{staticClass:"modal-wrap fullScreen"},[e("div",{staticClass:"mask",on:{click:t.handleMaskClick}})]):t._e()]),e("div",{class:["puzzle-group",{hidden:!t.isOpenPuzzleModal}]},[e("div",{staticClass:"column-option",style:{display:t.image?"none":"block"}},[e("div",{class:["column",{active:2===this.columns}],on:{click:function(e){return t.handleSwitchColumn(2)}}},[t._v(" 2列 ")]),e("div",{class:["column",{active:3===this.columns}],on:{click:function(e){return t.handleSwitchColumn(3)}}},[t._v(" 3列 ")]),e("div",{class:["column",{active:4===this.columns}],on:{click:function(e){return t.handleSwitchColumn(4)}}},[t._v(" 4列 ")]),e("div",{class:["column",{active:5===this.columns}],on:{click:function(e){return t.handleSwitchColumn(5)}}},[t._v(" 5列 ")])]),e("div",{staticClass:"style-option-group",style:{display:t.image?"none":"block"}},[e("div",{staticClass:"style-option"},[e("span",{staticClass:"style-option-title"},[t._v("背景色")]),t._l(this.bgColorGroup,(function(i,a){return e("div",{key:a,class:["color",{active:t.bgColor===i}],style:{backgroundColor:i},on:{click:function(e){t.bgColor=i}}})}))],2),e("div",{staticClass:"style-option"},[e("span",{staticClass:"style-option-title"},[t._v("作品名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{placeholder:"给作品取个名字吧"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),e("div",{class:["pic-group",{two:2===this.columns},{three:3===this.columns},{four:4===this.columns},{five:5===this.columns}],style:{backgroundColor:t.bgColor,borderRight:"1.5px solid"+t.bgColor,borderLeft:"1.5px solid"+t.bgColor},attrs:{id:"canvas"}},[e("div",{staticClass:"pic",style:{transform:t.pic1RotateY?"rotateY(180deg)":"",borderTop:"3px solid"+t.bgColor,borderRight:"1.5px solid "+t.bgColor,borderLeft:"1.5px solid "+t.bgColor}},[this.pic1?e("img",{style:{height:100+10*t.pic1Scale+"%",transform:"rotate("+5*t.pic1Rotate+"deg)"},attrs:{src:this.pic1,id:"pic1",alt:"pic"}}):e("div",{staticClass:"set-btn",on:{click:function(e){return t.handleChooseBtn(1)}}},[t._v("设置")])]),e("div",{staticClass:"pic",style:{transform:t.pic2RotateY?"rotateY(180deg)":"",borderTop:"3px solid "+t.bgColor,borderRight:"1.5px solid "+t.bgColor,borderLeft:"1.5px solid "+t.bgColor}},[this.pic2?e("img",{style:{height:100+10*t.pic2Scale+"%",transform:"rotate("+5*t.pic2Rotate+"deg)"},attrs:{src:this.pic2,id:"pic2",alt:"pic"}}):e("div",{staticClass:"set-btn",on:{click:function(e){return t.handleChooseBtn(2)}}},[t._v("设置")])]),e("div",{staticClass:"pic",style:{transform:t.pic3RotateY?"rotateY(180deg)":"",display:this.columns>=3?"inline-block":"none",borderTop:"3px solid "+t.bgColor,borderRight:"1.5px solid "+t.bgColor,borderLeft:"1.5px solid "+t.bgColor}},[this.pic3?e("img",{style:{height:100+10*t.pic3Scale+"%",transform:"rotate("+5*t.pic3Rotate+"deg)"},attrs:{src:this.pic3,id:"pic3",alt:"pic"}}):e("div",{staticClass:"set-btn",on:{click:function(e){return t.handleChooseBtn(3)}}},[t._v("设置")])]),e("div",{staticClass:"pic",style:{transform:t.pic4RotateY?"rotateY(180deg)":"",display:this.columns>=4?"inline-block":"none",borderTop:"3px solid "+t.bgColor,borderRight:"1.5px solid "+t.bgColor,borderLeft:"1.5px solid "+t.bgColor}},[this.pic4?e("img",{style:{height:100+10*t.pic4Scale+"%",transform:"rotate("+5*t.pic4Rotate+"deg)"},attrs:{src:this.pic4,id:"pic4",alt:"pic"}}):e("div",{staticClass:"set-btn",on:{click:function(e){return t.handleChooseBtn(4)}}},[t._v("设置")])]),e("div",{staticClass:"pic",style:{transform:t.pic5RotateY?"rotateY(180deg)":"",display:this.columns>=5?"inline-block":"none",borderTop:"3px solid "+t.bgColor,borderRight:"1.5px solid "+t.bgColor,borderLeft:"1.5px solid "+t.bgColor}},[this.pic5?e("img",{style:{height:100+10*t.pic5Scale+"%",transform:"rotate("+5*t.pic5Rotate+"deg)"},attrs:{src:this.pic5,id:"pic5",alt:"pic"}}):e("div",{staticClass:"set-btn",on:{click:function(e){return t.handleChooseBtn(5)}}},[t._v("设置")])]),e("div",{staticClass:"pic-footer",style:{backgroundColor:t.bgColor}},[e("div",{staticClass:"footer-title"},[t._v(t._s(this.title))]),e("img",{staticClass:"qrcode",attrs:{src:"https://cdn.qiandaoapp.com/interior/images/37ec62b4718385cfd075ac1cb8168dfe.png"}}),t._m(0)])]),t.image||""===this.pic1&&""===this.pic2&&""===this.pic3&&""===this.pic4&&""===this.pic5?t._e():e("div",{class:["edit-btn-group",{two:2===this.columns},{three:3===this.columns},{four:4===this.columns},{five:5===this.columns}]},[e("div",{staticClass:"edit-btn-wrap"},[this.pic1?[e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.enlarge(1)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/c191208ccd5c3fe3e5e51b666db948df.png",alt:"enlarge"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.narrow(1)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/a02251abb7bb056bfe25d8b4b5179fc6.png",alt:"narrow"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateLeft(1)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b2ffaa9d9b9982349ccc8d16af70f7f9.png",alt:"rotateLeft"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateRight(1)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b4a8f886021ad42908bda302b529a233.png",alt:"rotateRight"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){t.pic1RotateY=!t.pic1RotateY}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/4302661d9bbad90ae43d6e858c4341f4.png",alt:"rotateY"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.handleChooseBtn(1)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/d03079ab83e08da0547612b87889afe9.png",alt:"change"}})])])]:t._e()],2),e("div",{staticClass:"edit-btn-wrap"},[this.pic2?[e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.enlarge(2)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/c191208ccd5c3fe3e5e51b666db948df.png",alt:"enlarge"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.narrow(2)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/a02251abb7bb056bfe25d8b4b5179fc6.png",alt:"narrow"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateLeft(2)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b2ffaa9d9b9982349ccc8d16af70f7f9.png",alt:"rotateLeft"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateRight(2)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b4a8f886021ad42908bda302b529a233.png",alt:"rotateRight"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){t.pic2RotateY=!t.pic2RotateY}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/4302661d9bbad90ae43d6e858c4341f4.png",alt:"rotateY"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.handleChooseBtn(2)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/d03079ab83e08da0547612b87889afe9.png",alt:"change"}})])])]:t._e()],2),this.columns>=3?e("div",{staticClass:"edit-btn-wrap"},[this.pic3?[e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.enlarge(3)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/c191208ccd5c3fe3e5e51b666db948df.png",alt:"enlarge"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.narrow(3)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/a02251abb7bb056bfe25d8b4b5179fc6.png",alt:"narrow"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateLeft(3)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b2ffaa9d9b9982349ccc8d16af70f7f9.png",alt:"rotateLeft"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateRight(3)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b4a8f886021ad42908bda302b529a233.png",alt:"rotateRight"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){t.pic3RotateY=!t.pic3RotateY}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/4302661d9bbad90ae43d6e858c4341f4.png",alt:"rotateY"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.handleChooseBtn(3)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/d03079ab83e08da0547612b87889afe9.png",alt:"change"}})])])]:t._e()],2):t._e(),this.columns>=4?e("div",{staticClass:"edit-btn-wrap"},[this.pic4?[e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.enlarge(4)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/c191208ccd5c3fe3e5e51b666db948df.png",alt:"enlarge"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.narrow(4)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/a02251abb7bb056bfe25d8b4b5179fc6.png",alt:"narrow"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateLeft(4)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b2ffaa9d9b9982349ccc8d16af70f7f9.png",alt:"rotateLeft"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateRight(4)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b4a8f886021ad42908bda302b529a233.png",alt:"rotateRight"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){t.pic4RotateY=!t.pic4RotateY}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/4302661d9bbad90ae43d6e858c4341f4.png",alt:"rotateY"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.handleChooseBtn(4)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/d03079ab83e08da0547612b87889afe9.png",alt:"change"}})])])]:t._e()],2):t._e(),this.columns>=5?e("div",{staticClass:"edit-btn-wrap"},[this.pic5?[e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.enlarge(5)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/c191208ccd5c3fe3e5e51b666db948df.png",alt:"enlarge"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.narrow(5)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/a02251abb7bb056bfe25d8b4b5179fc6.png",alt:"narrow"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateLeft(5)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b2ffaa9d9b9982349ccc8d16af70f7f9.png",alt:"rotateLeft"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.rotateRight(5)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/b4a8f886021ad42908bda302b529a233.png",alt:"rotateRight"}})])]),e("div",[e("div",{staticClass:"edit-btn",on:{click:function(e){t.pic5RotateY=!t.pic5RotateY}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/admins/4302661d9bbad90ae43d6e858c4341f4.png",alt:"rotateY"}})]),e("div",{staticClass:"edit-btn",on:{click:function(e){return t.handleChooseBtn(5)}}},[e("img",{staticStyle:{width:"20px"},attrs:{src:"https://cdn.qiandaoapp.com/interior/images/d03079ab83e08da0547612b87889afe9.png",alt:"change"}})])])]:t._e()],2):t._e()]),t.image?[e("img",{staticClass:"draw",attrs:{src:t.image}}),e("div",{staticClass:"render-btn",on:{click:t.redo}},[t._v("重新调整")]),e("div",{staticClass:"render-btn",staticStyle:{color:"white","background-color":"#6b56d9"},on:{click:t.publishPost}},[t._v(" 马上发布 ")])]:[e("div",{class:["clear-btn",{disable:""===this.pic1&""===this.pic2&""===this.pic3&""===this.pic4&""===this.pic5||this.drawing}],on:{click:t.resetPic}},[t._v(" 清空 ")]),e("div",{class:["render-btn","short",{disable:""===this.pic1&""===this.pic2&""===this.pic3&""===this.pic4&""===this.pic5||this.drawing},{loader:this.drawing}],on:{click:t.drawImage}},[t.drawing?[t._v("图片预览中..")]:[t._v("下一步")]],2)]],2)],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer-tip"},[t._v(" es卡面拼图 "),e("br"),t._v(" 扫码生成 ")])}],c=(i("d9e2"),i("ccbb")),n=i("ed08"),o=i("c0e9"),r=i.n(o),d=i("2f62"),l=i("7cb2"),p=i("cb35"),h=i("684b"),u={data(){return{loading:!1,spuList:[],searchResult:[],query:"",isOpenModal:!1,selectedAvatar:{},selectedType:{},selectedStar:{},selectedTime:{},activedFilter:"",count:"0",avatar:[{coverUrl:"https://cdn.qiandaoapp.com/interior/images/2d1b77532c3a2253704f9081572473ee.PNG",teamName:"fine",avatars:[{id:"4873",name:"天祥院英智"},{id:"4885",name:"日日树涉"},{id:"1003145",name:"姬宫桃李"},{id:"1003147",name:"伏见弓弦"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/85c790990a3bb46a86be1327e62c8f71.PNG",teamName:"流星队",avatars:[{id:"3970",name:"守泽千秋"},{id:"4044",name:"深海奏汰"},{id:"3972",name:"高峯翠"},{id:"5216",name:"南云铁虎"},{id:"5214",name:"仙石忍"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/f782475b8630441099549caa67f7facd.PNG",teamName:"Trickstar",avatars:[{id:"1003131",name:"冰鹰北斗"},{id:"3383",name:"明星昴流"},{id:"3966",name:"游木真"},{id:"3969",name:"衣更真绪"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/2e881855ae11d80c57d95ef5a5db3a91.PNG",teamName:"Alkaloid",avatars:[{id:"1003178",name:"天城一彩"},{id:"1003177",name:"白鸟蓝良"},{id:"1003179",name:"礼濑真宵"},{id:"1003180",name:"风早巽"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/41b89d26b248593b7cf1d5cf91d8c613.PNG",teamName:"Eden",avatars:[{id:"1003139",name:"乱凪砂"},{id:"1003140",name:"七种茨"},{id:"1003144",name:"巴日和"},{id:"1003141",name:"涟纯"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/81b6666d4b54b4a843319cb7a2b71ce5.png",teamName:"Valkyrie",avatars:[{id:"5213",name:"斋宫宗"},{id:"4824",name:"影片美伽"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/10bf54745745e146ffcfd584addf1018.png",teamName:"2wink",avatars:[{id:"4870",name:"葵日向"},{id:"4869",name:"葵裕太"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/7b197a74b381355a26f0b8a275265750.png",teamName:"Crazy: B",avatars:[{id:"1003183",name:"天城燐音"},{id:"1003181",name:"椎名丹希"},{id:"1003182",name:"HiMERU"},{id:"1003184",name:"樱河琥珀"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/119c2a63f7375e16952df237a5c0efcb.png",teamName:"UNDEAD",avatars:[{id:"4871",name:"朔间零"},{id:"4072",name:"羽风薰"},{id:"3971",name:"大神晃牙"},{id:"4876",name:"乙狩阿多尼斯"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/44c181a2b3610e2fc7db0c9a2683d8a3.png",teamName:"Ra*bits",avatars:[{id:"5039",name:"真白友也"},{id:"5038",name:"仁兔成鸣"},{id:"5040",name:"天满光"},{id:"4875",name:"紫之创"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/4ab180034e8abd75635dd7680835ff23.png",teamName:"红月",avatars:[{id:"1003148",name:"莲巳敬人"},{id:"1003150",name:"鬼龙红郎"},{id:"1003149",name:"神崎飒马"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/8e31dfdf3c107b7d04bab888a3887e50.png",teamName:"Knights",avatars:[{id:"3967",name:"朱樱司"},{id:"5317",name:"月永雷欧"},{id:"4874",name:"朔间凛月"},{id:"3659",name:"濑名泉"},{id:"3965",name:"鸣上岚"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/658355c11660f3365f8027fc9ad6988d.png",teamName:"Swtich",avatars:[{id:"1003133",name:"逆先夏目"},{id:"1003136",name:"青叶纺"},{id:"1003135",name:"春川宙"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/a5dfbe974a5c436c6be853792eb531a3.png",teamName:"MaM",avatars:[{id:"1003138",name:"三毛缟斑"}]},{coverUrl:"https://cdn.qiandaoapp.com/interior/images/aaafd7cede95a107bc6f7643667d6c3e.png",teamName:"Double Face",avatars:[{id:"1003138",name:"三毛缟斑"},{id:"1003184",name:"樱河琥珀"}]},{coverUrl:"",teamName:"老师",avatars:[{id:"1003337",name:"门章臣"},{id:"1003338",name:"佐贺美阵"}]}],type:[{name:"花前",id:"1398644"},{name:"花后",id:"1398645"}],star:[{name:"五星",id:"1398641"},{name:"四星",id:"1398642"},{name:"三星",id:"1398646"},{name:"二星",id:"1398647"},{name:"一星",id:"1398648"}],time:[{name:"一代",id:"1436382"},{name:"二代",id:"1436383"}],isOpenPuzzleModal:!1,isChooseMode:!1,columns:3,pic1:"",pic2:"",pic3:"",pic4:"",pic5:"",selectedColumn:1,image:"",drawing:!1,pic1Scale:0,pic2Scale:0,pic3Scale:0,pic4Scale:0,pic5Scale:0,pic1Rotate:0,pic2Rotate:0,pic3Rotate:0,pic4Rotate:0,pic5Rotate:0,pic1RotateY:!1,pic2RotateY:!1,pic3RotateY:!1,pic4RotateY:!1,pic5RotateY:!1,bgColorGroup:["#6b56d9","#fd5959","#56c756","#f9b02f","#519dea","#9f9f9f"],bgColor:"#6b56d9",title:"",showIslandModal:!1,postId:""}},computed:{...Object(d["mapState"])("user",["me"]),offset(){return this.spuList.length}},watch:{query(t,e){this.spuList=[],this.getSpuList()}},mounted(){var t;this.me&&this.me.nickName?this.title=this.me.nickName+"的作品":this.title="我的作品";const e=null===(t=this.$route)||void 0===t?void 0:t.query;e.puzzle&&this.$nextTick(()=>{this.isOpenPuzzleModal=!0})},methods:{async getSpuList(){this.loading=!0;var t=["1398630"];if("{}"!==JSON.stringify(this.selectedType)&&(t=t.concat(this.selectedType.id)),"{}"!==JSON.stringify(this.selectedStar)&&(t=t.concat(this.selectedStar.id)),"{}"!==JSON.stringify(this.selectedAvatar)&&(t=t.concat(this.selectedAvatar.id)),"{}"!==JSON.stringify(this.selectedTime)&&(t=t.concat(this.selectedTime.id)),""===this.query){var e={andTagIds:t,limit:80,offset:this.offset,orderBy:"hotV2",propertyIds:["53290"]};try{const t=await c["a"].getSpuList(e);if("{}"!==JSON.stringify(t.data)){const e=t.data.list;for(var i=0;i<e.length;i++)e[i].profiles&&(e[i].offcialImage=e[i].profiles[0].profiles[0].dataValue);this.spuList=this.spuList.concat(e),this.count=t.data.count}else this.count="0"}catch(s){console.error(s)}}else{const e={q:this.query,"start-index":0,"max-results":80,andTagIds:t.join(),propertyIds:"53290",scene:"plugin-es-cards"};try{const t=await c["a"].searchSpuInTag(e),i=t.data.items;for(var a=0;a<i.length;a++)i[a].cover=i[a].imgs.cover,i[a].entry_profile&&(i[a].offcialImage=i[a].entry_profile[0].profiles[0].dataValue);this.spuList=this.spuList.concat(i),this.count=t.data.total_count}catch(s){console.error(s)}}this.loading=!1},handleFilterClick(t){this.isOpenModal&&this.activedFilter===t?this.isOpenModal=!1:(this.isOpenModal=!0,this.activedFilter=t)},handleMaskClick(){this.isOpenModal=!1,this.isOpenPuzzleModal=!1,this.showIslandModal=!1},handleSpuClick(t){const e=`/pages-market/spu/index?spuId=${t}&from=plugin-es-cards`;(Object(n["h"])()||Object(n["d"])())&&this.navigateTo({url:e})},handleOptionClick(t,e){"type"===t?this.selectedType=e:"star"===t?this.selectedStar=e:"avatar"===t?this.selectedAvatar=e:"time"===t&&(this.selectedTime=e),this.spuList=[],this.getSpuList(),this.isOpenModal=!1},reset(){this.selectedAvatar={},this.selectedStar={},this.selectedType={},this.selectedTime={},this.query="",this.spuList=[],this.getSpuList()},openPuzzleModal(){"{}"===JSON.stringify(this.me)?this.logIn():this.isOpenPuzzleModal=!0},logIn(){const t="/modules/pages/common-login/index";Object(n["h"])()||Object(n["d"])()?this.navigateTo({url:t}):this.$toast.show({title:"请下载“千岛”App"})},handleChooseBtn(t){this.handleMaskClick(),this.isChooseMode=!0,this.selectedColumn=t,this.$toast.show({title:"请选择卡面"})},async handleChooseSpu(t,e){var i="";i=e?await this.urlToBase64(e+"!lfit_w1080_png"):await this.urlToBase64(t+"!lfit_w1080_png"),1===this.selectedColumn?(this.pic1=i,setTimeout(()=>{document.getElementById("pic1").scrollIntoView({inline:"end"}),document.getElementById("pic1").scrollIntoView({inline:"center"})},200)):2===this.selectedColumn?(this.pic2=i,setTimeout(()=>{document.getElementById("pic2").scrollIntoView({inline:"end"}),document.getElementById("pic2").scrollIntoView({inline:"center"})},200)):3===this.selectedColumn?(this.pic3=i,setTimeout(()=>{document.getElementById("pic3").scrollIntoView({inline:"end"}),document.getElementById("pic3").scrollIntoView({inline:"center"})},200)):4===this.selectedColumn?(this.pic4=i,setTimeout(()=>{document.getElementById("pic4").scrollIntoView({inline:"end"}),document.getElementById("pic4").scrollIntoView({inline:"center"})},200)):5===this.selectedColumn&&(this.pic5=i,setTimeout(()=>{document.getElementById("pic5").scrollIntoView({inline:"end"}),document.getElementById("pic5").scrollIntoView({inline:"center"})},200)),this.$toast.show({title:"已选择"}),this.isChooseMode=!1,this.openPuzzleModal()},handleSwitchColumn(t){t!==this.columns&&(this.columns=t)},drawImage(){this.drawing=!0,this.title||(this.title="我的作品"),this.$nextTick(()=>{setTimeout(()=>{r()(document.getElementById("canvas"),{allowTaint:!1,useCORS:!0,backgroundColor:this.bgColor,scale:4}).then(t=>{t.toBlob(async t=>{const e=Object(n["i"])(),i=new File([t],e+".jpeg"),a=await Object(l["b"])(i,"activity-temp.image");this.image=a.url},"image/jpeg")}).catch(()=>{})},3e3)})},redo(){this.image="",this.drawing=!1},resetPic(){this.pic1="",this.pic2="",this.pic3="",this.pic4="",this.pic5="",this.pic1Scale=0,this.pic2Scale=0,this.pic3Scale=0,this.pic4Scale=0,this.pic5Scale=0,this.pic1Rotate=0,this.pic2Rotate=0,this.pic3Rotate=0,this.pic4Rotate=0,this.pic5Rotate=0,this.pic1RotateY=!1,this.pic2RotateY=!1,this.pic3RotateY=!1,this.pic4RotateY=!1,this.pic5RotateY=!1},handleIslandClick(){const t="/pages-market/island/index?id=300003";(Object(n["h"])()||Object(n["d"])())&&this.navigateTo({url:t})},enlarge(t){1===t&&this.pic1Scale<10?this.pic1Scale+=1:2===t&&this.pic2Scale<10?this.pic2Scale+=1:3===t&&this.pic3Scale<10?this.pic3Scale+=1:4===t&&this.pic4Scale<10?this.pic4Scale+=1:5===t&&this.pic5Scale<10&&(this.pic5Scale+=1)},narrow(t){1===t&&this.pic1Scale>0?this.pic1Scale-=1:2===t&&this.pic2Scale>0?this.pic2Scale-=1:3===t&&this.pic3Scale>0?this.pic3Scale-=1:4===t&&this.pic4Scale>0?this.pic4Scale-=1:5===t&&this.pic5Scale>0&&(this.pic5Scale-=1)},rotateLeft(t){1===t?this.pic1Rotate-=1:2===t?this.pic2Rotate-=1:3===t?this.pic3Rotate-=1:4===t?this.pic4Rotate-=1:5===t&&(this.pic5Rotate-=1)},rotateRight(t){1===t?this.pic1Rotate+=1:2===t?this.pic2Rotate+=1:3===t?this.pic3Rotate+=1:4===t?this.pic4Rotate+=1:5===t&&(this.pic5Rotate+=1)},urlToBase64(t){return new Promise((e,i)=>{var a=new Image;a.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(a,0,0);var i=t.toDataURL("image/png");e(i)},a.setAttribute("crossOrigin","Anonymous"),a.src=t,a.onerror=()=>{i(new Error("图片流异常"))}})},async joinIsland(){try{await p["a"].join(300003);this.$toast.show({title:"✅ 已加入，帖子发布中.."}),this.publishPost(),this.handleMaskClick()}catch(t){console.error(t)}},async publishPost(){try{const e=await p["a"].detail(300003);if(this.joinCountText=e.data.joinCountText,e.data.joined&&!0===e.data.joined){const e={attachments:[{meta:{},type:"image",url:this.image}],content:"",labels:[{propertyTagId:"1436337",title:"卡面拼图",relatedType:"tag",relatedId:"1445921"}],mentionRelatedObjects:{},privacy:"public",reviewStatistic:"",islandId:"300003",meta:{plugin:{id:"es-cards"}}};if(this.postId){e.postId=this.postId;try{await h["a"].updatePostStandard(e);this.$toast.show({title:"✅ 发布成功"});const t="/pages-community/post/spu-detail?postId="+this.postId;setTimeout(()=>{(Object(n["h"])()||Object(n["d"])())&&this.navigateTo({url:t})},300)}catch(t){console.error(t)}}else try{const t=await h["a"].createPostStandard(e);this.postId=t.data.id,this.$toast.show({title:"✅ 发布成功"});const i="/pages-community/post/spu-detail?postId="+this.postId;setTimeout(()=>{(Object(n["h"])()||Object(n["d"])())&&this.navigateTo({url:i})},300)}catch(t){console.error(t)}}else this.$toast.show({title:"加入岛后，才能发布"}),this.showIslandModal=!0}catch(t){console.error(t)}}}},m=u,g=(i("a327"),i("0c7c")),v=Object(g["a"])(m,a,s,!1,null,null,null);e["default"]=v.exports}}]);