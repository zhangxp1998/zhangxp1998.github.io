(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0f30b1c"],{"34a4":function(e,t,n){},"3dce":function(e,t,n){},4478:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("f8c9"),n("14d9");function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return a=i()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=Function.bind.apply(e,i),s=new a;return n&&o(s,n.prototype),s},a.apply(null,arguments)}},"5a2a":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t(e.componentName,{tag:"component",on:{"change-compoent":e.handleChangeComponent}})},i=[],a=n("2b0e"),s=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"phone-change-form"},[t("div",{staticClass:"container"},[t("div",{staticClass:"container-inner"},[t("div",{staticClass:"section"},[e._m(0),t("div",{staticClass:"section-item"},[t(n.vanField,{attrs:{readonly:"","right-icon":"arrow",name:"datetimePicker",value:n.registerFormatTime,label:"注册时间",placeholder:"请选择"},on:{click:function(e){n.showRegisterTime=!0}}})],1),t("div",{staticClass:"section-item"},[t(n.vanField,{attrs:{type:"textarea",autosize:"",rows:"1",maxlength:"200",placeholder:"请输入"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"u-flex-c label"},[e._v(" 收件信息 "),t(n.DuIcon,{attrs:{size:"12px",name:"question-circle",color:"rgba(12, 12, 12, 0.6)",extStyle:{marginLeft:"2px"}},on:{click:function(e){return n.handleClickTip("addressInfoTip")}}})],1)]},proxy:!0}]),model:{value:n.addressInfo,callback:function(e){n.addressInfo=e},expression:"addressInfo"}})],1),t("div",{staticClass:"section-item"},[t(n.vanField,{attrs:{type:"textarea",autosize:"",rows:"1",maxlength:"200",placeholder:"请输入"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"u-flex-c label"},[e._v(" 收付通 "),t(n.DuIcon,{attrs:{size:"12px",name:"question-circle",color:"rgba(12, 12, 12, 0.6)",extStyle:{marginLeft:"2px"}},on:{click:function(e){return n.handleClickTip("certificateInfoTip")}}})],1)]},proxy:!0}]),model:{value:n.certificateInfo,callback:function(e){n.certificateInfo=e},expression:"certificateInfo"}})],1)]),t("div",{staticClass:"section"},[t("div",{staticClass:"section-item"},[t("div",{staticClass:"section-title"},[e._v("支付凭证 (选填)")]),t(n.DuIcon,{attrs:{size:"16px",name:"question-circle",color:"rgba(98, 94, 118, 1)",extStyle:{margin:"0 4px"}},on:{click:function(e){return n.handleClickTip("payInfoTip")}}}),t("div",{staticClass:"section-subTitle"},[e._v("支付宝/微信的账单截图")])],1),t("div",{staticClass:"section-item upload-container",attrs:{"scroll-x":"true"}},[t(n.Uploader,{attrs:{multiple:""},model:{value:n.fileList,callback:function(e){n.fileList=e},expression:"fileList"}},[t("div",{staticClass:"u-flex-col-c-c upload-btn"},[t(n.DuIcon,{attrs:{size:"24px",name:"plus-circle",color:"rgba(145, 139, 159, 1)",extStyle:{marginBottom:"2px"}}}),e._v(" 图片 ")],1)])],1)]),t("div",{staticClass:"section"},[e._m(1),t("div",{staticClass:"section-item"},[t(n.vanField,{attrs:{type:"tel",placeholder:"输入换绑的新手机号","error-message":n.errPhone},on:{input:n.formatPhoneNumber,blur:n.checkPhone},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"required"},[e._v("新手机号")])]},proxy:!0},{key:"button",fn:function(){return[t(n.DuButton,{attrs:{text:n.verifyCodeBtnText,size:"mini",type:n.counting?"text":"text-primary",extStyle:{color:n.counting?"rgba(186, 181, 196, 1)":"",fontSize:"12px",fontWeight:500,lineHeight:"18px"},disabled:n.counting},on:{click:n.handleGetVerifyCode}})]},proxy:!0}]),model:{value:n.newPhone,callback:function(e){n.newPhone=e},expression:"newPhone"}})],1),t("div",{staticClass:"section-item"},[t(n.vanField,{attrs:{type:"digit",placeholder:"请输入新手机号验证码","error-message":n.errCode},on:{input:n.handleInputCode,blur:n.checkCode},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"required"},[e._v("验证码")])]},proxy:!0}]),model:{value:n.code,callback:function(e){n.code=e},expression:"code"}})],1)]),t("div",{staticClass:"u-flex-c-c bottom-tip"},[t("div",[e._v("无可用验证方式，点击这里")]),t(n.DuButton,{attrs:{text:"联系客服",size:"mini",type:"text",extStyle:{marginLeft:"2px",color:"#2B263B",fontSize:"12px",fontWeight:500,lineHeight:"18px"}},on:{click:n.handleContact}})],1)])]),t("div",{directives:[{name:"safe-area-inset-fixed",rawName:"v-safe-area-inset-fixed"}],staticClass:"footer"},[t(n.DuButton,{attrs:{text:"提交申请",size:"large",type:"primary",full:"",extStyle:{fontSize:"16px",fontWeight:500,lineHeight:"24px"}},on:{click:n.handleSubmit}})],1),t(n.VanActionSheet,{attrs:{"close-on-click-overlay":!1},model:{value:n.showRegisterTime,callback:function(e){n.showRegisterTime=e},expression:"showRegisterTime"}},[t(n.VanDatetimePicker,{attrs:{type:"date",title:"选择年月日","max-date":n.maxDate},on:{confirm:n.handleRegisterTimeConfirm,cancel:function(e){n.showRegisterTime=!1}}})],1),t(n.ConfirmSubmit,{attrs:{visible:n.confirmVisible,loading:n.loading},on:{close:function(e){n.confirmVisible=!1},confirm:n.handleConfirm}})],1)},r=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"section-item"},[t("div",{staticClass:"section-title"},[e._v("帐号相关信息 (选填)")]),t("div",{staticClass:"section-subTitle ml-8"},[e._v(" 更多的填写有利于提高审核通过率 ")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"section-item"},[t("div",{staticClass:"section-title"},[e._v("换绑新手机号")])])}],c=(n("e930"),n("8f80")),l=(n("d1cf"),n("ee83")),u=(n("2cbd"),n("ab2c")),d=(n("be7f"),n("565f")),f=(n("e7e5"),n("d399")),p=(n("e17f"),n("2241")),m=(n("d9e2"),n("4360")),v=n("a18c"),h=n("39d4"),g=n("dec5"),b=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.DuPopup,{attrs:{title:"换绑手机确认",type:"center",titleAlign:"center",visible:e.visible},on:{close:n.handleClose,touchmove:function(e){e.stopPropagation(),e.preventDefault()}}},[t("div",{staticClass:"confirm-submit"},[t("div",{staticClass:"content"},[e._v(" 审核通过后，您可以直接新手机登录， 180天将内无法再次换绑 ")]),t("div",{staticClass:"tip"},[e._v(" 请留意平台的通知短信，如需信息核实平台会主动与您联系。 ")]),t("div",{staticClass:"footer"},[t(n.DuButton,{attrs:{text:"确定",size:"large",type:"primary",full:"",extStyle:{fontSize:"16px",fontWeight:500,lineHeight:"24px"},loading:e.loading},on:{click:n.handleConfirm}}),t(n.DuButton,{attrs:{text:"取消",size:"large",type:"info",full:"",extStyle:{marginLeft:"9px",color:"#625E76",fontSize:"16px",fontWeight:500,lineHeight:"24px"}},on:{click:n.handleClose}})],1)])])},y=[],x=n("ae40"),C={__name:"confirm-submit",props:{visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,{emit:t}){const n=e,o=()=>{t("close")},i=()=>{t("confirm")};return{__sfc:!0,props:n,emit:t,handleClose:o,handleConfirm:i,DuPopup:x["a"],DuButton:h["a"]}}},_=C,k=(n("f8d4"),n("0c7c")),O=Object(k["a"])(_,b,y,!1,null,"32c2b820",null),S=O.exports,P=n("4cce"),j=n("7cb2"),w=n("5a0c"),T=n.n(w);const I=1e3,D=60*I,B=60*D,F=24*B;function R(e){const t=Math.floor(e/F),n=Math.floor(e%F/B),o=Math.floor(e%B/D),i=Math.floor(e%D/I),a=Math.floor(e%I);return{total:e,days:t,hours:n,minutes:o,seconds:i,milliseconds:a}}function z(e,t){return Math.floor(e/1e3)===Math.floor(t/1e3)}function M(e){return requestAnimationFrame(e)}function A(e){cancelAnimationFrame(e)}function N(e){return"countdown-"+e}function V(e){return void 0!==e&&null!==e}function q(e){let t,n=null;const o=N((null===e||void 0===e?void 0:e.countTimeId)||""),i=JSON.parse(localStorage.getItem(o))||{},s=Object(a["ref"])(i.counting||!1),r=Object(a["ref"])(i.remain||e.time);t=i.endTime||null;const c=Object(a["computed"])(()=>R(r.value)),l=()=>{s.value=!1,A(n),d()},u=()=>Math.max(t-Date.now(),0),d=()=>{localStorage.setItem(o,JSON.stringify({counting:s.value,remain:r.value,endTime:t}))},f=t=>{r.value=t,V(e.onChange)&&e.onChange(c.value),d(),0===t&&(l(),localStorage.removeItem(o),V(e.onFinish)&&e.onFinish())},p=()=>{n=M(()=>{s.value&&(f(u()),r.value>0&&p())})},m=()=>{n=M(()=>{if(s.value){const e=u();z(e,r.value)&&0!==e||f(e),r.value>0&&m()}})},v=()=>{e.millisecond?p():m()},h=()=>{(!s.value||t&&t<=Date.now())&&(t=Date.now()+r.value),s.value=!0,v()},g=(t=e.time)=>{l(),r.value=t};return s.value&&r.value>0&&h(),Object(a["onBeforeUnmount"])(()=>{l(),d()}),{start:h,pause:l,reset:g,current:c,counting:s}}var H=n("dd65"),E=n.n(H);const L={addressInfoTip:"请填写常用的收件信息；举例：姓名xxx、手机号xxx、常用收件地址xxx",certificateInfoTip:"请填写完整的收付通信息；举例：姓名xxx、手机号xxx、身份证号xxx、银行卡号xxx",payInfoTip:"请上传在微信或支付宝内，于千岛平台交易的支付账单截图（支持多张）"};var W=n("6dea"),G={__name:"phone-change-form",emits:["change-compoent"],setup(e,{emit:t}){const n=e=>{const t=/^1[3-9]\d{9}$/;return t.test(e)},{proxy:o}=Object(a["getCurrentInstance"])(),i=new Date,s=Object(a["reactive"])({registerTime:"",addressInfo:"",certificateInfo:"",payInfo:[],newPhone:"",code:""}),r=Object(a["reactive"])({errPhone:"",errCode:""}),b=Object(a["ref"])(!1),y=Object(a["ref"])(!1),x=Object(a["ref"])([]),C=Object(a["ref"])(!1),_=new Date(i.getFullYear(),i.getMonth(),i.getDate()),k=6e4,{start:O,reset:w,current:I,counting:D}=q({time:k,countTimeId:"verifyCodeCountTime",onChange:e=>{e.seconds<=0&&w()},onFinish:()=>w()}),B=Object(a["computed"])(()=>s.registerTime?T()(+s.registerTime).format("YYYY-MM-DD"):""),F=Object(a["computed"])(()=>m["a"].state.user.me),R=Object(a["computed"])(()=>60*I.value.minutes+I.value.seconds),z=Object(a["computed"])(()=>D.value?`重新发送(${R.value}s)`:"获取验证码"),M=e=>{s.registerTime=T()(e).valueOf(),y.value=!1},A=e=>{const t=L[e];Object(p["a"])({message:t,confirmButtonColor:"rgb(26, 176, 255)"})},N=()=>{o.navigateTo({url:"/pages-me/echo/questions"})};let V=!1;const H=W["a"].debounce(async()=>{try{if(!s.newPhone)throw new Error("请填写手机号");if(r.errPhone)throw new Error("请填写正确的手机格式");if(V)return;V=!0,f["a"].loading({message:"正在获取验证码",forbidClick:!0}),await P["a"].sendVerifyCode({type:"NEW_PHONE",phone:s.newPhone.replace(/\s/g,"")}),Object(f["a"])("验证码已发送"),O()}catch(e){Object(f["a"])(null===e||void 0===e?void 0:e.message)}finally{V=!1}},500,!1),G=e=>{const t=e.replace(/\D/g,""),n=t.replace(/(\d{3})(\d{0,4})(\d{0,4})/,(function(e,t,n,o){let i=t;return n&&(i+=" "+n),o&&(i+=" "+o),i}));s.newPhone=n.slice(0,13)},U=e=>s.newPhone?n(s.newPhone.replace(/\s/g,""))?(r.errPhone="",!0):(r.errPhone="手机号格式不正确！",!1):(r.errPhone="请输入换绑的新手机号！",!1),Y=e=>{const t=e.replace(/\D/g,"");s.code=t.slice(0,6)},J=e=>s.code?(r.errCode="",!0):(r.errCode="请输入验证码",!1),$=()=>{U()&&J()&&(C.value=!0)},K=async()=>{try{var e,n;b.value=!0;const o=await Promise.all(x.value.map(e=>Object(j["a"])(e.file,"user-trade.image")));s.payInfo=o.map(e=>e.url);const i=E()({...s,userId:null===(e=F.value)||void 0===e?void 0:e.id,oldPhone:null===(n=v["a"].currentRoute.query)||void 0===n?void 0:n.phone,newPhone:s.newPhone.replace(/\s/g,"")},e=>""===e||void 0===e||null===e||Array.isArray(e)&&0===e.length);await P["a"].phoneChange(i),t("change-compoent","PhoneChangeSuccess")}catch(o){console.log("err",o),Object(f["a"])(null===o||void 0===o?void 0:o.message)}finally{b.value=!1,C.value=!1}},{addressInfo:Q,certificateInfo:X,payInfo:Z,newPhone:ee,code:te}=Object(a["toRefs"])(s),{errPhone:ne,errCode:oe}=Object(a["toRefs"])(r);return{__sfc:!0,emit:t,isMobile:n,proxy:o,time:i,form:s,errMsg:r,loading:b,showRegisterTime:y,fileList:x,confirmVisible:C,maxDate:_,COUNTDOWN_TIMEOUT:k,start:O,reset:w,current:I,counting:D,registerFormatTime:B,me:F,countDownTime:R,verifyCodeBtnText:z,handleRegisterTimeConfirm:M,handleClickTip:A,handleContact:N,isGetVerifyCodeProcessing:V,handleGetVerifyCode:H,formatPhoneNumber:G,checkPhone:U,handleInputCode:Y,checkCode:J,handleSubmit:$,handleConfirm:K,addressInfo:Q,certificateInfo:X,payInfo:Z,newPhone:ee,code:te,errPhone:ne,errCode:oe,vanField:d["a"],VanActionSheet:u["a"],VanDatetimePicker:l["a"],Uploader:c["a"],DuButton:h["a"],DuIcon:g["a"],ConfirmSubmit:S}}},U=G,Y=(n("f74c"),Object(k["a"])(U,s,r,!1,null,"0db7d8a3",null)),J=Y.exports,$=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"success"},[t(n.Empty,{attrs:{image:"https://cdn.qiandaoapp.com/admins/c5725e0cceb165232a7e7544302bb919.png"}}),e._m(0),t(n.DuButton,{attrs:{text:"返回首页",size:"large",type:"recommend",extStyle:{fontSize:"16px",fontWeight:500,lineHeight:"24px"}},on:{click:n.handleGoHome}})],1)},K=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"description"},[t("div",[e._v("已提交申请")]),t("div",[e._v("预计3 个工作日完成审核")])])}],Q=(n("91d5"),n("f0ca")),X={__name:"phone-change-success",setup(e){const{proxy:t}=Object(a["getCurrentInstance"])(),n=()=>{t.switchTab({url:"/pages-tab/home/index"})};return{__sfc:!0,proxy:t,handleGoHome:n,Empty:Q["a"],DuButton:h["a"]}}},Z=X,ee=(n("ec60"),Object(k["a"])(Z,$,K,!1,null,"54f67a48",null)),te=ee.exports,ne={components:{PhoneChangeForm:J,PhoneChangeSuccess:te},setup(){const e=Object(a["ref"])("PhoneChangeForm"),t=t=>{e.value=t};return{componentName:e,handleChangeComponent:t}}},oe=ne,ie=Object(k["a"])(oe,o,i,!1,null,null,null);t["default"]=ie.exports},"7bee":function(e,t,n){},"7cb2":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c}));var o=n("0ef7"),i=n("0d94"),a=n("a37c");async function s(e,t="interior-admin.image"){const n=Object(i["e"])({isProd:a["e"],async customApiCall(e){var t;const n=await o["h"].post("/uploader/gene-post-object-sign",e);return null===(t=n.data)||void 0===t?void 0:t[0]}});return n({file:e,scene:t})}function r(e){return o["h"].get("/uploader/file-space/get",e)}function c(e,t="interior-admin.image"){const n=Object(i["e"])({isProd:a["e"],async customApiCall(e){var t;const n=await o["h"].post("/uploader/anonymous/gene-post-object-sign",e);return null===(t=n.data)||void 0===t?void 0:t[0]}});return n({file:e,scene:t})}},"8c90":function(e,t,n){},adfa:function(e,t,n){"use strict";n("7bee")},ae40:function(e,t,n){"use strict";var o=function(){var e=this,t=e._self._c;return e.innerVisible?t("div",{staticClass:"du-popup"},[t("div",{class:e.maskClassName,style:e.maskStyleFormat,on:{click:e.handleMaskClick}},[e._t("maskContent")],2),t("div",{class:e.className,style:e.style},[e.headerVisible?t("div",{class:["du-popup__header","du-popup__header--"+e.titleAlign]},[t("div",{staticClass:"du-popup__title"},[e._v(e._s(e.title))]),e.closable?t("div",{staticClass:"du-popup__close",on:{click:e.handleClose}}):e._e()]):e._e(),e._t("default")],2)]):e._e()},i=[],a=n("2b0e"),s=n("e475"),r=n.n(s),c=n("702e"),l=n.n(c),u={props:{title:{type:String,default:""},titleAlign:{type:String,default:"default"},headerVisible:{type:Boolean,default:!0},type:{type:String,default:"center"},visible:{type:Boolean,default:!1},extClass:{type:[String,Array,Object],default:""},extStyle:{type:[String,Object],default:""},maskClick:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},maskClass:{type:[String,Array,Object],default:""},maskStyle:{type:[String,Object],default:""}},setup(e,{emit:t}){const n=Object(a["ref"])(e.visible),o=Object(a["ref"])(!1),i=Object(a["computed"])(()=>{const{extStyle:t}=e;return"string"===typeof t?t:l()({...t})}),s=Object(a["computed"])(()=>{const{extClass:t}=e;return r()("du-popup__content",t,{["du-popup--"+e.type]:!0,[`du-popup--${e.type}-open`]:o.value})}),c=Object(a["computed"])(()=>{const{maskStyle:t}=e;return"string"===typeof t?t:l()({...t})}),u=Object(a["computed"])(()=>{const{maskClass:t}=e;return r()("du-popup__mask",t,{"du-popup__mask--open":o.value})}),d=()=>{e.maskClick&&(t("update:visible",!1),t("close"))},f=()=>{t("update:visible",!1),t("close")};return Object(a["watch"])(()=>e.visible,t=>{t?n.value=t:setTimeout(()=>{n.value=e.visible},400),t?setTimeout(()=>{e.visible&&(o.value=!0)},100):o.value=!1},{immediate:!0}),{innerVisible:n,style:i,className:s,maskStyleFormat:c,maskClassName:u,handleMaskClick:d,handleClose:f}}},d=u,f=(n("adfa"),n("0c7c")),p=Object(f["a"])(d,o,i,!1,null,null,null);t["a"]=p.exports},d44e:function(e,t,n){var o=n("9bf2").f,i=n("1a2d"),a=n("b622"),s=a("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,s)&&o(e,s,{configurable:!0,value:t})}},e475:function(e,t,n){var o,i;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)){if(o.length){var s=a.apply(null,o);s&&e.push(s)}}else if("object"===i){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var r in o)n.call(o,r)&&o[r]&&e.push(r)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):(o=[],i=function(){return a}.apply(t,o),void 0===i||(e.exports=i))})()},ec60:function(e,t,n){"use strict";n("3dce")},f74c:function(e,t,n){"use strict";n("34a4")},f8c9:function(e,t,n){var o=n("23e7"),i=n("da84"),a=n("d44e");o({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},f8d4:function(e,t,n){"use strict";n("8c90")}}]);