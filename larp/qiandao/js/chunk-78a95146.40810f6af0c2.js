(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a95146"],{"18e5":function(t,e,i){"use strict";function a(t,e){return t/7500*100+e}function s(t,e="rem"){const i=/rpx/;return!window&&wx?t:"number"===typeof t?a(t,e):i.test(t)?a(+t.replace(i,""),e):t}i.d(e,"a",(function(){return s}))},"50fd":function(t,e,i){},5388:function(t,e,i){"use strict";i("b25f")},5863:function(t,e,i){"use strict";i("8d60")},7716:function(t,e,i){},"806f":function(t,e,i){"use strict";i("d705")},8501:function(t,e,i){"use strict";i.r(e);var a=function(){var t,e=this,i=e._self._c,a=e._self._setupProxy;return i("div",{staticClass:"plugin-template-list"},[i(a.ChecklistGuide,{attrs:{userInfo:a.me},on:{"create-custom-checklist":a.handleCreateCustomCheckList}}),i(a.VanList,{attrs:{"immediate-check":!1,finished:!a.hasMore,"finished-text":"到底了～"},on:{load:a.fetchPluginTemplateList},model:{value:a.isLoading,callback:function(t){a.isLoading=t},expression:"isLoading"}},e._l(a.list,(function(t){return i(a.PluginTemplateItem,{key:null===t||void 0===t?void 0:t.id,attrs:{item:t},on:{"handle-rank":a.handleRank}})})),1),null!==(t=a.list)&&void 0!==t&&t.length||a.isLoading?e._e():i(a.Empty,{attrs:{image:"https://cdn.qiandaoapp.com/admins/438d469aaf9f771eaa3b2ffb054c2a68.png",description:"空空如也~"}})],1)},s=[],n=(i("91d5"),i("f0ca")),l=(i("2994"),i("2bdd")),r=i("2b0e"),o=i("4360"),c=i("a18c"),u=function(){var t=this,e=t._self._c,i=t._self._setupProxy;return e("div",{staticClass:"plugin-template-item",on:{click:i.handleToRank}},[e("div",{staticClass:"u-flex-c-sb"},[e("div",{staticClass:"template-title otext"},[t._v(t._s(i.templateTitle))]),e("div",{staticClass:"u-flex-c participate-info"},[t._v(" 已参加 "),e("span",{staticClass:"participate-count"},[t._v(t._s(i.participationCount))]),t._v(" 次 "),e(i.DuIcon,{attrs:{name:"arrow-heavy-right",color:"#2B263B",size:"8px"}})],1)]),e("div",{staticClass:"u-flex-c creator"},[t._v(" 由 "),e("div",{staticClass:"u-flex-c creator-info"},[e(i.Avatar,{attrs:{url:i.creatorAvatar,size:32}}),e("div",{staticClass:"creator-name otext"},[t._v(t._s(i.creatorName))])],1),t._v(" 创建 ")]),t._l(i.optionStatisticInfos,(function(a,s){return e("div",{key:s,staticClass:"u-flex-c-sb vote-option"},[e("div",{staticClass:"entry-cover"},[e(i.Thumbnail,{attrs:{url:null===a||void 0===a?void 0:a.entryCover,size:{style:"!lfit_w240_jpg"},borderRadius:"12rpx"}})],1),e("div",{staticClass:"entry-info"},[e("div",{staticClass:"entry-name"},[t._v(t._s(null===a||void 0===a?void 0:a.optionName))]),e("div",{staticClass:"u-flex-c mt-4"},[t._v(" "+t._s(null===a||void 0===a?void 0:a.entryName)+" "),e("div",{staticStyle:{width:"8px",height:"1px",margin:"0 6px",transform:"rotate(-90deg)",background:"rgba(0, 0, 0, 0.12)"}}),t._v(" "+t._s(null===a||void 0===a?void 0:a.voteCount)+" 票 ")])])])}))],2)},d=[],p=i("dec5"),m=i("c91e"),v=i("d17e"),f={__name:"plugin-template-item",props:{item:{type:Object,default:()=>({})}},emits:["handle-rank"],setup(t,{emit:e}){const i=t,a=Object(r["computed"])(()=>{var t;return null===(t=i.item)||void 0===t?void 0:t.title}),s=Object(r["computed"])(()=>{var t,e;return null===(t=i.item)||void 0===t||null===(e=t.pluginStatisticInfo)||void 0===e?void 0:e.participationCount}),n=Object(r["computed"])(()=>{var t,e;return null===(t=i.item)||void 0===t||null===(e=t.user)||void 0===e?void 0:e.nickName}),l=Object(r["computed"])(()=>{var t,e;return(null===(t=i.item)||void 0===t||null===(e=t.user)||void 0===e?void 0:e.avatar)||""}),o=Object(r["computed"])(()=>{var t,e;return((null===(t=i.item)||void 0===t||null===(e=t.pluginStatisticInfo)||void 0===e?void 0:e.optionStatisticInfos)||[]).map(t=>t.optionItems&&t.optionItems.length>0?t.optionItems[0]:null).filter(t=>null!==t).slice(0,3)}),c=()=>{e("handle-rank",i.item)};return{__sfc:!0,props:i,emit:e,templateTitle:a,participationCount:s,creatorName:n,creatorAvatar:l,optionStatisticInfos:o,handleToRank:c,DuIcon:p["a"],Avatar:m["a"],Thumbnail:v["a"]}}},h=f,g=(i("f3f6"),i("0c7c")),b=Object(g["a"])(h,u,d,!1,null,"6718a80d",null),y=b.exports,C=function(){var t,e=this,i=e._self._c,a=e._self._setupProxy;return i("div",{staticClass:"checklist-guide"},[i("div",{staticClass:"checklist-guide-content"},[i("div",{staticClass:"u-flex-c"},[i(a.Avatar,{attrs:{url:null===(t=e.userInfo)||void 0===t?void 0:t.avatar,size:40}}),i("span",{staticClass:"text"},[e._v("快来创建你的个人喜好表")])],1),i(a.DuButton,{attrs:{text:"立即创建",size:"mini",type:"recommend",extStyle:{fontSize:"12px",fontWeight:500,lineHeight:"18px"}},on:{click:a.handleCreateCustomCheckList}})],1)])},w=[],A=i("39d4"),_={__name:"checklist-guide",props:{userInfo:{type:[Object,null],default:null}},emits:"create-custom-checklist",setup(t,{emit:e}){const i=()=>{e("create-custom-checklist")};return{__sfc:!0,emit:e,handleCreateCustomCheckList:i,Avatar:m["a"],DuButton:A["a"]}}},x=_,S=(i("5863"),Object(g["a"])(x,C,w,!1,null,"0f10b184",null)),j=S.exports,I=i("d2a7"),O=i("ed08"),k=i("2e3f"),q=i("1816"),D=i.n(q),R={__name:"plugin-template-list",setup(t){Object(r["useCssVars"])((t,e)=>({"6b245fb1":e.bottomHeight}));const{proxy:e}=Object(r["getCurrentInstance"])(),i=Object(r["ref"])([]),a=10,s=Object(r["ref"])(0),u=Object(r["ref"])(!1),d=Object(r["ref"])(!1);Object(r["onBeforeMount"])(()=>{"{}"===JSON.stringify(p.value)&&v(),f()});const p=Object(r["computed"])(()=>o["a"].state.user.me),m=Object(r["computed"])(()=>Object(O["d"])()?"50px":"0px"),v=()=>{const t="/modules/pages/common-login/index";(Object(O["h"])()||Object(O["d"])())&&e.navigateTo({url:t})},f=async()=>{try{var t;u.value=!0;const{data:{templates:e=[]}}=await I["a"].getPluginTemplate({pluginKey:(null===(t=c["a"].currentRoute.query)||void 0===t?void 0:t.pluginKey)||"custom-checklist",limit:a,offset:s.value,withStatisticInfo:!0}),n=e.filter(t=>{var e,i;return(null===t||void 0===t||null===(e=t.pluginStatisticInfo)||void 0===e||null===(i=e.optionStatisticInfos)||void 0===i?void 0:i.length)>0});i.value=[...i.value,...n],d.value=(null===e||void 0===e?void 0:e.length)>=a,s.value+=a}catch(e){console.log(e)}finally{u.value=!1}},h=()=>{var t;const e=D()(location.origin+"/plugin/custom-checklist/template",!0);e.query={pluginName:null===(t=c["a"].currentRoute.query)||void 0===t?void 0:t.pluginKey};const i=encodeURIComponent(e.toString());let a="/modules/pages/web-view/index?url="+i;Object(O["d"])()&&(a="https://qiandao.cn/web?sharable=true&url="+i),Object(k["a"])(a)},g=t=>{const e=D()(location.origin+"/plugin/custom-checklist/realtime-ranking",!0);e.query={pluginName:null===t||void 0===t?void 0:t.pluginKey,templateId:null===t||void 0===t?void 0:t.id};const i=encodeURIComponent(e.toString());let a="/modules/pages/web-view/index?url="+i;Object(O["d"])()&&(a="https://qiandao.cn/web?sharable=true&url="+i),Object(k["a"])(a)};return{__sfc:!0,proxy:e,list:i,limit:a,offset:s,isLoading:u,hasMore:d,me:p,bottomHeight:m,login:v,fetchPluginTemplateList:f,handleCreateCustomCheckList:h,handleRank:g,VanList:l["a"],Empty:n["a"],PluginTemplateItem:y,ChecklistGuide:j}}},z=R,B=(i("806f"),Object(g["a"])(z,a,s,!1,null,"15dae7a7",null));e["default"]=B.exports},"8d60":function(t,e,i){},b25f:function(t,e,i){},c91e:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ec-avatar",style:{width:""+t.realSize,height:""+t.realSize}},[e("div",{staticClass:"ec-avatar__img"},[e("Thumbnail",{attrs:{size:{width:"100%",height:"100%"},url:t.url,defaultUrl:t.defaultAvatar}})],1),t.verified?e("img",{staticClass:"ec-avatar__org",attrs:{src:i("d146"),alt:"",mode:"aspectFit"}}):t._e(),t._t("default")],2)},s=[],n=i("d17e"),l=i("18e5"),r={components:{Thumbnail:n["a"]},props:{size:{type:[Number,String],default:96},url:{type:String,required:!0},verified:{type:Boolean,default:!1}},data(){return{defaultAvatar:""}},computed:{realSize(){const{size:t}=this;return Object(l["a"])(t+"rpx")}}},o=r,c=(i("5388"),i("0c7c")),u=Object(c["a"])(o,a,s,!1,null,null,null);e["a"]=u.exports},cd4a:function(t,e,i){"use strict";i("50fd")},d146:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAVFBMVEUAAAD/////////////////////////////////////////////ugD/wgD/sgBXLwL/ygD/zwH/yjLdogH/+up/UQL/8cubaQL/6623gAH/1F3/5Y+KKH4eAAAAC3RSTlMA2/QPpVYniLxxO/vwjn8AAANGSURBVFjDvZiJlqIwEEUbCM1ighjZ+f//HIGqvIQEwfHMPPsoZrm+qjKY9M9/0G+aiTyPojwXRfr7d4gij2+OYlF8iEqK6BZUnibXIRl8eIqK5BsIFBcXKCnCOXZUnlkRt0vK3pfHt9I0Xdc0fq7fFK2MXcIw6QdJT4PLig45aWwzZoMwqMHJdHlAsQfNj6DmU44d0eAD4AicQFy/oDQIJwRqkJ/EqzRq1D3eS3eo1x4jrKycCoFlXnpBqU85yHTphgRKvWph1a9rMPn9+mr8RDYmQ17qS3qY/BSWmZhrBMqJdINqeWZ0fVmTseOZGULj1QGn22enYPCDJo7tS/2zVuuDXqhV1mqDa56VEibiKtVqHd/fNz03BKHarbFVjOVqCVoGnN+lb9Gd1KoNWy+vzzvga7tiO3HixDQrcnNnSaUMqQWG2YMTVc5lUqSeZ4zLjE0vMwiKNDlRxRQTdS7J7FuaYjRuDf1IY9Yn1AqpGVaz/Pk9B0C5ae0o+YlrnlirclIsBNEH35pQZ2t9ZkgNC+XidzAHITmpdadBr/QmSkAhlDxDoRoCSCIhDMSEIaQDjC37q9PCGvwCI7AUuqWX/iRKPMJMCy88qAliIGnmSosoXTMSGAQl96JIzJX0dTvCqPWxiD2YbKOfIEixXXBp+reriqKSPdsCYLtEwbHAtelW6xWmU80AYOHrZy0GuRcFQy9mPmBYDNbSRDeJbHCqfWFpvhSHS2Wi4hT5cm7qAsmBKkRFBfM1IcOUY45qR2oNptoaKnxIZWJK3Vu6NkOrbXw1MqW36Myyb+n2zXj23ODngOiwgwSL/a5EVxV5YbUcky+NvcluWzIwQNKD7YxoXC8W4ceXVbh2KmjLTl9BTJrw2+tvTDSP5b/qOY5PNJhefYMZ304njWkILcasbmDGUsStg+vmSF14L1piC1ld0HC0w85u8HMma2PsndBybK/1CQXbdPHuKNVMbyCoNLaP3qHh1JDu7CPV6aFsCIJwfgElzAFo8sKBE1AuHDW7edJkY5rBAOVACeoF4cBqSXjZDX5/vj3RlwgMun56hooTUITVeAb6CgKlIg7mRJQ/nylJRbTzkeGfN5+hyjTLxEtZlpZA/Dv9AUcQuokAd6DHAAAAAElFTkSuQmCC"},d17e:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ec-thumbnail",style:{width:t.cssWidth,height:t.cssHeight,"border-radius":t.cssBorderRadius,...t.extStyle}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.showDisplayImage,expression:"showDisplayImage"}],staticClass:"ec-thumbnail__image",attrs:{src:t.displaySrc,alt:t.alt,loading:"lazy","lazy-load":"",mode:"aspectFill"},on:{click:t.handlePreview}}),e("img",{directives:[{name:"show",rawName:"v-show",value:!t.showDisplayImage,expression:"!showDisplayImage"}],staticClass:"ec-thumbnail__image",attrs:{src:t.defaultUrl,alt:"默认图片",loading:"lazy","lazy-load":"",mode:"aspectFill"}})])},s=[],n=(i("4662"),i("28a2")),l=i("18e5"),r={props:{url:{type:String,required:!0},defaultUrl:{type:String,default:""},size:{type:Object,default:()=>({})},alt:{type:String,default:""},borderRadius:{type:[Number,String],default:0},preview:{type:Boolean,default:!1},extStyle:{type:Object,default:()=>{}}},data(){return{showDisplayImage:!0,displaySrc:""}},watch:{targetUrl:{immediate:!0,handler(t,e){t&&t!==e&&this.setDisplaySrc()}}},computed:{cssBorderRadius(){return Object(l["a"])(this.borderRadius)},cssWidth(){const{width:t}=this.size;return t?"string"===typeof t?t:t+"px":"100%"},cssHeight(){const{height:t}=this.size;return t?"string"===typeof t?t:t+"px":"100%"},targetUrl(){const{url:t,size:{style:e}}=this;return e?t+e:t}},methods:{setDisplaySrc(){this.displaySrc=this.targetUrl},handlePreview(){const{url:t,preview:e}=this;e&&Object(n["a"])({images:[t+"!lfit_w1080_jpg"],closeable:!0})}}},o=r,c=(i("cd4a"),i("0c7c")),u=Object(c["a"])(o,a,s,!1,null,null,null);e["a"]=u.exports},d2a7:function(t,e,i){"use strict";var a=i("0ef7");e["a"]={getActivityShareInfo(t){return a["h"].post("/gactus-web/v1/activity/share_info/get",t)},generateActivityShareCode(t){return a["h"].post("/gactus-web/v1/activity/share-code/generate",t)},addActivityShareRecord(t){return a["h"].post("/gactus-web/v1/activity/share_record/add",t)},createPluginTemplate(t){return a["h"].post("/gactus-web/v1/plugin-template/create",t)},getPluginTemplate(t){return a["h"].post("/gactus-web/v1/plugin-template/get",t)}}},d705:function(t,e,i){},f3f6:function(t,e,i){"use strict";i("7716")}}]);