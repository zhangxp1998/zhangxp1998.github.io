{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/earth-specular.png","webpack:///./src/App.vue?d546","webpack:///./src/assets/earthmap1k.jpg","webpack:///./src/App.vue","webpack:///./src/components/HelloWorld.vue","webpack:///./src/OrbitControls.js","webpack:///./src/utils/DysonSphereUtils.ts","webpack:///./src/components/HelloWorld.vue?7f89","webpack:///./src/components/HelloWorld.vue?08a7","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?64a4","webpack:///./src/main.ts","webpack:///./src/assets/earthbump1k.jpg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","class","ref","width","height","style","for","x","y","z","id","displayText","outputToJson","outputJson","_changeEvent","_startEvent","_endEvent","domElement","super","warn","this","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","code","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","pointerType","onMouseDown","onMouseMove","onMouseUp","mouseAction","focus","button","ctrlKey","metaKey","shiftKey","DOLLY_ROTATE","passive","RescaleLayer","layer","ratio","orbitRadius","nodes","map","pos","binarySearch","arr","compare","begin","end","mid","floor","cmp","pointCompare","a","b","dedup","points","sort","output","equals","ToLayer","uniquePoints","uniqueFrames","shells","idx","protoId","frames","fr","nodeAId","nodeBId","euler","shell","nodeIds","MeshToLayer","mesh","geometry","index","toNonIndexed","getAttribute","itemSize","meshPoints","Array","array","updateMatrixWorld","matrixWorld","applyMatrix4","dysonLayer","forEach","meshTriangles","log","geometryForShell","nodeMap","scene","pts","triangles","origin","setFromPoints","computeVertexNormals","color","side","emissive","emissiveIntensity","loadSphere","dysonSphere","layers","idMap","Map","node","material","line","loader","texture","load","bumpMap","minOrbitRadius","bumpScale","specularMap","specular","light","normalize","resizeRendererToDisplaySize","renderer","canvas","needResize","setSize","cameraPosition","font","displayTextMesh","props","dyson","String","methods","JSON","parse","stringify","maxLayerRadius","orbitAngularSpeed","text","textDistance","size","addText","geometryForText","mounted","$refs","JetbrainMono","znear","zfar","camera","setClearColor","controls","$data","maxOrbitRadius","render","time","aspect","requestAnimationFrame","computed","toFixed","watch","newText","oldTextt","computeBoundingBox","boundingBox","textWidth","components","HelloWorld","App","mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASY,EAAe5B,GACvB,OAAOyB,EAAoBI,EAAI,OAAS,GAAG7B,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,MAI5I,SAASyB,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU+B,QAGnC,IAAIC,EAASJ,EAAiB5B,GAAY,CACzCK,EAAGL,EACHiC,GAAG,EACHF,QAAS,IAUV,OANAjB,EAAQd,GAAUW,KAAKqB,EAAOD,QAASC,EAAQA,EAAOD,QAASL,GAG/DM,EAAOC,GAAI,EAGJD,EAAOD,QAKfL,EAAoBQ,EAAI,SAAuBjC,GAC9C,IAAIkC,EAAW,GAKXC,EAAqBxB,EAAgBX,GACzC,GAA0B,IAAvBmC,EAGF,GAAGA,EACFD,EAAStB,KAAKuB,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAIC,SAAQ,SAASC,EAASC,GAC3CJ,EAAqBxB,EAAgBX,GAAW,CAACsC,EAASC,MAE3DL,EAAStB,KAAKuB,EAAmB,GAAKC,GAGtC,IACII,EADAC,EAASC,SAASC,cAAc,UAGpCF,EAAOG,QAAU,QACjBH,EAAOI,QAAU,IACbpB,EAAoBqB,IACvBL,EAAOM,aAAa,QAAStB,EAAoBqB,IAElDL,EAAOO,IAAMpB,EAAe5B,GAG5B,IAAIiD,EAAQ,IAAIC,MAChBV,EAAmB,SAAUW,GAE5BV,EAAOW,QAAUX,EAAOY,OAAS,KACjCC,aAAaT,GACb,IAAIU,EAAQ5C,EAAgBX,GAC5B,GAAa,IAAVuD,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYL,IAAyB,SAAfA,EAAMM,KAAkB,UAAYN,EAAMM,MAChEC,EAAUP,GAASA,EAAMQ,QAAUR,EAAMQ,OAAOX,IACpDC,EAAMW,QAAU,iBAAmB5D,EAAU,cAAgBwD,EAAY,KAAOE,EAAU,IAC1FT,EAAMY,KAAO,iBACbZ,EAAMQ,KAAOD,EACbP,EAAMa,QAAUJ,EAChBH,EAAM,GAAGN,GAEVtC,EAAgBX,QAAW+D,IAG7B,IAAIlB,EAAUmB,YAAW,WACxBxB,EAAiB,CAAEiB,KAAM,UAAWE,OAAQlB,MAC1C,MACHA,EAAOW,QAAUX,EAAOY,OAASb,EACjCE,SAASuB,KAAKC,YAAYzB,GAG5B,OAAOJ,QAAQ8B,IAAIjC,IAIpBT,EAAoB2C,EAAIvD,EAGxBY,EAAoB4C,EAAI1C,EAGxBF,EAAoB6C,EAAI,SAASxC,EAAS+B,EAAMU,GAC3C9C,EAAoB+C,EAAE1C,EAAS+B,IAClCtD,OAAOkE,eAAe3C,EAAS+B,EAAM,CAAEa,YAAY,EAAMC,IAAKJ,KAKhE9C,EAAoBmD,EAAI,SAAS9C,GACX,qBAAX+C,QAA0BA,OAAOC,aAC1CvE,OAAOkE,eAAe3C,EAAS+C,OAAOC,YAAa,CAAEC,MAAO,WAE7DxE,OAAOkE,eAAe3C,EAAS,aAAc,CAAEiD,OAAO,KAQvDtD,EAAoBuD,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQtD,EAAoBsD,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK5E,OAAO6E,OAAO,MAGvB,GAFA3D,EAAoBmD,EAAEO,GACtB5E,OAAOkE,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOtD,EAAoB6C,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR1D,EAAoB8D,EAAI,SAASxD,GAChC,IAAIwC,EAASxC,GAAUA,EAAOmD,WAC7B,WAAwB,OAAOnD,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAN,EAAoB6C,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR9C,EAAoB+C,EAAI,SAASgB,EAAQC,GAAY,OAAOlF,OAAOC,UAAUC,eAAeC,KAAK8E,EAAQC,IAGzGhE,EAAoBI,EAAI,IAGxBJ,EAAoBiE,GAAK,SAASC,GAA2B,MAApBC,QAAQ3C,MAAM0C,GAAYA,GAEnE,IAAIE,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAWjF,KAAK0E,KAAKO,GAC5CA,EAAWjF,KAAOf,EAClBgG,EAAaA,EAAWG,QACxB,IAAI,IAAI5F,EAAI,EAAGA,EAAIyF,EAAWvF,OAAQF,IAAKP,EAAqBgG,EAAWzF,IAC3E,IAAIU,EAAsBiF,EAI1B/E,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,gEC5NTa,EAAOD,QAAU,IAA0B,mC,oCCA3C,W,uBCAAC,EAAOD,QAAU,IAA0B,+B,8ICCzC,eAAc,G,SCATmE,MAAM,S,GACDC,IAAI,SAASC,MAAM,MAAMC,OAAO,O,GAEhCC,MAAA,kB,EACN,eAAoD,SAA7CA,MAAA,iBAAsBC,IAAI,QAAO,QAAI,G,gDAJhD,eASM,MATN,EASM,CARJ,eAAuD,SAAvD,EAAuD,UACvD,eAKM,YAJJ,eAAqE,OAArE,EAA4B,OAAI,eAAG,EAAAC,GAAI,OAAI,eAAG,EAAAC,GAAI,OAAI,eAAG,EAAAC,GAAC,GAC1D,E,eACA,eAAqD,SAA9CC,GAAG,OAAOjD,KAAK,O,qCAAgB,EAAAkD,YAAW,I,mBAAX,EAAAA,eACtC,eAAmD,UAAtC,QAAK,eAAE,EAAAC,iBAAgB,YAEtC,eAA+C,YAA9B7B,MAAO,EAAA8B,YAAU,oB,2FCDtC,MAAMC,EAAe,CACnBrD,KAAM,UAEFsD,EAAc,CAClBtD,KAAM,SAEFuD,EAAY,CAChBvD,KAAM,OAGD,MAAM,UAAsB,OACjC,YAAY+B,EAAQyB,GAClBC,aACmBnD,IAAfkD,GACFrB,QAAQuB,KACN,4EAEAF,IAAevE,UACjBkD,QAAQ3C,MACN,4HAEJmE,KAAK5B,OAASA,EACd4B,KAAKH,WAAaA,EAElBG,KAAKC,SAAU,EAEfD,KAAKzD,OAAS,IAAI,OAElByD,KAAKE,YAAc,EACnBF,KAAKG,YAAcC,IAEnBJ,KAAKK,QAAU,EACfL,KAAKM,QAAUF,IAGfJ,KAAKO,cAAgB,EAErBP,KAAKQ,cAAgBC,KAAKC,GAI1BV,KAAKW,iBAAmBP,IAExBJ,KAAKY,gBAAkBR,IAIvBJ,KAAKa,eAAgB,EACrBb,KAAKc,cAAgB,IAGrBd,KAAKe,YAAa,EAClBf,KAAKgB,UAAY,EAEjBhB,KAAKiB,cAAe,EACpBjB,KAAKkB,YAAc,EAEnBlB,KAAKmB,WAAY,EACjBnB,KAAKoB,SAAW,EAChBpB,KAAKqB,oBAAqB,EAE1BrB,KAAKsB,YAAc,EAInBtB,KAAKuB,YAAa,EAClBvB,KAAKwB,gBAAkB,EAGvBxB,KAAKyB,KAAO,CACVC,KAAM,YACNC,GAAI,UACJC,MAAO,aACPC,OAAQ,aAGV7B,KAAK8B,aAAe,CAClBJ,KAAM,OAAYK,OAClBC,OAAQ,OAAYC,MACpBL,MAAO,OAAYM,KAGrBlC,KAAKmC,QAAU,CACbC,IAAK,OAAYL,OACjBM,IAAK,OAAYC,WAGnBtC,KAAKuC,QAAUvC,KAAKzD,OAAOiG,QAC3BxC,KAAKyC,UAAYzC,KAAK5B,OAAOsE,SAASF,QACtCxC,KAAK2C,MAAQ3C,KAAK5B,OAAOwE,KAEzB5C,KAAK6C,qBAAuB,KAI5B7C,KAAK8C,cAAgB,WACnB,OAAOC,EAAUC,KAGnBhD,KAAKiD,kBAAoB,WACvB,OAAOF,EAAUG,OAGnBlD,KAAKmD,kBAAoB,SAAUtD,GACjCA,EAAWuD,iBAAiB,UAAWC,IACvCrD,KAAK6C,qBAAuBhD,GAG9BG,KAAKsD,UAAY,WACfC,EAAMhB,QAAQiB,KAAKD,EAAMhH,QACzBgH,EAAMd,UAAUe,KAAKD,EAAMnF,OAAOsE,UAClCa,EAAMZ,MAAQY,EAAMnF,OAAOwE,MAG7B5C,KAAKyD,MAAQ,WACXF,EAAMhH,OAAOiH,KAAKD,EAAMhB,SACxBgB,EAAMnF,OAAOsE,SAASc,KAAKD,EAAMd,WACjCc,EAAMnF,OAAOwE,KAAOW,EAAMZ,MAC1BY,EAAMnF,OAAOsF,yBACbH,EAAMI,cAAcjE,GACpB6D,EAAMK,SACNC,EAAQC,EAAMC,MAGhB/D,KAAK4D,OAAS,WACZ,MAAMI,EAAS,IAAI,OAEbC,GAAO,IAAI,QAAmBC,mBAClC9F,EAAO+F,GACP,IAAI,OAAc,EAAG,EAAG,IAEpBC,EAAcH,EAAKzB,QAAQ6B,SAC3BC,EAAe,IAAI,OACnBC,EAAiB,IAAI,OACrBC,EAAQ,EAAI/D,KAAKC,GACvB,OAAO,WACL,MAAMgC,EAAWa,EAAMnF,OAAOsE,SAC9BsB,EAAOR,KAAKd,GAAU+B,IAAIlB,EAAMhH,QAEhCyH,EAAOU,gBAAgBT,GAEvBlB,EAAU4B,eAAeX,GAErBT,EAAMhC,YAAcsC,IAAUC,EAAMC,MACtCa,EAAWC,KAGTtB,EAAM1C,eACRkC,EAAUG,OAAS4B,EAAe5B,MAAQK,EAAMzC,cAChDiC,EAAUC,KAAO8B,EAAe9B,IAAMO,EAAMzC,gBAE5CiC,EAAUG,OAAS4B,EAAe5B,MAClCH,EAAUC,KAAO8B,EAAe9B,KAGlC,IAAI+B,EAAMxB,EAAM5C,gBACZqE,EAAMzB,EAAM3C,gBAuDhB,OArDIqE,SAASF,IAAQE,SAASD,KACxBD,GAAOtE,KAAKC,GAAIqE,GAAOP,EAClBO,EAAMtE,KAAKC,KAAIqE,GAAOP,GAC3BQ,GAAOvE,KAAKC,GAAIsE,GAAOR,EAClBQ,EAAMvE,KAAKC,KAAIsE,GAAOR,GAG7BzB,EAAUG,MADR6B,GAAOC,EACSvE,KAAKuE,IAAID,EAAKtE,KAAKsE,IAAIC,EAAKjC,EAAUG,QAGtDH,EAAUG,OAAS6B,EAAMC,GAAO,EAC5BvE,KAAKuE,IAAID,EAAKhC,EAAUG,OACxBzC,KAAKsE,IAAIC,EAAKjC,EAAUG,QAIlCH,EAAUC,IAAMvC,KAAKuE,IACnBzB,EAAMhD,cACNE,KAAKsE,IAAIxB,EAAM/C,cAAeuC,EAAUC,MAE1CD,EAAUmC,WACVnC,EAAUoC,QAAUC,EAEpBrC,EAAUoC,OAAS1E,KAAKuE,IACtBzB,EAAMrD,YACNO,KAAKsE,IAAIxB,EAAMpD,YAAa4C,EAAUoC,UAGZ,IAAxB5B,EAAM1C,cACR0C,EAAMhH,OAAO8I,gBAAgBC,EAAW/B,EAAMzC,eAE9CyC,EAAMhH,OAAOgJ,IAAID,GAGnBtB,EAAOwB,iBAAiBzC,GAExBiB,EAAOU,gBAAgBN,GACvB1B,EAASc,KAAKD,EAAMhH,QAAQgJ,IAAIvB,GAChCT,EAAMnF,OAAOqH,OAAOlC,EAAMhH,SAEE,IAAxBgH,EAAM1C,eACRiE,EAAe5B,OAAS,EAAIK,EAAMzC,cAClCgE,EAAe9B,KAAO,EAAIO,EAAMzC,cAChCwE,EAAUI,eAAe,EAAInC,EAAMzC,iBAEnCgE,EAAea,IAAI,EAAG,EAAG,GACzBL,EAAUK,IAAI,EAAG,EAAG,IAGtBP,EAAQ,KAKNQ,GACAtB,EAAauB,kBAAkBtC,EAAMnF,OAAOsE,UAAYoD,GACxD,GAAK,EAAIvB,EAAewB,IAAIxC,EAAMnF,OAAO4H,aAAeF,KAExDvC,EAAMI,cAAcjE,GACpB4E,EAAad,KAAKD,EAAMnF,OAAOsE,UAC/B6B,EAAef,KAAKD,EAAMnF,OAAO4H,YACjCJ,GAAc,GACP,IAhGC,GAuGd5F,KAAKiG,QAAU,WACb1C,EAAM1D,WAAWqG,oBAAoB,cAAeC,IACpD5C,EAAM1D,WAAWqG,oBAAoB,cAAeE,GACpD7C,EAAM1D,WAAWqG,oBAAoB,QAASG,IAC9C9C,EAAM1D,WAAWqG,oBAAoB,aAAcI,IACnD/C,EAAM1D,WAAWqG,oBAAoB,WAAYK,IACjDhD,EAAM1D,WAAWqG,oBAAoB,YAAaM,IAClDjD,EAAM1D,WAAW4G,cAAcP,oBAC7B,cACAQ,IAEFnD,EAAM1D,WAAW4G,cAAcP,oBAC7B,YACAS,IAGiC,OAA/BpD,EAAMV,sBACRU,EAAMV,qBAAqBqD,oBAAoB,UAAW7C,KAM9D,MAAME,EAAQvD,KACR8D,EAAQ,CACZC,MAAO,EACPhC,OAAQ,EACRE,MAAO,EACPC,IAAK,EACL0E,aAAc,EACdC,UAAW,EACXC,gBAAiB,EACjBC,mBAAoB,GAEtB,IAAIlD,EAAQC,EAAMC,KAClB,MAAM+B,EAAM,KAEN/C,EAAY,IAAI,OAChB+B,EAAiB,IAAI,OAC3B,IAAIM,EAAQ,EACZ,MAAME,EAAY,IAAI,OACtB,IAAIM,GAAc,EAClB,MAAMoB,EAAc,IAAI,OAClBC,EAAY,IAAI,OAChBC,EAAc,IAAI,OAClBC,EAAW,IAAI,OACfC,EAAS,IAAI,OACbC,EAAW,IAAI,OACfC,EAAa,IAAI,OACjBC,EAAW,IAAI,OACfC,EAAa,IAAI,OAEvB,SAAS3C,IACP,OAAS,EAAIpE,KAAKC,GAAM,GAAK,GAAM6C,EAAM/B,gBAG3C,SAASiG,IACP,OAAOhH,KAAKiH,IAAI,IAAMnE,EAAMvC,WAG9B,SAAS4D,EAAW+C,GAClB7C,EAAe5B,OAASyE,EAG1B,SAASC,EAASD,GAChB7C,EAAe9B,KAAO2E,EAGxB,MAAME,EAAU,WACd,MAAMC,EAAI,IAAI,OACd,OAAO,SAAiBC,EAAUC,GAChCF,EAAEG,oBAAoBD,EAAc,GAEpCF,EAAEpC,gBAAgBqC,GAClBzC,EAAUC,IAAIuC,IANF,GAUVI,EAAQ,WACZ,MAAMJ,EAAI,IAAI,OACd,OAAO,SAAeC,EAAUC,IACG,IAA7BzE,EAAMlC,mBACRyG,EAAEG,oBAAoBD,EAAc,IAEpCF,EAAEG,oBAAoBD,EAAc,GACpCF,EAAEK,aAAa5E,EAAMnF,OAAO+F,GAAI2D,IAGlCA,EAAEpC,eAAeqC,GACjBzC,EAAUC,IAAIuC,IAXJ,GAeRM,EAAM,WACV,MAAMpE,EAAS,IAAI,OACnB,OAAO,SAAaqE,EAAQC,GAC1B,MAAMC,EAAUhF,EAAM1D,WAEtB,GAAI0D,EAAMnF,OAAOoK,oBAAqB,CAEpC,MAAM9F,EAAWa,EAAMnF,OAAOsE,SAC9BsB,EAAOR,KAAKd,GAAU+B,IAAIlB,EAAMhH,QAChC,IAAIkM,EAAiBzE,EAAO9K,SAE5BuP,GAAkBhI,KAAKiI,IACnBnF,EAAMnF,OAAOuK,IAAM,EAAKlI,KAAKC,GAAM,KAGvCmH,EACG,EAAIQ,EAASI,EAAkBF,EAAQK,aACxCrF,EAAMnF,OAAOyK,QAEfX,EACG,EAAII,EAASG,EAAkBF,EAAQK,aACxCrF,EAAMnF,OAAOyK,aAENtF,EAAMnF,OAAO0K,sBAEtBjB,EACGQ,GAAU9E,EAAMnF,OAAO2K,MAAQxF,EAAMnF,OAAO4K,MAC3CzF,EAAMnF,OAAOwE,KACb2F,EAAQU,YACV1F,EAAMnF,OAAOyK,QAEfX,EACGI,GAAU/E,EAAMnF,OAAO8K,IAAM3F,EAAMnF,OAAO+K,QACzC5F,EAAMnF,OAAOwE,KACb2F,EAAQK,aACVrF,EAAMnF,OAAOyK,UAIfrK,QAAQuB,KACN,gFAEFwD,EAAMpC,WAAY,IA1CZ,GA+CZ,SAASiI,EAASC,GACZ9F,EAAMnF,OAAOoK,oBACfpD,GAASiE,EACA9F,EAAMnF,OAAO0K,sBACtBvF,EAAMnF,OAAOwE,KAAOnC,KAAKuE,IACvBzB,EAAMlD,QACNI,KAAKsE,IAAIxB,EAAMjD,QAASiD,EAAMnF,OAAOwE,KAAOyG,IAE9C9F,EAAMnF,OAAOsF,yBACbkC,GAAc,IAEdpH,QAAQuB,KACN,uFAEFwD,EAAMxC,YAAa,GAIvB,SAASuI,EAAQD,GACX9F,EAAMnF,OAAOoK,oBACfpD,GAASiE,EACA9F,EAAMnF,OAAO0K,sBACtBvF,EAAMnF,OAAOwE,KAAOnC,KAAKuE,IACvBzB,EAAMlD,QACNI,KAAKsE,IAAIxB,EAAMjD,QAASiD,EAAMnF,OAAOwE,KAAOyG,IAE9C9F,EAAMnF,OAAOsF,yBACbkC,GAAc,IAEdpH,QAAQuB,KACN,uFAEFwD,EAAMxC,YAAa,GAMvB,SAASwI,EAAsBxN,GAC7BiL,EAAYrB,IAAI5J,EAAMyN,QAASzN,EAAM0N,SAGvC,SAASC,EAAqB3N,GAC5BuL,EAAW3B,IAAI5J,EAAMyN,QAASzN,EAAM0N,SAGtC,SAASE,EAAmB5N,GAC1BoL,EAASxB,IAAI5J,EAAMyN,QAASzN,EAAM0N,SAGpC,SAASG,EAAsB7N,GAC7BkL,EAAUtB,IAAI5J,EAAMyN,QAASzN,EAAM0N,SACnCvC,EACG2C,WAAW5C,EAAWD,GACtBtB,eAAenC,EAAMrC,aACxB,MAAMqH,EAAUhF,EAAM1D,WACtB+E,EAAY,EAAInE,KAAKC,GAAKwG,EAAY/H,EAAKoJ,EAAQK,cAEnDhB,EAAU,EAAInH,KAAKC,GAAKwG,EAAY9H,EAAKmJ,EAAQK,cACjD5B,EAAYxD,KAAKyD,GACjB1D,EAAMK,SAGR,SAASkG,EAAqB/N,GAC5BwL,EAAS5B,IAAI5J,EAAMyN,QAASzN,EAAM0N,SAClCjC,EAAWqC,WAAWtC,EAAUD,GAE5BE,EAAWpI,EAAI,EACjBgK,EAAS3B,KACAD,EAAWpI,EAAI,GACxBkK,EAAQ7B,KAGVH,EAAW9D,KAAK+D,GAChBhE,EAAMK,SAGR,SAASmG,EAAmBhO,GAC1BqL,EAAOzB,IAAI5J,EAAMyN,QAASzN,EAAM0N,SAChCpC,EAASwC,WAAWzC,EAAQD,GAAUzB,eAAenC,EAAMnC,UAC3DgH,EAAIf,EAASlI,EAAGkI,EAASjI,GACzB+H,EAAS3D,KAAK4D,GACd7D,EAAMK,SAGR,SAASoG,KAIT,SAASC,EAAiBlO,GACpBA,EAAMuM,OAAS,EACjBgB,EAAQ7B,KACC1L,EAAMuM,OAAS,GACxBc,EAAS3B,KAGXlE,EAAMK,SAGR,SAASsG,EAAcnO,GACrB,IAAIoO,GAAc,EAElB,OAAQpO,EAAMqO,MACZ,KAAK7G,EAAM9B,KAAKE,GACdyG,EAAI,EAAG7E,EAAMjC,aACb6I,GAAc,EACd,MAEF,KAAK5G,EAAM9B,KAAKI,OACduG,EAAI,GAAI7E,EAAMjC,aACd6I,GAAc,EACd,MAEF,KAAK5G,EAAM9B,KAAKC,KACd0G,EAAI7E,EAAMjC,YAAa,GACvB6I,GAAc,EACd,MAEF,KAAK5G,EAAM9B,KAAKG,MACdwG,GAAK7E,EAAMjC,YAAa,GACxB6I,GAAc,EACd,MAGAA,IAEFpO,EAAMsO,iBACN9G,EAAMK,UAIV,SAAS0G,EAAuBvO,GAC9B,GAA4B,GAAxBA,EAAMoG,QAAQjJ,OAChB8N,EAAYrB,IAAI5J,EAAMoG,QAAQ,GAAGoI,MAAOxO,EAAMoG,QAAQ,GAAGqI,WACpD,CACL,MAAMrL,EAAI,IAAOpD,EAAMoG,QAAQ,GAAGoI,MAAQxO,EAAMoG,QAAQ,GAAGoI,OACrDnL,EAAI,IAAOrD,EAAMoG,QAAQ,GAAGqI,MAAQzO,EAAMoG,QAAQ,GAAGqI,OAC3DxD,EAAYrB,IAAIxG,EAAGC,IAIvB,SAASqL,EAAoB1O,GAC3B,GAA4B,GAAxBA,EAAMoG,QAAQjJ,OAChBiO,EAASxB,IAAI5J,EAAMoG,QAAQ,GAAGoI,MAAOxO,EAAMoG,QAAQ,GAAGqI,WACjD,CACL,MAAMrL,EAAI,IAAOpD,EAAMoG,QAAQ,GAAGoI,MAAQxO,EAAMoG,QAAQ,GAAGoI,OACrDnL,EAAI,IAAOrD,EAAMoG,QAAQ,GAAGqI,MAAQzO,EAAMoG,QAAQ,GAAGqI,OAC3DrD,EAASxB,IAAIxG,EAAGC,IAIpB,SAASsL,EAAsB3O,GAC7B,MAAM4O,EAAK5O,EAAMoG,QAAQ,GAAGoI,MAAQxO,EAAMoG,QAAQ,GAAGoI,MAC/CK,EAAK7O,EAAMoG,QAAQ,GAAGqI,MAAQzO,EAAMoG,QAAQ,GAAGqI,MAC/CzC,EAAWtH,KAAKoK,KAAKF,EAAKA,EAAKC,EAAKA,GAC1CtD,EAAW3B,IAAI,EAAGoC,GAGpB,SAAS+C,EAAyB/O,GAC5BwH,EAAMxC,YAAY2J,EAAsB3O,GACxCwH,EAAMpC,WAAWsJ,EAAoB1O,GAG3C,SAASgP,EAA4BhP,GAC/BwH,EAAMxC,YAAY2J,EAAsB3O,GACxCwH,EAAMtC,cAAcqJ,EAAuBvO,GAGjD,SAASiP,EAAsBjP,GAC7B,GAA4B,GAAxBA,EAAMoG,QAAQjJ,OAChB+N,EAAUtB,IAAI5J,EAAMoG,QAAQ,GAAGoI,MAAOxO,EAAMoG,QAAQ,GAAGqI,WAClD,CACL,MAAMrL,EAAI,IAAOpD,EAAMoG,QAAQ,GAAGoI,MAAQxO,EAAMoG,QAAQ,GAAGoI,OACrDnL,EAAI,IAAOrD,EAAMoG,QAAQ,GAAGqI,MAAQzO,EAAMoG,QAAQ,GAAGqI,OAC3DvD,EAAUtB,IAAIxG,EAAGC,GAGnB8H,EACG2C,WAAW5C,EAAWD,GACtBtB,eAAenC,EAAMrC,aACxB,MAAMqH,EAAUhF,EAAM1D,WACtB+E,EAAY,EAAInE,KAAKC,GAAKwG,EAAY/H,EAAKoJ,EAAQK,cAEnDhB,EAAU,EAAInH,KAAKC,GAAKwG,EAAY9H,EAAKmJ,EAAQK,cACjD5B,EAAYxD,KAAKyD,GAGnB,SAASgE,EAAmBlP,GAC1B,GAA4B,GAAxBA,EAAMoG,QAAQjJ,OAChBkO,EAAOzB,IAAI5J,EAAMoG,QAAQ,GAAGoI,MAAOxO,EAAMoG,QAAQ,GAAGqI,WAC/C,CACL,MAAMrL,EAAI,IAAOpD,EAAMoG,QAAQ,GAAGoI,MAAQxO,EAAMoG,QAAQ,GAAGoI,OACrDnL,EAAI,IAAOrD,EAAMoG,QAAQ,GAAGqI,MAAQzO,EAAMoG,QAAQ,GAAGqI,OAC3DpD,EAAOzB,IAAIxG,EAAGC,GAGhBiI,EAASwC,WAAWzC,EAAQD,GAAUzB,eAAenC,EAAMnC,UAC3DgH,EAAIf,EAASlI,EAAGkI,EAASjI,GACzB+H,EAAS3D,KAAK4D,GAGhB,SAAS8D,EAAqBnP,GAC5B,MAAM4O,EAAK5O,EAAMoG,QAAQ,GAAGoI,MAAQxO,EAAMoG,QAAQ,GAAGoI,MAC/CK,EAAK7O,EAAMoG,QAAQ,GAAGqI,MAAQzO,EAAMoG,QAAQ,GAAGqI,MAC/CzC,EAAWtH,KAAKoK,KAAKF,EAAKA,EAAKC,EAAKA,GAC1CrD,EAAS5B,IAAI,EAAGoC,GAChBP,EAAW7B,IAAI,EAAGlF,KAAKiH,IAAIH,EAASnI,EAAIkI,EAAWlI,EAAGmE,EAAMvC,YAC5DoI,EAAS5B,EAAWpI,GACpBkI,EAAW9D,KAAK+D,GAGlB,SAAS4D,EAAwBpP,GAC3BwH,EAAMxC,YAAYmK,EAAqBnP,GACvCwH,EAAMpC,WAAW8J,EAAmBlP,GAG1C,SAASqP,EAA2BrP,GAC9BwH,EAAMxC,YAAYmK,EAAqBnP,GACvCwH,EAAMtC,cAAc+J,EAAsBjP,GAGhD,SAASsP,KAMT,SAASjF,EAAcrK,GACrB,IAAsB,IAAlBwH,EAAMtD,QAEV,OAAQlE,EAAMuP,aACZ,IAAK,QACL,IAAK,MACHC,GAAYxP,GACZ,OAKN,SAAS2K,GAAc3K,GACrB,IAAsB,IAAlBwH,EAAMtD,QAEV,OAAQlE,EAAMuP,aACZ,IAAK,QACL,IAAK,MACHE,GAAYzP,GACZ,OAKN,SAAS4K,GAAY5K,GACnB,OAAQA,EAAMuP,aACZ,IAAK,QACL,IAAK,MACHG,GAAU1P,GACV,OAKN,SAASwP,GAAYxP,GAMnB,IAAI2P,EAEJ,OANA3P,EAAMsO,iBAGN9G,EAAM1D,WAAW8L,MAAQpI,EAAM1D,WAAW8L,QAAUjN,OAAOiN,QAGnD5P,EAAM6P,QACZ,KAAK,EACHF,EAAcnI,EAAMzB,aAAaJ,KACjC,MAEF,KAAK,EACHgK,EAAcnI,EAAMzB,aAAaE,OACjC,MAEF,KAAK,EACH0J,EAAcnI,EAAMzB,aAAaF,MACjC,MAEF,QACE8J,GAAe,EAGnB,OAAQA,GACN,KAAK,OAAYzJ,MACf,IAAyB,IAArBsB,EAAMxC,WAAsB,OAChC2I,EAAqB3N,GACrB8H,EAAQC,EAAM7B,MACd,MAEF,KAAK,OAAYF,OACf,GAAIhG,EAAM8P,SAAW9P,EAAM+P,SAAW/P,EAAMgQ,SAAU,CACpD,IAAwB,IAApBxI,EAAMpC,UAAqB,OAC/BwI,EAAmB5N,GACnB8H,EAAQC,EAAM5B,QACT,CACL,IAA2B,IAAvBqB,EAAMtC,aAAwB,OAClCsI,EAAsBxN,GACtB8H,EAAQC,EAAM/B,OAGhB,MAEF,KAAK,OAAYG,IACf,GAAInG,EAAM8P,SAAW9P,EAAM+P,SAAW/P,EAAMgQ,SAAU,CACpD,IAA2B,IAAvBxI,EAAMtC,aAAwB,OAClCsI,EAAsBxN,GACtB8H,EAAQC,EAAM/B,WACT,CACL,IAAwB,IAApBwB,EAAMpC,UAAqB,OAC/BwI,EAAmB5N,GACnB8H,EAAQC,EAAM5B,IAGhB,MAEF,QACE2B,EAAQC,EAAMC,KAGdF,IAAUC,EAAMC,OAClBR,EAAM1D,WAAW4G,cAAcrD,iBAC7B,cACAsD,IAEFnD,EAAM1D,WAAW4G,cAAcrD,iBAC7B,YACAuD,IAEFpD,EAAMI,cAAchE,IAIxB,SAAS6L,GAAYzP,GACnB,IAAsB,IAAlBwH,EAAMtD,QAGV,OAFAlE,EAAMsO,iBAEExG,GACN,KAAKC,EAAM/B,OACT,IAA2B,IAAvBwB,EAAMtC,aAAwB,OAClC2I,EAAsB7N,GACtB,MAEF,KAAK+H,EAAM7B,MACT,IAAyB,IAArBsB,EAAMxC,WAAsB,OAChC+I,EAAqB/N,GACrB,MAEF,KAAK+H,EAAM5B,IACT,IAAwB,IAApBqB,EAAMpC,UAAqB,OAC/B4I,EAAmBhO,GACnB,OAIN,SAAS0P,GAAU1P,GACjBwH,EAAM1D,WAAW4G,cAAcP,oBAC7B,cACAQ,IAEFnD,EAAM1D,WAAW4G,cAAcP,oBAC7B,YACAS,KAEoB,IAAlBpD,EAAMtD,UACV+J,EAAcjO,GACdwH,EAAMI,cAAc/D,GACpBiE,EAAQC,EAAMC,MAGhB,SAASsC,GAAatK,IAEA,IAAlBwH,EAAMtD,UACe,IAArBsD,EAAMxC,YACL8C,IAAUC,EAAMC,MAAQF,IAAUC,EAAM/B,SAG3ChG,EAAMsO,iBACN9G,EAAMI,cAAchE,GACpBsK,EAAiBlO,GACjBwH,EAAMI,cAAc/D,IAGtB,SAASyD,GAAUtH,IACK,IAAlBwH,EAAMtD,UAAyC,IAApBsD,EAAMpC,WACrC+I,EAAcnO,GAGhB,SAASuK,GAAavK,GACpB,IAAsB,IAAlBwH,EAAMtD,QAAV,CAGA,OAFAlE,EAAMsO,iBAEEtO,EAAMoG,QAAQjJ,QACpB,KAAK,EACH,OAAQqK,EAAMpB,QAAQC,KACpB,KAAK,OAAYL,OACf,IAA2B,IAAvBwB,EAAMtC,aAAwB,OAClCqJ,EAAuBvO,GACvB8H,EAAQC,EAAM8C,aACd,MAEF,KAAK,OAAY1E,IACf,IAAwB,IAApBqB,EAAMpC,UAAqB,OAC/BsJ,EAAoB1O,GACpB8H,EAAQC,EAAM+C,UACd,MAEF,QACEhD,EAAQC,EAAMC,KAGlB,MAEF,KAAK,EACH,OAAQR,EAAMpB,QAAQE,KACpB,KAAK,OAAYC,UACf,IAAyB,IAArBiB,EAAMxC,aAA4C,IAApBwC,EAAMpC,UACtC,OACF2J,EAAyB/O,GACzB8H,EAAQC,EAAMgD,gBACd,MAEF,KAAK,OAAYkF,aACf,IAAyB,IAArBzI,EAAMxC,aAA+C,IAAvBwC,EAAMtC,aACtC,OACF8J,EAA4BhP,GAC5B8H,EAAQC,EAAMiD,mBACd,MAEF,QACElD,EAAQC,EAAMC,KAGlB,MAEF,QACEF,EAAQC,EAAMC,KAGdF,IAAUC,EAAMC,MAClBR,EAAMI,cAAchE,IAIxB,SAAS6G,GAAYzK,GACnB,IAAsB,IAAlBwH,EAAMtD,QAGV,OAFAlE,EAAMsO,iBAEExG,GACN,KAAKC,EAAM8C,aACT,IAA2B,IAAvBrD,EAAMtC,aAAwB,OAClC+J,EAAsBjP,GACtBwH,EAAMK,SACN,MAEF,KAAKE,EAAM+C,UACT,IAAwB,IAApBtD,EAAMpC,UAAqB,OAC/B8J,EAAmBlP,GACnBwH,EAAMK,SACN,MAEF,KAAKE,EAAMgD,gBACT,IAAyB,IAArBvD,EAAMxC,aAA4C,IAApBwC,EAAMpC,UAAqB,OAC7DgK,EAAwBpP,GACxBwH,EAAMK,SACN,MAEF,KAAKE,EAAMiD,mBACT,IAAyB,IAArBxD,EAAMxC,aAA+C,IAAvBwC,EAAMtC,aACtC,OACFmK,EAA2BrP,GAC3BwH,EAAMK,SACN,MAEF,QACEC,EAAQC,EAAMC,MAIpB,SAASwC,GAAWxK,IACI,IAAlBwH,EAAMtD,UACVoL,EAAetP,GACfwH,EAAMI,cAAc/D,GACpBiE,EAAQC,EAAMC,MAGhB,SAASoC,GAAcpK,IACC,IAAlBwH,EAAMtD,SACVlE,EAAMsO,iBAGR9G,EAAM1D,WAAWuD,iBAAiB,cAAe+C,IACjD5C,EAAM1D,WAAWuD,iBAAiB,cAAegD,GACjD7C,EAAM1D,WAAWuD,iBAAiB,QAASiD,GAAc,CACvD4F,SAAS,IAEX1I,EAAM1D,WAAWuD,iBAAiB,aAAckD,GAAc,CAC5D2F,SAAS,IAEX1I,EAAM1D,WAAWuD,iBAAiB,WAAYmD,IAC9ChD,EAAM1D,WAAWuD,iBAAiB,YAAaoD,GAAa,CAC1DyF,SAAS,IAGXjM,KAAK4D,UC/2BF,SAASsI,EAAaC,EAAmBhH,GAC9C,MAAMiH,EAAQjH,EAASgH,EAAME,YAC7BF,EAAMG,MAAMC,IAAKpO,IACfA,EAAEqO,IAAIrN,GAAKiN,EACXjO,EAAEqO,IAAIpN,GAAKgN,EACXjO,EAAEqO,IAAInN,GAAK+M,IAEbD,EAAME,YAAclH,EAGtB,SAASsH,EAAgBC,EAAUnQ,EAAWoQ,GAC5C,IAAIC,EAAQ,EACRC,EAAMH,EAAIxT,OAAS,EACvB,MAAO0T,GAASC,EAAK,CACnB,MAAMC,EAAMrM,KAAKsM,OAAOH,EAAQC,GAAO,GACjCG,EAAML,EAAQpQ,EAAQmQ,EAAII,IAChC,GAAW,GAAPE,EACF,OAAOF,EAELE,EAAM,EACRH,EAAMC,EAAM,EAEZF,EAAQE,EAAM,EAGlB,OAAQ,EAGV,SAASG,EAAaC,EAAYC,GAChC,OAAID,EAAE/N,GAAKgO,EAAEhO,EAAU+N,EAAE/N,EAAIgO,EAAEhO,EAC3B+N,EAAE9N,GAAK+N,EAAE/N,EAAU8N,EAAE9N,EAAI+N,EAAE/N,EACxB8N,EAAE7N,EAAI8N,EAAE9N,EAGjB,SAAS+N,EAAMC,GACbA,EAAOC,KAAKL,GACZ,MAAMM,EAAS,CAACF,EAAO,IACvB,IAAK,IAAIrU,EAAI,EAAGA,EAAIqU,EAAOnU,OAAQF,IAC5BqU,EAAOrU,GAAGwU,OAAOH,EAAOrU,EAAI,KAC/BuU,EAAO/T,KAAK6T,EAAOrU,IAGvB,OAAOuU,EAGT,SAASE,EACPC,EACAC,EACAC,GAEA,MAAMzB,EAAQ,CACd,SAAiB,GAoBjB,OAnBAA,EAAMG,MAAQoB,EAAanB,IAAI,CAAC9R,EAAGoT,KAC1B,CAAErB,IAAK,OAAF,UAAO/R,GAAK6E,GAAIuO,EAAM,EAAGC,QAAS,KAEhD3B,EAAM4B,OAASJ,EAAapB,IAAI,CAACyB,EAAIH,KAC5B,CACLI,QAASD,EAAG,GACZE,QAASF,EAAG,GACZG,OAAO,EACP7O,GAAIuO,EAAM,EACVC,QAAS,KAGb3B,EAAMyB,OAASA,EAAOrB,IAAI,CAAC6B,EAAOP,KACzB,CACLvO,GAAIuO,EAAM,EACVC,QAAS,EACTO,QAASD,KAGNjC,EAGF,SAASmC,EAAYC,GAC1B,IAAIC,EAAWD,EAAKC,SACG,OAAnBA,EAASC,QACXD,EAAWA,EAASE,gBAEtB,MAAMhM,EAAW8L,EAASG,aAAa,YACvC,GAAyB,GAArBjM,EAASkM,SACX,KAAM,wCAAwClM,EAASkM,SAEzD,MAAMC,EAAwB,IAAIC,MAChCpM,EAASqM,MAAM7V,OAASwJ,EAASkM,UAEnCL,EAAKS,oBACL,MAAMC,EAAcV,EAAKU,YACzB,IAAK,IAAIjW,EAAI,EAAGA,EAAI6V,EAAW3V,OAAQF,IACrC6V,EAAW7V,GAAK,IAAI,OAClB0J,EAASqM,MAAU,EAAJ/V,GACf0J,EAASqM,MAAU,EAAJ/V,EAAQ,GACvB0J,EAASqM,MAAU,EAAJ/V,EAAQ,IACvBkW,aAAaD,GAGjB,MAAM5B,EAASD,EAAMyB,GACfM,EAAa,CACnB,MAAmB,IACnB9B,EAAO+B,QAAQ,CAAC3U,EAAGoT,KACjBsB,EAAW7C,MAAM9S,KAAK,CAAEsU,QAAS,EAAGtB,IAAK,OAAF,UAAO/R,GAAK6E,GAAIuO,EAAM,MAE/D,MAAMF,EAAe,IAAImB,MACnBO,EAAgB,IAAIP,MAC1B,IAAK,IAAI9V,EAAI,EAAGA,EAAI6V,EAAW3V,OAAQF,GAAK,EAAG,CAC7C,MAAMkU,EAAIT,EAAaY,EAAQwB,EAAW7V,GAAIiU,GAAgB,EACxDE,EAAIV,EAAaY,EAAQwB,EAAW7V,EAAI,GAAIiU,GAAgB,EAC5DhQ,EAAIwP,EAAaY,EAAQwB,EAAW7V,EAAI,GAAIiU,GAAgB,EAC5Dc,EAAS,CACb,CAACb,EAAGC,GACJ,CAACD,EAAGjQ,GACJ,CAACkQ,EAAGlQ,IAEN8Q,EAAOqB,QAASpB,IACVA,EAAG,GAAKA,EAAG,IACbL,EAAanU,KAAKwU,KAGtBqB,EAAc7V,KAAK,CAAC0T,EAAGC,EAAGlQ,IAK5B,OAHAuB,QAAQ8Q,IACN,GAAG3B,EAAazU,yBAAyB2V,EAAW3V,kBAAkBmU,EAAOnU,wBAExEuU,EAAQJ,EAAQM,EAAc0B,GCpHvC,SAASE,EACPnB,EACAoB,EACAC,GAEA,IAAIjB,EAAW,IAAI,OACflC,EAAQ8B,EAAMC,QAAQ9B,IAAKjN,GAAOkQ,EAAQjS,IAAI+B,IAE9CoQ,EAAMpD,EAAMC,IAAKpO,GAAM,IAAI,OAAcA,EAAGqO,IAAIrN,EAAGhB,EAAGqO,IAAIpN,EAAGjB,EAAGqO,IAAInN,IACpEsQ,EAAY,GACZC,EAASF,EAAI,GACjB,IAAK,IAAI1W,EAAI,EAAGA,EAAI0W,EAAIxW,OAAQF,IAC9B2W,EAAUnW,KAAKoW,GACfD,EAAUnW,KAAKkW,EAAI1W,EAAI,IACvB2W,EAAUnW,KAAKkW,EAAI1W,IAGrBwV,EAASqB,cAAcF,GACvBnB,EAASsB,uBACT,OACAL,EAAMlK,IACJ,IAAI,OACFiJ,EACA,IAAI,OAAwB,CAC1BuB,MAAO,SACPC,KAAM,OACNC,SAAU,SACVC,kBAAmB,OAM3B,SAASC,EAAWV,EAAoBW,GACtCA,EAAYC,OAAOjB,QAASjD,I,MAC1B,IAAImE,EAAQ,IAAIC,IAChBpE,EAAMG,MAAM8C,QAASoB,IACnBF,EAAM3K,IAAI6K,EAAKlR,GAAIkR,KAErBhS,QAAQ8Q,IAAI,UAAUnD,EAAMG,MAAMpT,QAClC,MAAMuX,EAAW,IAAI,OAAwB,CAC3CV,MAAO,MAEG,QAAZ,EAAA5D,EAAMyB,cAAM,SAAEwB,QAAShB,I,MACrB,IAAI9B,EAAkC,QAAb,EAAA8B,EAAMC,eAAO,eAAE9B,IAAKsB,GAC3CyC,EAAM/S,IAAIsQ,IAEZ,MAAMR,EAASf,EAAMC,IAClBpO,GAAM,IAAI,OAAcA,EAAEqO,IAAIrN,EAAGhB,EAAEqO,IAAIpN,EAAGjB,EAAEqO,IAAInN,IAE7CmP,EAAW,IAAI,OACrBA,EAASqB,cAAcxC,GACvB,MAAMqD,EAAO,IAAI,OAAWlC,EAAUiC,GACtCC,EAAKrU,KAAO,WACZoT,EAAMlK,IAAImL,GACVnB,EAAiBnB,EAAOkC,EAAOb,OAGnC,IAAIkB,EAAS,IAAI,OACbC,EAAUD,EAAOE,KAAK,KACtBC,EAAUH,EAAOE,KAAK,KAC1B,MAAMtC,EAAO,IAAI,OACf,IAAI,OAAkD,GAA7B6B,EAAYW,eAAsB,GAAI,IAC/D,IAAI,OAAwB,CAC1BxE,IAAKqE,EACLE,QAASA,EACTE,UAAW,GACXC,YAAaN,EAAOE,KAAK,KACzBK,SAAU,IAAI,OAAY,QAC1BlB,KAAM,OACNC,SAAU,IAAI,OAAY,UAC1BC,kBAAmB,MAGvBT,EAAMlK,IAAIgJ,GACV,IAAI4C,EAAQ,IAAI,OAAuB,UACvCA,EAAMzO,SAASiD,IAAI,EAAG,EAAG,GAAGyL,YAC5B3B,EAAMlK,IAAI,IAAI,OAAiB,WAC/BkK,EAAMlK,IAAI4L,GACV1B,EAAMlK,IAAI,IAAI,OAAmB,SAAU,KAG7C,SAAS8L,EAA4BC,GACnC,MAAMC,EAASD,EAASzR,WAClBd,EAAQwS,EAAOtI,YACfjK,EAASuS,EAAO3I,aAChB4I,EAAaD,EAAOxS,QAAUA,GAASwS,EAAOvS,SAAWA,EAI/D,OAHIwS,GACFF,EAASG,QAAQ1S,EAAOC,GAAQ,GAE3BwS,EAGM,qBAAgB,CAC7B/U,KAAM,cACN/D,KAAM,WACJ,MAAO,CACLgZ,eAAgB,IAAI,OACpBC,KAAM,GACNhB,OAAQ,IAAI,OACZP,YAAa,GACb7Q,YAAa,GACbqS,gBAAiB,GACjBnC,MAAO,GACPhQ,WAAY,KAGhBoS,MAAO,CACLC,MAAOC,QAETC,QAAS,CACP,eACE,MAAM5B,EAA2B6B,KAAKC,MACpCD,KAAKE,UAAUnS,KAAKoQ,cAEhBjE,EAAQmC,EAAYtO,KAAK4R,iBAC/BzF,EAAME,YAAcrM,KAAKoS,eAAiB,IAC1CjG,EAAMkG,kBAAoB,SAC1BlG,EAAM7M,GAAKmB,KAAKuE,OAAOoL,EAAYC,OAAO9D,IAAK3R,GAAMA,EAAE0E,KAAO,EAC9D8Q,EAAYC,OAAO7W,KAAK2S,GACxBnM,KAAKP,WAAawS,KAAKE,UAAU/B,IAEnC,gBAAgBkC,GACd,MAAMC,EAAevS,KAAKoS,eAAiB,IAC3C5T,QAAQ8Q,IAAItP,KAAKoS,gBAEjB,IAAI5D,EAAW,IAAI,OAAmB8D,EAAM,CAC1CX,KAAM3R,KAAK2R,KACXa,KAAMD,EAAe,EACrBvT,OAAQ,MAEV,OAAOwP,GAETiE,QAAS,SAAUH,EAAc7C,GAC/B,MAAM8C,EAAevS,KAAKoS,eAAiB,IAC3C,IAAI5D,EAAWxO,KAAK0S,gBAAgBJ,GAChC/D,EAAO,IAAI,OACbC,EACA,IAAI,OAAwB,CAAEuB,MAAO,UAEvCxB,EAAK7L,SAASvD,EAAoB,IAAfoT,EACnBhE,EAAK7L,SAASrD,EAAIkT,EAClBhE,EAAK7L,SAAStD,EAAmB,GAAfmT,EAClB9C,EAAMlK,IAAIgJ,GACVvO,KAAK4R,gBAAkBrD,IAG3BoE,QAAS,W,sDACP,MAAMpB,EAA4BvR,KAAK4S,MAAM,UAC7CpU,QAAQ8Q,IAAIiC,GACZ,MAAMsB,QAAqB,oDAC3B7S,KAAK2R,KAAO3R,KAAK2Q,OAAOuB,MAAMW,GAC9B,MAAMC,EAAQ,GACRC,EAAO,IACPC,EAAS,IAAI,OACjB,GACAzB,EAAOxS,MAAQwS,EAAOvS,OACtB8T,EACAC,GAGIzB,EAAW,IAAI,OAAoB,CAAEC,WAC3CD,EAAS2B,cAAc,IAAI,OAAY,WAEvC3B,EAASG,QAAQF,EAAOxS,MAAOwS,EAAOvS,QAEtC,MAAMkU,EAAW,IAAI,EAAcF,EAAQ1B,EAASzR,YACpDqT,EAASlS,UAAY,GACrBkS,EAAShT,YAAsB,EAAR4S,EACvBI,EAAS/S,YAAc4S,EACrBG,EAA2C9P,iBAC3C,SACChG,IACC4C,KAAKmT,MAAMzB,eAAevS,EAAI6T,EAAOtQ,SAASvD,EAC9Ca,KAAKmT,MAAMzB,eAAetS,EAAI4T,EAAOtQ,SAAStD,EAC9CY,KAAKmT,MAAMzB,eAAerS,EAAI2T,EAAOtQ,SAASrD,IAGlD,MAAMoQ,EAAQ,IAAI,OAClBzP,KAAKyP,MAAQA,EAEbzP,KAAKoQ,kBAAoB,oDACzBpQ,KAAKoQ,YAAYC,OAAOjB,QAASxU,GAC/BsR,EAAatR,EAAGoF,KAAKoQ,YAAYW,iBAGnCZ,EAAWV,EAAOzP,KAAKoQ,aACvBpQ,KAAKyS,QAAQ,QAAShD,GAEtBuD,EAAOtQ,SAASiD,IAAI,EAAG,EAAG3F,KAAKoQ,YAAYgD,gBAC3CJ,EAAOvN,OAAO,EAAG,EAAG,GAEpB,MAAM4N,EAAUC,IACd,GAAIjC,EAA4BC,GAAW,CACzC,MAAMC,EAASD,EAASzR,WACxBmT,EAAOO,OAAShC,EAAOtI,YAAcsI,EAAO3I,aAC5CoK,EAAOtP,yBAGT4N,EAAS+B,OAAO5D,EAAOuD,GACvBE,EAAStP,SAET4P,sBAAsBH,IAGxBG,sBAAsBH,OAExBI,SAAU,CACR,iBACE,OAAOhT,KAAKuE,OAAOhF,KAAKoQ,YAAYC,OAAO9D,IAAK3R,GAAMA,EAAEyR,eAE1D,IACE,OAAOrM,KAAK0R,eAAevS,EAAEuU,QAAQ,IAEvC,IACE,OAAO1T,KAAK0R,eAAetS,EAAEsU,QAAQ,IAEvC,IACE,OAAO1T,KAAK0R,eAAerS,EAAEqU,QAAQ,KAGzCC,MAAO,CACLpU,YAAa,SAAUqU,EAASC,GAC9BrV,QAAQ8Q,IAAI,CAAEsE,YACd,MAAMpF,EAAWxO,KAAK0S,gBAAgBkB,GACtC5T,KAAK4R,gBAAgBpD,SAASvI,UAC9BjG,KAAK4R,gBAAgBpD,SAAWA,EAChCA,EAASsF,qBACT,MAAMC,EAAcvF,EAASuF,YACvBC,EAAYD,EAAY/O,IAAI7F,EAAI4U,EAAYhP,IAAI5F,EACtDa,KAAK4R,gBAAgBlP,SAASvD,EAAiB,IAAZ6U,MC7OzC,EAAOX,OAAS,EAED,QCDA,iBAAgB,CAC7B5W,KAAM,MACNwX,WAAY,CACVC,gB,UCFJ,EAAOb,OAAS,EAED,QCJf,eAAUc,GAAKC,MAAM,S,4CCHrBzZ,EAAOD,QAAU,IAA0B","file":"js/app.5fa08569.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d0a2e14\":\"c553a5b7\",\"chunk-2d0e28b4\":\"b9c050f0\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/earth-specular.f296b6cc.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=195a448a&lang=css\"","module.exports = __webpack_public_path__ + \"img/earthmap1k.49c3b412.jpg\";","<template>\n  <HelloWorld />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport HelloWorld from \"./components/HelloWorld.vue\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    HelloWorld,\n  },\n});\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <div class=\"hello\">\n    <canvas ref=\"canvas\" width=\"800\" height=\"600\"></canvas>\n    <div>\n      <span style=\"padding: 10px\"> x: {{ x }} y: {{ y }} z: {{ z }} </span>\n      <label style=\"padding: 10px\" for=\"text\">Text</label>\n      <input id=\"text\" type=\"text\" v-model=\"displayText\" />\n      <button v-on:click=\"outputToJson()\">Output</button>\n    </div>\n    <textarea v-bind:value=\"outputJson\"></textarea>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport * as THREE from \"three\";\nimport { DysonNode, DysonShell, DysonSphere } from \"../DysonSphereModel\";\nimport earth from \"@/assets/earthmap1k.jpg\";\nimport earthBump from \"@/assets/earthbump1k.jpg\";\nimport earthSpecular from \"@/assets/earth-specular.png\";\nimport { OrbitControls } from \"../OrbitControls\";\nimport { RescaleLayer, MeshToLayer } from \"../utils/DysonSphereUtils\";\n\nfunction geometryForShell(\n  shell: DysonShell,\n  nodeMap: Map<number, DysonNode>,\n  scene: THREE.Scene\n) {\n  let geometry = new THREE.BufferGeometry();\n  let nodes = shell.nodeIds.map((id) => nodeMap.get(id));\n\n  let pts = nodes.map((n) => new THREE.Vector3(n!.pos.x, n!.pos.y, n!.pos.z));\n  let triangles = [];\n  let origin = pts[0];\n  for (let i = 2; i < pts.length; i++) {\n    triangles.push(origin);\n    triangles.push(pts[i - 1]);\n    triangles.push(pts[i]);\n  }\n\n  geometry.setFromPoints(triangles);\n  geometry.computeVertexNormals();\n  THREE.Triangle;\n  scene.add(\n    new THREE.Mesh(\n      geometry,\n      new THREE.MeshPhongMaterial({\n        color: \"orange\",\n        side: THREE.DoubleSide,\n        emissive: \"orange\",\n        emissiveIntensity: 0.1,\n      })\n    )\n  );\n}\n\nfunction loadSphere(scene: THREE.Scene, dysonSphere: DysonSphere) {\n  dysonSphere.layers.forEach((layer) => {\n    let idMap = new Map<number, DysonNode>();\n    layer.nodes.forEach((node) => {\n      idMap.set(node.id, node);\n    });\n    console.log(`Nodes: ${layer.nodes.length}`);\n    const material = new THREE.LineBasicMaterial({\n      color: 0x0000ff,\n    });\n    layer.shells?.forEach((shell) => {\n      let nodes: DysonNode[] = shell.nodeIds?.map((idx) =>\n        idMap.get(idx)\n      ) as DysonNode[];\n      const points = nodes.map(\n        (n) => new THREE.Vector3(n.pos.x, n.pos.y, n.pos.z)\n      );\n      const geometry = new THREE.BufferGeometry();\n      geometry.setFromPoints(points);\n      const line = new THREE.Line(geometry, material);\n      line.type = \"LineLoop\";\n      scene.add(line);\n      geometryForShell(shell, idMap, scene);\n    });\n  });\n  let loader = new THREE.TextureLoader();\n  let texture = loader.load(earth);\n  let bumpMap = loader.load(earthBump);\n  const mesh = new THREE.Mesh(\n    new THREE.SphereGeometry(dysonSphere.minOrbitRadius * 0.7, 32, 32),\n    new THREE.MeshPhongMaterial({\n      map: texture,\n      bumpMap: bumpMap,\n      bumpScale: 0.5,\n      specularMap: loader.load(earthSpecular),\n      specular: new THREE.Color(\"grey\"),\n      side: THREE.DoubleSide,\n      emissive: new THREE.Color(0xffffff),\n      emissiveIntensity: 0.1,\n    })\n  );\n  scene.add(mesh);\n  let light = new THREE.DirectionalLight(0xffffff);\n  light.position.set(0, 1, 1).normalize();\n  scene.add(new THREE.PointLight(0xffffff));\n  scene.add(light);\n  scene.add(new THREE.AmbientLight(0xffffff, 0.3));\n}\n\nfunction resizeRendererToDisplaySize(renderer: THREE.Renderer) {\n  const canvas = renderer.domElement;\n  const width = canvas.clientWidth;\n  const height = canvas.clientHeight;\n  const needResize = canvas.width !== width || canvas.height !== height;\n  if (needResize) {\n    renderer.setSize(width, height, false);\n  }\n  return needResize;\n}\n\nexport default defineComponent({\n  name: \"DysonSphere\",\n  data: function () {\n    return {\n      cameraPosition: new THREE.Vector3(),\n      font: {} as THREE.Font,\n      loader: new THREE.FontLoader(),\n      dysonSphere: {} as DysonSphere,\n      displayText: \"\",\n      displayTextMesh: {} as THREE.Mesh,\n      scene: {} as THREE.Scene,\n      outputJson: \"\",\n    };\n  },\n  props: {\n    dyson: String,\n  },\n  methods: {\n    outputToJson() {\n      const dysonSphere: DysonSphere = JSON.parse(\n        JSON.stringify(this.dysonSphere)\n      );\n      const layer = MeshToLayer(this.displayTextMesh);\n      layer.orbitRadius = this.maxLayerRadius + 1000;\n      layer.orbitAngularSpeed = 1.142905;\n      layer.id = Math.max(...dysonSphere.layers.map((l) => l.id)) + 1;\n      dysonSphere.layers.push(layer);\n      this.outputJson = JSON.stringify(dysonSphere);\n    },\n    geometryForText(text: string) {\n      const textDistance = this.maxLayerRadius + 1000;\n      console.log(this.maxLayerRadius);\n\n      let geometry = new THREE.TextGeometry(text, {\n        font: this.font,\n        size: textDistance / 3,\n        height: 0.02,\n      });\n      return geometry;\n    },\n    addText: function (text: string, scene: THREE.Scene) {\n      const textDistance = this.maxLayerRadius + 1000;\n      let geometry = this.geometryForText(text);\n      let mesh = new THREE.Mesh(\n        geometry,\n        new THREE.MeshBasicMaterial({ color: \"pink\" })\n      );\n      mesh.position.x = -textDistance * 0.5;\n      mesh.position.z = textDistance;\n      mesh.position.y = textDistance * 0.8;\n      scene.add(mesh);\n      this.displayTextMesh = mesh;\n    },\n  },\n  mounted: async function () {\n    const canvas: HTMLCanvasElement = this.$refs[\"canvas\"] as HTMLCanvasElement;\n    console.log(canvas);\n    const JetbrainMono = await import(\"@/assets/JetBrains_Mono_NL_Regular\");\n    this.font = this.loader.parse(JetbrainMono);\n    const znear = 0.1;\n    const zfar = 200000;\n    const camera = new THREE.PerspectiveCamera(\n      75,\n      canvas.width / canvas.height,\n      znear,\n      zfar\n    );\n\n    const renderer = new THREE.WebGLRenderer({ canvas });\n    renderer.setClearColor(new THREE.Color(0xaaaaaa));\n\n    renderer.setSize(canvas.width, canvas.height);\n\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.zoomSpeed = 0.5;\n    controls.minDistance = znear * 2;\n    controls.maxDistance = zfar;\n    ((controls as any) as THREE.EventDispatcher).addEventListener(\n      \"change\",\n      (o) => {\n        this.$data.cameraPosition.x = camera.position.x;\n        this.$data.cameraPosition.y = camera.position.y;\n        this.$data.cameraPosition.z = camera.position.z;\n      }\n    );\n    const scene = new THREE.Scene();\n    this.scene = scene;\n\n    this.dysonSphere = await import(\"@/assets/large_sphere.json\");\n    this.dysonSphere.layers.forEach((l) =>\n      RescaleLayer(l, this.dysonSphere.minOrbitRadius)\n    );\n\n    loadSphere(scene, this.dysonSphere);\n    this.addText(\"D S P\", scene);\n\n    camera.position.set(0, 0, this.dysonSphere.maxOrbitRadius);\n    camera.lookAt(0, 0, 0);\n\n    const render = (time: number) => {\n      if (resizeRendererToDisplaySize(renderer)) {\n        const canvas = renderer.domElement;\n        camera.aspect = canvas.clientWidth / canvas.clientHeight;\n        camera.updateProjectionMatrix();\n      }\n\n      renderer.render(scene, camera);\n      controls.update();\n\n      requestAnimationFrame(render);\n    };\n\n    requestAnimationFrame(render);\n  },\n  computed: {\n    maxLayerRadius(): number {\n      return Math.max(...this.dysonSphere.layers.map((l) => l.orbitRadius));\n    },\n    x(): string {\n      return this.cameraPosition.x.toFixed(4);\n    },\n    y(): string {\n      return this.cameraPosition.y.toFixed(4);\n    },\n    z(): string {\n      return this.cameraPosition.z.toFixed(4);\n    },\n  },\n  watch: {\n    displayText: function (newText, oldTextt) {\n      console.log({ newText });\n      const geometry = this.geometryForText(newText);\n      this.displayTextMesh.geometry.dispose();\n      this.displayTextMesh.geometry = geometry;\n      geometry.computeBoundingBox();\n      const boundingBox = geometry.boundingBox!;\n      const textWidth = boundingBox.max.x - boundingBox.min.x;\n      this.displayTextMesh.position.x = -textWidth * 0.5;\n    },\n  },\n});\n</script>\n\n<style scoped></style>\n","import * as THREE from \"three\";\n\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = {\n  type: \"change\",\n};\nconst _startEvent = {\n  type: \"start\",\n};\nconst _endEvent = {\n  type: \"end\",\n};\n\nexport class OrbitControls extends THREE.EventDispatcher {\n  constructor(object, domElement) {\n    super();\n    if (domElement === undefined)\n      console.warn(\n        'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.'\n      );\n    if (domElement === document)\n      console.error(\n        'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\n      );\n    this.object = object;\n    this.domElement = domElement; // Set to false to disable this control\n\n    this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n    this.target = new THREE.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n    this.minDistance = 0;\n    this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n    this.minZoom = 0;\n    this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n\n    this.minPolarAngle = 0; // radians\n\n    this.maxPolarAngle = Math.PI; // radians\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\n    this.minAzimuthAngle = -Infinity; // radians\n\n    this.maxAzimuthAngle = Infinity; // radians\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n\n    this.enableDamping = false;\n    this.dampingFactor = 0.05; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0; // Set to false to disable panning\n\n    this.enablePan = true;\n    this.panSpeed = 1.0;\n    this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n    // The four arrow keys\n\n    this.keys = {\n      LEFT: \"ArrowLeft\",\n      UP: \"ArrowUp\",\n      RIGHT: \"ArrowRight\",\n      BOTTOM: \"ArrowDown\",\n    }; // Mouse buttons\n\n    this.mouseButtons = {\n      LEFT: THREE.MOUSE.ROTATE,\n      MIDDLE: THREE.MOUSE.DOLLY,\n      RIGHT: THREE.MOUSE.PAN,\n    }; // Touch fingers\n\n    this.touches = {\n      ONE: THREE.TOUCH.ROTATE,\n      TWO: THREE.TOUCH.DOLLY_PAN,\n    }; // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom; // the target DOM element for key events\n\n    this._domElementKeyEvents = null; //\n    // public methods\n    //\n\n    this.getPolarAngle = function () {\n      return spherical.phi;\n    };\n\n    this.getAzimuthalAngle = function () {\n      return spherical.theta;\n    };\n\n    this.listenToKeyEvents = function (domElement) {\n      domElement.addEventListener(\"keydown\", onKeyDown);\n      this._domElementKeyEvents = domElement;\n    };\n\n    this.saveState = function () {\n      scope.target0.copy(scope.target);\n      scope.position0.copy(scope.object.position);\n      scope.zoom0 = scope.object.zoom;\n    };\n\n    this.reset = function () {\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.zoom = scope.zoom0;\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(_changeEvent);\n      scope.update();\n      state = STATE.NONE;\n    }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n    this.update = (function () {\n      const offset = new THREE.Vector3(); // so camera.up is the orbit axis\n\n      const quat = new THREE.Quaternion().setFromUnitVectors(\n        object.up,\n        new THREE.Vector3(0, 1, 0)\n      );\n      const quatInverse = quat.clone().invert();\n      const lastPosition = new THREE.Vector3();\n      const lastQuaternion = new THREE.Quaternion();\n      const twoPI = 2 * Math.PI;\n      return function update() {\n        const position = scope.object.position;\n        offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n        offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n        spherical.setFromVector3(offset);\n\n        if (scope.autoRotate && state === STATE.NONE) {\n          rotateLeft(getAutoRotationAngle());\n        }\n\n        if (scope.enableDamping) {\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n        } else {\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi;\n        } // restrict theta to be between desired limits\n\n        let min = scope.minAzimuthAngle;\n        let max = scope.maxAzimuthAngle;\n\n        if (isFinite(min) && isFinite(max)) {\n          if (min < -Math.PI) min += twoPI;\n          else if (min > Math.PI) min -= twoPI;\n          if (max < -Math.PI) max += twoPI;\n          else if (max > Math.PI) max -= twoPI;\n\n          if (min <= max) {\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta));\n          } else {\n            spherical.theta =\n              spherical.theta > (min + max) / 2\n                ? Math.max(min, spherical.theta)\n                : Math.min(max, spherical.theta);\n          }\n        } // restrict phi to be between desired limits\n\n        spherical.phi = Math.max(\n          scope.minPolarAngle,\n          Math.min(scope.maxPolarAngle, spherical.phi)\n        );\n        spherical.makeSafe();\n        spherical.radius *= scale; // restrict radius to be between desired limits\n\n        spherical.radius = Math.max(\n          scope.minDistance,\n          Math.min(scope.maxDistance, spherical.radius)\n        ); // move target to panned location\n\n        if (scope.enableDamping === true) {\n          scope.target.addScaledVector(panOffset, scope.dampingFactor);\n        } else {\n          scope.target.add(panOffset);\n        }\n\n        offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n        offset.applyQuaternion(quatInverse);\n        position.copy(scope.target).add(offset);\n        scope.object.lookAt(scope.target);\n\n        if (scope.enableDamping === true) {\n          sphericalDelta.theta *= 1 - scope.dampingFactor;\n          sphericalDelta.phi *= 1 - scope.dampingFactor;\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\n        } else {\n          sphericalDelta.set(0, 0, 0);\n          panOffset.set(0, 0, 0);\n        }\n\n        scale = 1; // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (\n          zoomChanged ||\n          lastPosition.distanceToSquared(scope.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n        ) {\n          scope.dispatchEvent(_changeEvent);\n          lastPosition.copy(scope.object.position);\n          lastQuaternion.copy(scope.object.quaternion);\n          zoomChanged = false;\n          return true;\n        }\n\n        return false;\n      };\n    })();\n\n    this.dispose = function () {\n      scope.domElement.removeEventListener(\"contextmenu\", onContextMenu);\n      scope.domElement.removeEventListener(\"pointerdown\", onPointerDown);\n      scope.domElement.removeEventListener(\"wheel\", onMouseWheel);\n      scope.domElement.removeEventListener(\"touchstart\", onTouchStart);\n      scope.domElement.removeEventListener(\"touchend\", onTouchEnd);\n      scope.domElement.removeEventListener(\"touchmove\", onTouchMove);\n      scope.domElement.ownerDocument.removeEventListener(\n        \"pointermove\",\n        onPointerMove\n      );\n      scope.domElement.ownerDocument.removeEventListener(\n        \"pointerup\",\n        onPointerUp\n      );\n\n      if (scope._domElementKeyEvents !== null) {\n        scope._domElementKeyEvents.removeEventListener(\"keydown\", onKeyDown);\n      } //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n    }; //\n    // internals\n    //\n\n    const scope = this;\n    const STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_PAN: 4,\n      TOUCH_DOLLY_PAN: 5,\n      TOUCH_DOLLY_ROTATE: 6,\n    };\n    let state = STATE.NONE;\n    const EPS = 0.000001; // current position in spherical coordinates\n\n    const spherical = new THREE.Spherical();\n    const sphericalDelta = new THREE.Spherical();\n    let scale = 1;\n    const panOffset = new THREE.Vector3();\n    let zoomChanged = false;\n    const rotateStart = new THREE.Vector2();\n    const rotateEnd = new THREE.Vector2();\n    const rotateDelta = new THREE.Vector2();\n    const panStart = new THREE.Vector2();\n    const panEnd = new THREE.Vector2();\n    const panDelta = new THREE.Vector2();\n    const dollyStart = new THREE.Vector2();\n    const dollyEnd = new THREE.Vector2();\n    const dollyDelta = new THREE.Vector2();\n\n    function getAutoRotationAngle() {\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n    }\n\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n\n    function rotateLeft(angle) {\n      sphericalDelta.theta -= angle;\n    }\n\n    function rotateUp(angle) {\n      sphericalDelta.phi -= angle;\n    }\n\n    const panLeft = (function () {\n      const v = new THREE.Vector3();\n      return function panLeft(distance, objectMatrix) {\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n        v.multiplyScalar(-distance);\n        panOffset.add(v);\n      };\n    })();\n\n    const panUp = (function () {\n      const v = new THREE.Vector3();\n      return function panUp(distance, objectMatrix) {\n        if (scope.screenSpacePanning === true) {\n          v.setFromMatrixColumn(objectMatrix, 1);\n        } else {\n          v.setFromMatrixColumn(objectMatrix, 0);\n          v.crossVectors(scope.object.up, v);\n        }\n\n        v.multiplyScalar(distance);\n        panOffset.add(v);\n      };\n    })(); // deltaX and deltaY are in pixels; right and down are positive\n\n    const pan = (function () {\n      const offset = new THREE.Vector3();\n      return function pan(deltaX, deltaY) {\n        const element = scope.domElement;\n\n        if (scope.object.isPerspectiveCamera) {\n          // perspective\n          const position = scope.object.position;\n          offset.copy(position).sub(scope.target);\n          let targetDistance = offset.length(); // half of the fov is center to top of screen\n\n          targetDistance *= Math.tan(\n            ((scope.object.fov / 2) * Math.PI) / 180.0\n          ); // we use only clientHeight here so aspect ratio does not distort speed\n\n          panLeft(\n            (2 * deltaX * targetDistance) / element.clientHeight,\n            scope.object.matrix\n          );\n          panUp(\n            (2 * deltaY * targetDistance) / element.clientHeight,\n            scope.object.matrix\n          );\n        } else if (scope.object.isOrthographicCamera) {\n          // orthographic\n          panLeft(\n            (deltaX * (scope.object.right - scope.object.left)) /\n              scope.object.zoom /\n              element.clientWidth,\n            scope.object.matrix\n          );\n          panUp(\n            (deltaY * (scope.object.top - scope.object.bottom)) /\n              scope.object.zoom /\n              element.clientHeight,\n            scope.object.matrix\n          );\n        } else {\n          // camera neither orthographic nor perspective\n          console.warn(\n            \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\n          );\n          scope.enablePan = false;\n        }\n      };\n    })();\n\n    function dollyOut(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(\n          scope.minZoom,\n          Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n        );\n        scope.enableZoom = false;\n      }\n    }\n\n    function dollyIn(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(\n          scope.minZoom,\n          Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n        );\n        scope.enableZoom = false;\n      }\n    } //\n    // event callbacks - update the object state\n    //\n\n    function handleMouseDownRotate(event) {\n      rotateStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseDownDolly(event) {\n      dollyStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseDownPan(event) {\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseMoveRotate(event) {\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta\n        .subVectors(rotateEnd, rotateStart)\n        .multiplyScalar(scope.rotateSpeed);\n      const element = scope.domElement;\n      rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n      rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n      rotateStart.copy(rotateEnd);\n      scope.update();\n    }\n\n    function handleMouseMoveDolly(event) {\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        dollyOut(getZoomScale());\n      } else if (dollyDelta.y < 0) {\n        dollyIn(getZoomScale());\n      }\n\n      dollyStart.copy(dollyEnd);\n      scope.update();\n    }\n\n    function handleMouseMovePan(event) {\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n      scope.update();\n    }\n\n    function handleMouseUp() {\n      // no-op\n    }\n\n    function handleMouseWheel(event) {\n      if (event.deltaY < 0) {\n        dollyIn(getZoomScale());\n      } else if (event.deltaY > 0) {\n        dollyOut(getZoomScale());\n      }\n\n      scope.update();\n    }\n\n    function handleKeyDown(event) {\n      let needsUpdate = false;\n\n      switch (event.code) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n      }\n\n      if (needsUpdate) {\n        // prevent the browser from scrolling on cursor keys\n        event.preventDefault();\n        scope.update();\n      }\n    }\n\n    function handleTouchStartRotate(event) {\n      if (event.touches.length == 1) {\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        rotateStart.set(x, y);\n      }\n    }\n\n    function handleTouchStartPan(event) {\n      if (event.touches.length == 1) {\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        panStart.set(x, y);\n      }\n    }\n\n    function handleTouchStartDolly(event) {\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      dollyStart.set(0, distance);\n    }\n\n    function handleTouchStartDollyPan(event) {\n      if (scope.enableZoom) handleTouchStartDolly(event);\n      if (scope.enablePan) handleTouchStartPan(event);\n    }\n\n    function handleTouchStartDollyRotate(event) {\n      if (scope.enableZoom) handleTouchStartDolly(event);\n      if (scope.enableRotate) handleTouchStartRotate(event);\n    }\n\n    function handleTouchMoveRotate(event) {\n      if (event.touches.length == 1) {\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        rotateEnd.set(x, y);\n      }\n\n      rotateDelta\n        .subVectors(rotateEnd, rotateStart)\n        .multiplyScalar(scope.rotateSpeed);\n      const element = scope.domElement;\n      rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n      rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n      rotateStart.copy(rotateEnd);\n    }\n\n    function handleTouchMovePan(event) {\n      if (event.touches.length == 1) {\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      } else {\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n        panEnd.set(x, y);\n      }\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n    }\n\n    function handleTouchMoveDolly(event) {\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      dollyEnd.set(0, distance);\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n      dollyOut(dollyDelta.y);\n      dollyStart.copy(dollyEnd);\n    }\n\n    function handleTouchMoveDollyPan(event) {\n      if (scope.enableZoom) handleTouchMoveDolly(event);\n      if (scope.enablePan) handleTouchMovePan(event);\n    }\n\n    function handleTouchMoveDollyRotate(event) {\n      if (scope.enableZoom) handleTouchMoveDolly(event);\n      if (scope.enableRotate) handleTouchMoveRotate(event);\n    }\n\n    function handleTouchEnd() {\n      // no-op\n    } //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n    function onPointerDown(event) {\n      if (scope.enabled === false) return;\n\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          onMouseDown(event);\n          break;\n        // TODO touch\n      }\n    }\n\n    function onPointerMove(event) {\n      if (scope.enabled === false) return;\n\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          onMouseMove(event);\n          break;\n        // TODO touch\n      }\n    }\n\n    function onPointerUp(event) {\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          onMouseUp(event);\n          break;\n        // TODO touch\n      }\n    }\n\n    function onMouseDown(event) {\n      // Prevent the browser from scrolling.\n      event.preventDefault(); // Manually set the focus since calling preventDefault above\n      // prevents the browser from setting it automatically.\n\n      scope.domElement.focus ? scope.domElement.focus() : window.focus();\n      let mouseAction;\n\n      switch (event.button) {\n        case 0:\n          mouseAction = scope.mouseButtons.LEFT;\n          break;\n\n        case 1:\n          mouseAction = scope.mouseButtons.MIDDLE;\n          break;\n\n        case 2:\n          mouseAction = scope.mouseButtons.RIGHT;\n          break;\n\n        default:\n          mouseAction = -1;\n      }\n\n      switch (mouseAction) {\n        case THREE.MOUSE.DOLLY:\n          if (scope.enableZoom === false) return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n          break;\n\n        case THREE.MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enablePan === false) return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          } else {\n            if (scope.enableRotate === false) return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          }\n\n          break;\n\n        case THREE.MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enableRotate === false) return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          } else {\n            if (scope.enablePan === false) return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          }\n\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) {\n        scope.domElement.ownerDocument.addEventListener(\n          \"pointermove\",\n          onPointerMove\n        );\n        scope.domElement.ownerDocument.addEventListener(\n          \"pointerup\",\n          onPointerUp\n        );\n        scope.dispatchEvent(_startEvent);\n      }\n    }\n\n    function onMouseMove(event) {\n      if (scope.enabled === false) return;\n      event.preventDefault();\n\n      switch (state) {\n        case STATE.ROTATE:\n          if (scope.enableRotate === false) return;\n          handleMouseMoveRotate(event);\n          break;\n\n        case STATE.DOLLY:\n          if (scope.enableZoom === false) return;\n          handleMouseMoveDolly(event);\n          break;\n\n        case STATE.PAN:\n          if (scope.enablePan === false) return;\n          handleMouseMovePan(event);\n          break;\n      }\n    }\n\n    function onMouseUp(event) {\n      scope.domElement.ownerDocument.removeEventListener(\n        \"pointermove\",\n        onPointerMove\n      );\n      scope.domElement.ownerDocument.removeEventListener(\n        \"pointerup\",\n        onPointerUp\n      );\n      if (scope.enabled === false) return;\n      handleMouseUp(event);\n      scope.dispatchEvent(_endEvent);\n      state = STATE.NONE;\n    }\n\n    function onMouseWheel(event) {\n      if (\n        scope.enabled === false ||\n        scope.enableZoom === false ||\n        (state !== STATE.NONE && state !== STATE.ROTATE)\n      )\n        return;\n      event.preventDefault();\n      scope.dispatchEvent(_startEvent);\n      handleMouseWheel(event);\n      scope.dispatchEvent(_endEvent);\n    }\n\n    function onKeyDown(event) {\n      if (scope.enabled === false || scope.enablePan === false) return;\n      handleKeyDown(event);\n    }\n\n    function onTouchStart(event) {\n      if (scope.enabled === false) return;\n      event.preventDefault(); // prevent scrolling\n\n      switch (event.touches.length) {\n        case 1:\n          switch (scope.touches.ONE) {\n            case THREE.TOUCH.ROTATE:\n              if (scope.enableRotate === false) return;\n              handleTouchStartRotate(event);\n              state = STATE.TOUCH_ROTATE;\n              break;\n\n            case THREE.TOUCH.PAN:\n              if (scope.enablePan === false) return;\n              handleTouchStartPan(event);\n              state = STATE.TOUCH_PAN;\n              break;\n\n            default:\n              state = STATE.NONE;\n          }\n\n          break;\n\n        case 2:\n          switch (scope.touches.TWO) {\n            case THREE.TOUCH.DOLLY_PAN:\n              if (scope.enableZoom === false && scope.enablePan === false)\n                return;\n              handleTouchStartDollyPan(event);\n              state = STATE.TOUCH_DOLLY_PAN;\n              break;\n\n            case THREE.TOUCH.DOLLY_ROTATE:\n              if (scope.enableZoom === false && scope.enableRotate === false)\n                return;\n              handleTouchStartDollyRotate(event);\n              state = STATE.TOUCH_DOLLY_ROTATE;\n              break;\n\n            default:\n              state = STATE.NONE;\n          }\n\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(_startEvent);\n      }\n    }\n\n    function onTouchMove(event) {\n      if (scope.enabled === false) return;\n      event.preventDefault(); // prevent scrolling\n\n      switch (state) {\n        case STATE.TOUCH_ROTATE:\n          if (scope.enableRotate === false) return;\n          handleTouchMoveRotate(event);\n          scope.update();\n          break;\n\n        case STATE.TOUCH_PAN:\n          if (scope.enablePan === false) return;\n          handleTouchMovePan(event);\n          scope.update();\n          break;\n\n        case STATE.TOUCH_DOLLY_PAN:\n          if (scope.enableZoom === false && scope.enablePan === false) return;\n          handleTouchMoveDollyPan(event);\n          scope.update();\n          break;\n\n        case STATE.TOUCH_DOLLY_ROTATE:\n          if (scope.enableZoom === false && scope.enableRotate === false)\n            return;\n          handleTouchMoveDollyRotate(event);\n          scope.update();\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n    }\n\n    function onTouchEnd(event) {\n      if (scope.enabled === false) return;\n      handleTouchEnd(event);\n      scope.dispatchEvent(_endEvent);\n      state = STATE.NONE;\n    }\n\n    function onContextMenu(event) {\n      if (scope.enabled === false) return;\n      event.preventDefault();\n    } //\n\n    scope.domElement.addEventListener(\"contextmenu\", onContextMenu);\n    scope.domElement.addEventListener(\"pointerdown\", onPointerDown);\n    scope.domElement.addEventListener(\"wheel\", onMouseWheel, {\n      passive: false,\n    });\n    scope.domElement.addEventListener(\"touchstart\", onTouchStart, {\n      passive: false,\n    });\n    scope.domElement.addEventListener(\"touchend\", onTouchEnd);\n    scope.domElement.addEventListener(\"touchmove\", onTouchMove, {\n      passive: false,\n    }); // force an update at start\n\n    this.update();\n  }\n} // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nexport class MapControls extends OrbitControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n    this.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n    this.mouseButtons.LEFT = THREE.MOUSE.PAN;\n    this.mouseButtons.RIGHT = THREE.MOUSE.ROTATE;\n    this.touches.ONE = THREE.TOUCH.PAN;\n    this.touches.TWO = THREE.TOUCH.DOLLY_ROTATE;\n  }\n}\n","import { Mesh, Vector3 } from \"three\";\nimport { DysonLayer } from \"../DysonSphereModel\";\n\nexport function RescaleLayer(layer: DysonLayer, radius: number) {\n  const ratio = radius / layer.orbitRadius;\n  layer.nodes.map((n) => {\n    n.pos.x *= ratio;\n    n.pos.y *= ratio;\n    n.pos.z *= ratio;\n  });\n  layer.orbitRadius = radius;\n}\n\nfunction binarySearch<T>(arr: T[], target: T, compare: (a: T, b: T) => number) {\n  let begin = 0;\n  let end = arr.length - 1;\n  while (begin <= end) {\n    const mid = Math.floor((begin + end) / 2);\n    const cmp = compare(target, arr[mid]);\n    if (cmp == 0) {\n      return mid;\n    }\n    if (cmp < 0) {\n      end = mid - 1;\n    } else {\n      begin = mid + 1;\n    }\n  }\n  return -1;\n}\n\nfunction pointCompare(a: Vector3, b: Vector3) {\n  if (a.x != b.x) return a.x - b.x;\n  if (a.y != b.y) return a.y - b.y;\n  return a.z - b.z;\n}\n\nfunction dedup(points: Vector3[]) {\n  points.sort(pointCompare);\n  const output = [points[0]];\n  for (let i = 1; i < points.length; i++) {\n    if (!points[i].equals(points[i - 1])) {\n      output.push(points[i]);\n    }\n  }\n  return output;\n}\n\nfunction ToLayer(\n  uniquePoints: Vector3[],\n  uniqueFrames: Array<number[]>,\n  shells: Array<number[]>\n) {\n  const layer = {} as DysonLayer;\n  layer.gridMode = 2;\n  layer.nodes = uniquePoints.map((p, idx) => {\n    return { pos: { ...p }, id: idx + 1, protoId: 0 };\n  });\n  layer.frames = uniqueFrames.map((fr, idx) => {\n    return {\n      nodeAId: fr[0],\n      nodeBId: fr[1],\n      euler: false,\n      id: idx + 1,\n      protoId: 1,\n    };\n  });\n  layer.shells = shells.map((shell, idx) => {\n    return {\n      id: idx + 1,\n      protoId: 0,\n      nodeIds: shell,\n    };\n  });\n  return layer;\n}\n\nexport function MeshToLayer(mesh: Mesh) {\n  let geometry = mesh.geometry;\n  if (geometry.index !== null) {\n    geometry = geometry.toNonIndexed();\n  }\n  const position = geometry.getAttribute(\"position\");\n  if (position.itemSize != 3) {\n    throw `Unexpected item size when exporting: ${position.itemSize}`;\n  }\n  const meshPoints: Vector3[] = new Array(\n    position.array.length / position.itemSize\n  );\n  mesh.updateMatrixWorld();\n  const matrixWorld = mesh.matrixWorld;\n  for (let i = 0; i < meshPoints.length; i++) {\n    meshPoints[i] = new Vector3(\n      position.array[i * 3],\n      position.array[i * 3 + 1],\n      position.array[i * 3 + 2]\n    ).applyMatrix4(matrixWorld);\n  }\n\n  const points = dedup(meshPoints);\n  const dysonLayer = {} as DysonLayer;\n  dysonLayer.nodes = [];\n  points.forEach((p, idx) => {\n    dysonLayer.nodes.push({ protoId: 0, pos: { ...p }, id: idx + 1 });\n  });\n  const uniqueFrames = new Array<number[]>();\n  const meshTriangles = new Array<number[]>();\n  for (let i = 0; i < meshPoints.length; i += 3) {\n    const a = binarySearch(points, meshPoints[i], pointCompare) + 1;\n    const b = binarySearch(points, meshPoints[i + 1], pointCompare) + 1;\n    const c = binarySearch(points, meshPoints[i + 2], pointCompare) + 1;\n    const frames = [\n      [a, b],\n      [a, c],\n      [b, c],\n    ];\n    frames.forEach((fr) => {\n      if (fr[0] < fr[1]) {\n        uniqueFrames.push(fr);\n      }\n    });\n    meshTriangles.push([a, b, c]);\n  }\n  console.log(\n    `${uniqueFrames.length} unique frames, ${meshPoints.length} points, ${points.length} unique points`\n  );\n  return ToLayer(points, uniqueFrames, meshTriangles);\n}\n","\nimport { defineComponent } from \"vue\";\nimport * as THREE from \"three\";\nimport { DysonNode, DysonShell, DysonSphere } from \"../DysonSphereModel\";\nimport earth from \"@/assets/earthmap1k.jpg\";\nimport earthBump from \"@/assets/earthbump1k.jpg\";\nimport earthSpecular from \"@/assets/earth-specular.png\";\nimport { OrbitControls } from \"../OrbitControls\";\nimport { RescaleLayer, MeshToLayer } from \"../utils/DysonSphereUtils\";\n\nfunction geometryForShell(\n  shell: DysonShell,\n  nodeMap: Map<number, DysonNode>,\n  scene: THREE.Scene\n) {\n  let geometry = new THREE.BufferGeometry();\n  let nodes = shell.nodeIds.map((id) => nodeMap.get(id));\n\n  let pts = nodes.map((n) => new THREE.Vector3(n!.pos.x, n!.pos.y, n!.pos.z));\n  let triangles = [];\n  let origin = pts[0];\n  for (let i = 2; i < pts.length; i++) {\n    triangles.push(origin);\n    triangles.push(pts[i - 1]);\n    triangles.push(pts[i]);\n  }\n\n  geometry.setFromPoints(triangles);\n  geometry.computeVertexNormals();\n  THREE.Triangle;\n  scene.add(\n    new THREE.Mesh(\n      geometry,\n      new THREE.MeshPhongMaterial({\n        color: \"orange\",\n        side: THREE.DoubleSide,\n        emissive: \"orange\",\n        emissiveIntensity: 0.1,\n      })\n    )\n  );\n}\n\nfunction loadSphere(scene: THREE.Scene, dysonSphere: DysonSphere) {\n  dysonSphere.layers.forEach((layer) => {\n    let idMap = new Map<number, DysonNode>();\n    layer.nodes.forEach((node) => {\n      idMap.set(node.id, node);\n    });\n    console.log(`Nodes: ${layer.nodes.length}`);\n    const material = new THREE.LineBasicMaterial({\n      color: 0x0000ff,\n    });\n    layer.shells?.forEach((shell) => {\n      let nodes: DysonNode[] = shell.nodeIds?.map((idx) =>\n        idMap.get(idx)\n      ) as DysonNode[];\n      const points = nodes.map(\n        (n) => new THREE.Vector3(n.pos.x, n.pos.y, n.pos.z)\n      );\n      const geometry = new THREE.BufferGeometry();\n      geometry.setFromPoints(points);\n      const line = new THREE.Line(geometry, material);\n      line.type = \"LineLoop\";\n      scene.add(line);\n      geometryForShell(shell, idMap, scene);\n    });\n  });\n  let loader = new THREE.TextureLoader();\n  let texture = loader.load(earth);\n  let bumpMap = loader.load(earthBump);\n  const mesh = new THREE.Mesh(\n    new THREE.SphereGeometry(dysonSphere.minOrbitRadius * 0.7, 32, 32),\n    new THREE.MeshPhongMaterial({\n      map: texture,\n      bumpMap: bumpMap,\n      bumpScale: 0.5,\n      specularMap: loader.load(earthSpecular),\n      specular: new THREE.Color(\"grey\"),\n      side: THREE.DoubleSide,\n      emissive: new THREE.Color(0xffffff),\n      emissiveIntensity: 0.1,\n    })\n  );\n  scene.add(mesh);\n  let light = new THREE.DirectionalLight(0xffffff);\n  light.position.set(0, 1, 1).normalize();\n  scene.add(new THREE.PointLight(0xffffff));\n  scene.add(light);\n  scene.add(new THREE.AmbientLight(0xffffff, 0.3));\n}\n\nfunction resizeRendererToDisplaySize(renderer: THREE.Renderer) {\n  const canvas = renderer.domElement;\n  const width = canvas.clientWidth;\n  const height = canvas.clientHeight;\n  const needResize = canvas.width !== width || canvas.height !== height;\n  if (needResize) {\n    renderer.setSize(width, height, false);\n  }\n  return needResize;\n}\n\nexport default defineComponent({\n  name: \"DysonSphere\",\n  data: function () {\n    return {\n      cameraPosition: new THREE.Vector3(),\n      font: {} as THREE.Font,\n      loader: new THREE.FontLoader(),\n      dysonSphere: {} as DysonSphere,\n      displayText: \"\",\n      displayTextMesh: {} as THREE.Mesh,\n      scene: {} as THREE.Scene,\n      outputJson: \"\",\n    };\n  },\n  props: {\n    dyson: String,\n  },\n  methods: {\n    outputToJson() {\n      const dysonSphere: DysonSphere = JSON.parse(\n        JSON.stringify(this.dysonSphere)\n      );\n      const layer = MeshToLayer(this.displayTextMesh);\n      layer.orbitRadius = this.maxLayerRadius + 1000;\n      layer.orbitAngularSpeed = 1.142905;\n      layer.id = Math.max(...dysonSphere.layers.map((l) => l.id)) + 1;\n      dysonSphere.layers.push(layer);\n      this.outputJson = JSON.stringify(dysonSphere);\n    },\n    geometryForText(text: string) {\n      const textDistance = this.maxLayerRadius + 1000;\n      console.log(this.maxLayerRadius);\n\n      let geometry = new THREE.TextGeometry(text, {\n        font: this.font,\n        size: textDistance / 3,\n        height: 0.02,\n      });\n      return geometry;\n    },\n    addText: function (text: string, scene: THREE.Scene) {\n      const textDistance = this.maxLayerRadius + 1000;\n      let geometry = this.geometryForText(text);\n      let mesh = new THREE.Mesh(\n        geometry,\n        new THREE.MeshBasicMaterial({ color: \"pink\" })\n      );\n      mesh.position.x = -textDistance * 0.5;\n      mesh.position.z = textDistance;\n      mesh.position.y = textDistance * 0.8;\n      scene.add(mesh);\n      this.displayTextMesh = mesh;\n    },\n  },\n  mounted: async function () {\n    const canvas: HTMLCanvasElement = this.$refs[\"canvas\"] as HTMLCanvasElement;\n    console.log(canvas);\n    const JetbrainMono = await import(\"@/assets/JetBrains_Mono_NL_Regular\");\n    this.font = this.loader.parse(JetbrainMono);\n    const znear = 0.1;\n    const zfar = 200000;\n    const camera = new THREE.PerspectiveCamera(\n      75,\n      canvas.width / canvas.height,\n      znear,\n      zfar\n    );\n\n    const renderer = new THREE.WebGLRenderer({ canvas });\n    renderer.setClearColor(new THREE.Color(0xaaaaaa));\n\n    renderer.setSize(canvas.width, canvas.height);\n\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.zoomSpeed = 0.5;\n    controls.minDistance = znear * 2;\n    controls.maxDistance = zfar;\n    ((controls as any) as THREE.EventDispatcher).addEventListener(\n      \"change\",\n      (o) => {\n        this.$data.cameraPosition.x = camera.position.x;\n        this.$data.cameraPosition.y = camera.position.y;\n        this.$data.cameraPosition.z = camera.position.z;\n      }\n    );\n    const scene = new THREE.Scene();\n    this.scene = scene;\n\n    this.dysonSphere = await import(\"@/assets/large_sphere.json\");\n    this.dysonSphere.layers.forEach((l) =>\n      RescaleLayer(l, this.dysonSphere.minOrbitRadius)\n    );\n\n    loadSphere(scene, this.dysonSphere);\n    this.addText(\"D S P\", scene);\n\n    camera.position.set(0, 0, this.dysonSphere.maxOrbitRadius);\n    camera.lookAt(0, 0, 0);\n\n    const render = (time: number) => {\n      if (resizeRendererToDisplaySize(renderer)) {\n        const canvas = renderer.domElement;\n        camera.aspect = canvas.clientWidth / canvas.clientHeight;\n        camera.updateProjectionMatrix();\n      }\n\n      renderer.render(scene, camera);\n      controls.update();\n\n      requestAnimationFrame(render);\n    };\n\n    requestAnimationFrame(render);\n  },\n  computed: {\n    maxLayerRadius(): number {\n      return Math.max(...this.dysonSphere.layers.map((l) => l.orbitRadius));\n    },\n    x(): string {\n      return this.cameraPosition.x.toFixed(4);\n    },\n    y(): string {\n      return this.cameraPosition.y.toFixed(4);\n    },\n    z(): string {\n      return this.cameraPosition.z.toFixed(4);\n    },\n  },\n  watch: {\n    displayText: function (newText, oldTextt) {\n      console.log({ newText });\n      const geometry = this.geometryForText(newText);\n      this.displayTextMesh.geometry.dispose();\n      this.displayTextMesh.geometry = geometry;\n      geometry.computeBoundingBox();\n      const boundingBox = geometry.boundingBox!;\n      const textWidth = boundingBox.max.x - boundingBox.min.x;\n      this.displayTextMesh.position.x = -textWidth * 0.5;\n    },\n  },\n});\n","import { render } from \"./HelloWorld.vue?vue&type=template&id=64c78f60\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=ts\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport HelloWorld from \"./components/HelloWorld.vue\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    HelloWorld,\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=195a448a\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=195a448a&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n","module.exports = __webpack_public_path__ + \"img/earthbump1k.ef58250d.jpg\";"],"sourceRoot":""}